# PolyPang — 화면 기획서 (Screen Design Spec)

## 0. 전체 설계 원칙

### 0.1 모바일 퍼스트

* **기준 해상도**: 세로 9:16 (예: 390×844)
* **PC 대응**: 중앙 정렬 + 양옆 여백 (max-width 제한)

### 0.2 핵심 UX 원칙: 내 Side 하단 고정

> **모든 플레이어는 자신의 Side가 화면 하단에 위치하도록 Arena가 회전되어 렌더링된다.**

* 이유:
  * 좌우 터치 입력과 패들 이동 방향이 일치
  * 손가락이 Arena를 가리지 않음
  * 모든 플레이어가 동일한 조작 경험
* 구현:
  * 각 클라이언트는 `myPlayerIndex`를 기준으로 Arena를 회전
  * 다른 플레이어들은 상대적 위치에 배치

### 0.3 공통 레이아웃

* **상단(Header)**: 로고, 방 코드, 연결 상태
* **중앙(Main)**: 콘텐츠 (Arena, 리스트, 폼 등)
* **하단(Footer)**: 액션 버튼, 입력 컨트롤

### 0.4 컴포넌트화

재사용 컴포넌트 우선 정의:

* `AppHeader` - 상단 네비게이션
* `RoomCodePanel` - 방 코드 + 복사 버튼
* `PlayerList` - 플레이어 목록
* `ArenaView` - 게임 경기장 캔버스
* `TouchInputArea` - 좌우 터치 조작 영역
* `EmojiBar` - 관전자 이모지 바
* `PrimaryButton`, `SecondaryButton` - 공통 버튼

---

## 1. 화면 리스트 (Screen Map)

| ID  | 화면명              | 역할                        |
| --- | ------------------- | --------------------------- |
| S01 | 홈 / 방 선택        | 방 만들기, 참가코드로 입장  |
| S02 | 로비                | 인원 확인, Ready, Start     |
| S03 | 카운트다운 오버레이 | 인게임 진입 전 3초 카운트   |
| S04 | 인게임 - 플레이어   | 경기장 + 패들 조작          |
| S05 | 인게임 - 관전       | 경기장 관전 + 이모지 리액션 |
| S06 | 결과 화면           | 우승자/순위, 다시하기/나가기|

* S03은 S04 위의 **오버레이**
* S05는 S04의 **관전 상태 변형**

---

## 2. 인게임 화면 레이아웃 (S04/S05)

### 2.1 화면 비율 분배 (9:16 기준)

```text
┌─────────────────────────────┐
│ Header                      │  6%  (~50px)
├─────────────────────────────┤
│ 생존자 목록                  │  4%  (~34px)
├─────────────────────────────┤
│                             │
│                             │
│         ARENA               │  52% (~438px)
│      (정N각형)               │
│                             │
│    ════[내 패들]════        │
│                             │
├─────────────────────────────┤
│                             │
│      조작 영역               │  38% (~320px)
│   (좌우 터치 홀드)           │
│                             │
└─────────────────────────────┘
```

### 2.2 각 영역 상세

#### Header (6%)
* 좌측: PolyPang 로고
* 우측: 방 코드 (AB3F9K) + 연결 상태 아이콘 (📶/⚡)

#### 생존자 목록 (4%)
* 플레이어 아이콘/이모지 가로 나열
* Alive: 컬러, OUT: 회색+반투명
* 내 아이콘: 노란색 테두리로 강조

#### Arena 영역 (52%)
* 정N각형 경기장
* **내 Side는 항상 하단에 위치**
* 내 패들: 노란색/강조 색상, 다른 패들보다 두껍게
* 각 Side 바깥에 플레이어 닉네임/아이콘 표시
* 공 + 트레일 효과

#### 조작 영역 (38%)
* 좌우 2분할 터치 영역
* 각 영역에 방향 아이콘 (◀ / ▶) 반투명 표시
* PC: 키보드 가이드 텍스트 ("A/D 또는 ←/→")

---

## 3. 조작 방식 상세

### 3.1 모바일: 좌우 터치 홀드 (MVP)

| 입력 | 동작 |
|------|------|
| 왼쪽 영역 터치 & 홀드 | 패들 왼쪽으로 이동 (누르는 동안) |
| 오른쪽 영역 터치 & 홀드 | 패들 오른쪽으로 이동 (누르는 동안) |
| 터치 해제 | 패들 감속 후 정지 |
| 양쪽 동시 터치 | 정지 유지 |

**터치 영역 스펙:**
* 화면 하단 38% 전체가 터치 감지 영역
* 좌측 50% = LEFT, 우측 50% = RIGHT
* 터치 시 해당 영역 배경 살짝 밝아짐 (피드백)

### 3.2 PC: 키보드 조작

| 입력 | 동작 |
|------|------|
| `A` 또는 `←` 홀드 | 패들 왼쪽으로 이동 |
| `D` 또는 `→` 홀드 | 패들 오른쪽으로 이동 |
| 키 릴리즈 | 패들 감속 후 정지 |

### 3.3 향후 확장 (MVP 이후)

* **슬라이더 모드**: 손가락 위치에 패들이 따라오는 방식
* **설정에서 조작 모드 선택 가능**

---

## 4. 화면별 상세 기획

### S01. 홈 / 방 선택

**목적**: 방 만들기 또는 참가코드로 입장

**와이어프레임:**
```text
┌─────────────────────────────┐
│        PolyPang 로고        │
│                             │
├─────────────────────────────┤
│                             │
│    ┌─────────────────┐      │
│    │   방 만들기      │      │  ← PrimaryButton
│    └─────────────────┘      │
│                             │
│    ┌──────────┐ ┌─────┐     │
│    │ ABC123   │ │입장 │     │  ← 코드 입력 + SecondaryButton
│    └──────────┘ └─────┘     │
│                             │
│   "친구들이랑 팡! 한판 하자" │
│                             │
└─────────────────────────────┘
```

**동작:**
* "방 만들기" → 닉네임 입력 모달 → 서버에 Room 생성 → S02 이동
* 코드 입력 (6자리, 자동 대문자) + "입장" → 유효성 검사 → S02 이동
* 실패 시: 토스트 "코드가 유효하지 않습니다"

---

### S02. 로비 (Room Lobby)

**목적**: 인원 모으기, Ready 상태 확인, Host의 게임 시작

**와이어프레임:**
```text
┌─────────────────────────────┐
│ PolyPang       CODE: AB3F9K │
│                    [복사]   │
├─────────────────────────────┤
│ 플레이어 목록               │
│ ─────────────────────────── │
│ 1. 😎 illuni (나)   READY   │  ← 내 항목 하이라이트
│ 2. 🙂 guest1       NOT READY│
│ 3. 🤓 guest2       READY    │
│ ...                         │
│ (최대 8명)                  │
├─────────────────────────────┤
│                             │
│    ┌─────────────────┐      │
│    │ Ready / 취소    │      │  ← 토글 버튼
│    └─────────────────┘      │
│                             │
│    ┌─────────────────┐      │
│    │   게임 시작     │      │  ← Host만 표시
│    └─────────────────┘      │
│    (2명 이상 필요)          │
│                             │
└─────────────────────────────┘
```

**기획 포인트:**
* 내 항목: 배경색 연하게 하이라이트
* Ready 토글: `LOBBY_WAIT` ↔ `LOBBY_READY`
* Host 전용: "게임 시작" 버튼 (인원 < 2명이면 비활성)

**상태 변화:**
* 입장/퇴장/Ready 변경 시: 실시간 갱신 (소켓 이벤트)
* Host가 시작 클릭: Room state `LOBBY` → `COUNTDOWN`

---

### S03. 카운트다운 오버레이

**목적**: 인게임 시작 전 3초 카운트, 기대감 상승

**와이어프레임 (S04 위에 반투명 오버레이):**
```text
┌─────────────────────────────┐
│                             │
│                             │
│                             │
│            3                │  ← 큰 숫자, 펄스 애니메이션
│                             │
│                             │
│                             │
└─────────────────────────────┘
       ↓ (1초 간격)
       2 → 1 → GO!
```

**동작:**
* Room state `COUNTDOWN` 동안:
  * ArenaView 렌더링 (어둡게, 입력 무시)
  * 중앙에 3 → 2 → 1 → GO! (각 0.8~1초)
* 카운트 완료: state `INGAME`, 오버레이 제거, 입력 활성화

---

### S04. 인게임 - 플레이어 모드

**목적**: 실제 게임플레이, 패들 조작

**와이어프레임:**
```text
┌─────────────────────────────┐
│ PolyPang    AB3F9K      📶  │  ← Header (6%)
├─────────────────────────────┤
│ 😀 😀 😵 😀 😵 😀 😀 😀     │  ← 생존자 목록 (4%)
├─────────────────────────────┤
│         guest3 🤓          │
│            ╱╲              │
│           ╱  ╲             │
│    🙂   ╱  ⚪  ╲   😎     │  ← Arena (52%)
│  guest1 ╲      ╱ guest2    │
│          ╲____╱            │
│        ═══════════         │  ← 내 패들 (노란색, 강조)
│           😀 나            │
├─────────────────────────────┤
│                             │
│    ◀ LEFT    RIGHT ▶       │  ← 조작 영역 (38%)
│                             │
│   (화면 터치로 패들 이동)    │
│                             │
│      PC: A/D 또는 ←/→      │
└─────────────────────────────┘
```

**핵심 UX:**
* **내 Side/패들은 항상 화면 하단**
* 내 패들: 노란색, 다른 패들보다 굵게 (1~2px)
* 터치 영역: 좌우 각각 화면 절반, 아이콘은 반투명

**상태 변화:**
* OUT 발생 시:
  * 해당 Side에 OUT Pang 이펙트
  * 생존자 목록에서 회색 처리

---

### S05. 인게임 - 관전 모드 (Spectator)

**목적**: 탈락 후 게임 관전, 이모지 리액션

**와이어프레임:**
```text
┌─────────────────────────────┐
│ PolyPang    AB3F9K      👁  │  ← 관전 아이콘
├─────────────────────────────┤
│ 😀 😀 😵 😀 😵 😀 😀 😀     │
├─────────────────────────────┤
│                             │
│         ARENA VIEW          │
│   (내 패들/Side 없음,       │
│    나머지 그대로 렌더링)    │
│                             │
├─────────────────────────────┤
│       👁 관전 중            │
│                             │
│  👍   😂   😱   🔥   👏   💀 │  ← EmojiBar
│                             │
└─────────────────────────────┘
```

**전환 타이밍:**
* OUT Pang 이펙트 종료 후:
  * 조작 영역 → EmojiBar로 대체
  * "관전 중" 텍스트 표시

**EmojiBar 동작:**
* 이모지 버튼 탭 → 서버에 `send_emoji` 이벤트
* 모든 플레이어 Arena에 이모지 떠다니기 (1~2초)

---

### S06. 결과 화면 (Result)

**목적**: 승자/순위 표시, 재시작 또는 퇴장

**와이어프레임:**
```text
┌─────────────────────────────┐
│ PolyPang                    │
├─────────────────────────────┤
│                             │
│        🎮 GAME RESULT       │
│                             │
│           WINNER            │
│         🏆 illuni           │
│                             │
│         ─────────           │
│                             │
│         RANKING             │
│  1. illuni        😀        │
│  2. guest1        🙂        │
│  3. guest2        😵        │
│  ...                        │
│                             │
├─────────────────────────────┤
│                             │
│  ┌──────────┐ ┌──────────┐  │
│  │ 다시하기 │ │ 방 나가기│  │
│  └──────────┘ └──────────┘  │
│                             │
└─────────────────────────────┘
```

**버튼 동작:**
* "다시 하기": 같은 방에서 S02(로비)로 복귀, 인원 유지
* "방 나가기": S01(홈)으로 이동, Room에서 제거

---

## 5. 공통 UI 패턴

### 5.1 토스트 메시지

* 위치: 화면 상단, Header 아래
* 지속: 2~3초 후 자동 사라짐
* 스타일: 둥근 모서리, 반투명 배경
* 용도:
  * 에러: "코드가 유효하지 않습니다"
  * 알림: "guest1님이 입장했습니다"
  * 연결: "연결이 끊어졌습니다. 재연결 중..."

### 5.2 버튼 스타일

| 타입 | 용도 | 스타일 |
|------|------|--------|
| Primary | 주요 액션 (방 만들기, 게임 시작) | 채워진 배경, 강조 색상 |
| Secondary | 보조 액션 (입장, 취소) | 테두리만, 투명 배경 |
| Ghost | 덜 중요한 액션 | 텍스트만 |

### 5.3 플레이어 상태 표시

| 상태 | 로비 표시 | 인게임 표시 |
|------|-----------|-------------|
| LOBBY_WAIT | "NOT READY" 회색 | - |
| LOBBY_READY | "READY" 녹색 | - |
| INGAME_ALIVE | - | 컬러 아이콘 |
| SPECTATOR | - | 회색, 반투명 |
| DISCONNECTED | "연결 끊김" 빨간색 | 점선 표시 |

---

## 6. 반응형 대응

### 6.1 모바일 (9:16)
* 기본 레이아웃 그대로 적용

### 6.2 태블릿/PC
* 중앙 정렬, max-width: 500px
* 양옆 여백은 배경 패턴 또는 단색
* 조작 영역: 키보드 가이드 강조, 터치 영역 축소

### 6.3 가로 모드 (향후)
* Arena 중앙, 좌측에 플레이어 목록, 우측에 채팅/이모지
* 조작: 화면 하단 또는 양옆

---

## 7. 개발자/디자이너 핸드오프

### 디자이너에게:
1. S01~S06 각 화면의 고해상도 목업
2. 상태별 시각 변화 (Ready/Not Ready, Alive/Out)
3. 버튼/토스트/아이콘 디자인 시스템
4. Arena 내 플레이어 색상 팔레트 (8색)

### 개발자에게:
1. 화면 비율 (6%/4%/52%/38%) 준수
2. 내 Side 하단 고정을 위한 Arena 회전 로직
3. 터치 영역: 하단 38%, 좌우 50%씩 분할
4. 소켓 이벤트 기반 실시간 UI 갱신