var gx=Object.defineProperty;var yx=(t,e,r)=>e in t?gx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var qt=(t,e,r)=>yx(t,typeof e!="symbol"?e+"":e,r);function vx(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ad(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _x(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Zg={exports:{}},Ml={},Jg={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),xx=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),Tx=Symbol.for("react.profiler"),Sx=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),bx=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),Px=Symbol.for("react.memo"),Ix=Symbol.for("react.lazy"),Gf=Symbol.iterator;function Rx(t){return t===null||typeof t!="object"?null:(t=Gf&&t[Gf]||t["@@iterator"],typeof t=="function"?t:null)}var ey={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ty=Object.assign,ry={};function rs(t,e,r){this.props=t,this.context=e,this.refs=ry,this.updater=r||ey}rs.prototype.isReactComponent={};rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ny(){}ny.prototype=rs.prototype;function bd(t,e,r){this.props=t,this.context=e,this.refs=ry,this.updater=r||ey}var Cd=bd.prototype=new ny;Cd.constructor=bd;ty(Cd,rs.prototype);Cd.isPureReactComponent=!0;var Hf=Array.isArray,iy=Object.prototype.hasOwnProperty,Pd={current:null},sy={key:!0,ref:!0,__self:!0,__source:!0};function oy(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)iy.call(e,n)&&!sy.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:yo,type:t,key:s,ref:o,props:i,_owner:Pd.current}}function Mx(t,e){return{$$typeof:yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Id(t){return typeof t=="object"&&t!==null&&t.$$typeof===yo}function Dx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var zf=/\/+/g;function hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Dx(""+t.key):e.toString(36)}function ma(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yo:case xx:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+hu(o,0):n,Hf(i)?(r="",t!=null&&(r=t.replace(zf,"$&/")+"/"),ma(i,e,r,"",function(u){return u})):i!=null&&(Id(i)&&(i=Mx(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Hf(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+hu(s,a);o+=ma(s,e,r,l,i)}else if(l=Rx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+hu(s,a++),o+=ma(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Po(t,e,r){if(t==null)return t;var n=[],i=0;return ma(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Nx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},ga={transition:null},kx={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ga,ReactCurrentOwner:Pd};function ay(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Po,forEach:function(t,e,r){Po(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Po(t,function(){e++}),e},toArray:function(t){return Po(t,function(e){return e})||[]},only:function(t){if(!Id(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=rs;oe.Fragment=Ex;oe.Profiler=Tx;oe.PureComponent=bd;oe.StrictMode=wx;oe.Suspense=Cx;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx;oe.act=ay;oe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ty({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Pd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iy.call(e,l)&&!sy.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:yo,type:t.type,key:i,ref:s,props:n,_owner:o}};oe.createContext=function(t){return t={$$typeof:Ax,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sx,_context:t},t.Consumer=t};oe.createElement=oy;oe.createFactory=function(t){var e=oy.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:bx,render:t}};oe.isValidElement=Id;oe.lazy=function(t){return{$$typeof:Ix,_payload:{_status:-1,_result:t},_init:Nx}};oe.memo=function(t,e){return{$$typeof:Px,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=ga.transition;ga.transition={};try{t()}finally{ga.transition=e}};oe.unstable_act=ay;oe.useCallback=function(t,e){return st.current.useCallback(t,e)};oe.useContext=function(t){return st.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return st.current.useDeferredValue(t)};oe.useEffect=function(t,e){return st.current.useEffect(t,e)};oe.useId=function(){return st.current.useId()};oe.useImperativeHandle=function(t,e,r){return st.current.useImperativeHandle(t,e,r)};oe.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return st.current.useMemo(t,e)};oe.useReducer=function(t,e,r){return st.current.useReducer(t,e,r)};oe.useRef=function(t){return st.current.useRef(t)};oe.useState=function(t){return st.current.useState(t)};oe.useSyncExternalStore=function(t,e,r){return st.current.useSyncExternalStore(t,e,r)};oe.useTransition=function(){return st.current.useTransition()};oe.version="18.3.1";Jg.exports=oe;var D=Jg.exports;const ly=Ad(D),Bx=vx({__proto__:null,default:ly},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox=D,Fx=Symbol.for("react.element"),Lx=Symbol.for("react.fragment"),Ux=Object.prototype.hasOwnProperty,Gx=Ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hx={key:!0,ref:!0,__self:!0,__source:!0};function uy(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Ux.call(e,n)&&!Hx.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Fx,type:t,key:s,ref:o,props:i,_owner:Gx.current}}Ml.Fragment=Lx;Ml.jsx=uy;Ml.jsxs=uy;Zg.exports=Ml;var G=Zg.exports,kh={},hy={exports:{}},xt={},cy={exports:{}},dy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,k){var b=C.length;C.push(k);e:for(;0<b;){var P=b-1>>>1,j=C[P];if(0<i(j,k))C[P]=k,C[b]=j,b=P;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var k=C[0],b=C.pop();if(b!==k){C[0]=b;e:for(var P=0,j=C.length,te=j>>>1;P<te;){var re=2*(P+1)-1,me=C[re],he=re+1,fe=C[he];if(0>i(me,b))he<j&&0>i(fe,me)?(C[P]=fe,C[he]=b,P=he):(C[P]=me,C[re]=b,P=re);else if(he<j&&0>i(fe,b))C[P]=fe,C[he]=b,P=he;else break e}}return k}function i(C,k){var b=C.sortIndex-k.sortIndex;return b!==0?b:C.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,p=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(C){for(var k=r(u);k!==null;){if(k.callback===null)n(u);else if(k.startTime<=C)n(u),k.sortIndex=k.expirationTime,e(l,k);else break;k=r(u)}}function x(C){if(v=!1,m(C),!p)if(r(l)!==null)p=!0,V(E);else{var k=r(u);k!==null&&L(x,k.startTime-C)}}function E(C,k){p=!1,v&&(v=!1,g(T),T=-1),f=!0;var b=d;try{for(m(k),c=r(l);c!==null&&(!(c.expirationTime>k)||C&&!q());){var P=c.callback;if(typeof P=="function"){c.callback=null,d=c.priorityLevel;var j=P(c.expirationTime<=k);k=t.unstable_now(),typeof j=="function"?c.callback=j:c===r(l)&&n(l),m(k)}else n(l);c=r(l)}if(c!==null)var te=!0;else{var re=r(u);re!==null&&L(x,re.startTime-k),te=!1}return te}finally{c=null,d=b,f=!1}}var A=!1,w=null,T=-1,R=5,I=-1;function q(){return!(t.unstable_now()-I<R)}function F(){if(w!==null){var C=t.unstable_now();I=C;var k=!0;try{k=w(!0,C)}finally{k?S():(A=!1,w=null)}}else A=!1}var S;if(typeof y=="function")S=function(){y(F)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,O=M.port2;M.port1.onmessage=F,S=function(){O.postMessage(null)}}else S=function(){_(F,0)};function V(C){w=C,A||(A=!0,S())}function L(C,k){T=_(function(){C(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,V(E))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(C){switch(d){case 1:case 2:case 3:var k=3;break;default:k=d}var b=d;d=k;try{return C()}finally{d=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,k){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var b=d;d=C;try{return k()}finally{d=b}},t.unstable_scheduleCallback=function(C,k,b){var P=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?P+b:P):b=P,C){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=b+j,C={id:h++,callback:k,priorityLevel:C,startTime:b,expirationTime:j,sortIndex:-1},b>P?(C.sortIndex=b,e(u,C),r(l)===null&&C===r(u)&&(v?(g(T),T=-1):v=!0,L(x,b-P))):(C.sortIndex=j,e(l,C),p||f||(p=!0,V(E))),C},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(C){var k=d;return function(){var b=d;d=k;try{return C.apply(this,arguments)}finally{d=b}}}})(dy);cy.exports=dy;var zx=cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=D,_t=zx;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fy=new Set,Ys={};function Qn(t,e){Vi(t,e),Vi(t+"Capture",e)}function Vi(t,e){for(Ys[t]=e,t=0;t<e.length;t++)fy.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bh=Object.prototype.hasOwnProperty,jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$f={},jf={};function Vx(t){return Bh.call(jf,t)?!0:Bh.call($f,t)?!1:jx.test(t)?jf[t]=!0:($f[t]=!0,!1)}function Wx(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xx(t,e,r,n){if(e===null||typeof e>"u"||Wx(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ot(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rd=/[\-:]([a-z])/g;function Md(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rd,Md);Ke[e]=new ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rd,Md);Ke[e]=new ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rd,Md);Ke[e]=new ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dd(t,e,r,n){var i=Ke.hasOwnProperty(e)?Ke[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xx(e,r,i,n)&&(r=null),n||i===null?Vx(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Lr=$x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Io=Symbol.for("react.element"),mi=Symbol.for("react.portal"),gi=Symbol.for("react.fragment"),Nd=Symbol.for("react.strict_mode"),Oh=Symbol.for("react.profiler"),py=Symbol.for("react.provider"),my=Symbol.for("react.context"),kd=Symbol.for("react.forward_ref"),Fh=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Bd=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),gy=Symbol.for("react.offscreen"),Vf=Symbol.iterator;function ls(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,cu;function Es(t){if(cu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);cu=e&&e[1]||""}return`
`+cu+t}var du=!1;function fu(t,e){if(!t||du)return"";du=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{du=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Es(t):""}function Yx(t){switch(t.tag){case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return t=fu(t.type,!1),t;case 11:return t=fu(t.type.render,!1),t;case 1:return t=fu(t.type,!0),t;default:return""}}function Uh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gi:return"Fragment";case mi:return"Portal";case Oh:return"Profiler";case Nd:return"StrictMode";case Fh:return"Suspense";case Lh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case my:return(t.displayName||"Context")+".Consumer";case py:return(t._context.displayName||"Context")+".Provider";case kd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bd:return e=t.displayName||null,e!==null?e:Uh(t.type)||"Memo";case $r:e=t._payload,t=t._init;try{return Uh(t(e))}catch{}}return null}function Kx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uh(e);case 8:return e===Nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qx(t){var e=yy(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ro(t){t._valueTracker||(t._valueTracker=qx(t))}function vy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=yy(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gh(t,e){var r=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Wf(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _y(t,e){e=e.checked,e!=null&&Dd(t,"checked",e,!1)}function Hh(t,e){_y(t,e);var r=cn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zh(t,e.type,r):e.hasOwnProperty("defaultValue")&&zh(t,e.type,cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xf(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zh(t,e,r){(e!=="number"||Ua(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ws=Array.isArray;function Ii(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $h(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(N(92));if(ws(r)){if(1<r.length)throw Error(N(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cn(r)}}function xy(t,e){var r=cn(e.value),n=cn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Kf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ey(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ey(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mo,wy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mo=Mo||document.createElement("div"),Mo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ks(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qx=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(t){Qx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ks[e]=ks[t]})});function Ty(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ks.hasOwnProperty(t)&&ks[t]?(""+e).trim():e+"px"}function Sy(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ty(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Zx=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(Zx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Wh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xh=null;function Od(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yh=null,Ri=null,Mi=null;function qf(t){if(t=xo(t)){if(typeof Yh!="function")throw Error(N(280));var e=t.stateNode;e&&(e=Ol(e),Yh(t.stateNode,t.type,e))}}function Ay(t){Ri?Mi?Mi.push(t):Mi=[t]:Ri=t}function by(){if(Ri){var t=Ri,e=Mi;if(Mi=Ri=null,qf(t),e)for(t=0;t<e.length;t++)qf(e[t])}}function Cy(t,e){return t(e)}function Py(){}var pu=!1;function Iy(t,e,r){if(pu)return t(e,r);pu=!0;try{return Cy(t,e,r)}finally{pu=!1,(Ri!==null||Mi!==null)&&(Py(),by())}}function qs(t,e){var r=t.stateNode;if(r===null)return null;var n=Ol(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(N(231,e,typeof r));return r}var Kh=!1;if(Mr)try{var us={};Object.defineProperty(us,"passive",{get:function(){Kh=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Kh=!1}function Jx(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Bs=!1,Ga=null,Ha=!1,qh=null,e1={onError:function(t){Bs=!0,Ga=t}};function t1(t,e,r,n,i,s,o,a,l){Bs=!1,Ga=null,Jx.apply(e1,arguments)}function r1(t,e,r,n,i,s,o,a,l){if(t1.apply(this,arguments),Bs){if(Bs){var u=Ga;Bs=!1,Ga=null}else throw Error(N(198));Ha||(Ha=!0,qh=u)}}function Zn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ry(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qf(t){if(Zn(t)!==t)throw Error(N(188))}function n1(t){var e=t.alternate;if(!e){if(e=Zn(t),e===null)throw Error(N(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Qf(i),t;if(s===n)return Qf(i),e;s=s.sibling}throw Error(N(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(N(189))}}if(r.alternate!==n)throw Error(N(190))}if(r.tag!==3)throw Error(N(188));return r.stateNode.current===r?t:e}function My(t){return t=n1(t),t!==null?Dy(t):null}function Dy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dy(t);if(e!==null)return e;t=t.sibling}return null}var Ny=_t.unstable_scheduleCallback,Zf=_t.unstable_cancelCallback,i1=_t.unstable_shouldYield,s1=_t.unstable_requestPaint,De=_t.unstable_now,o1=_t.unstable_getCurrentPriorityLevel,Fd=_t.unstable_ImmediatePriority,ky=_t.unstable_UserBlockingPriority,za=_t.unstable_NormalPriority,a1=_t.unstable_LowPriority,By=_t.unstable_IdlePriority,Dl=null,hr=null;function l1(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(Dl,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:c1,u1=Math.log,h1=Math.LN2;function c1(t){return t>>>=0,t===0?32:31-(u1(t)/h1|0)|0}var Do=64,No=4194304;function Ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $a(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Ts(a):(s&=o,s!==0&&(n=Ts(s)))}else o=r&~i,o!==0?n=Ts(o):s!==0&&(n=Ts(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-jt(e),i=1<<r,n|=t[r],e&=~i;return n}function d1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f1(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jt(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=d1(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Qh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Oy(){var t=Do;return Do<<=1,!(Do&4194240)&&(Do=64),t}function mu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jt(e),t[e]=r}function p1(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-jt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Ld(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-jt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var de=0;function Fy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ly,Ud,Uy,Gy,Hy,Zh=!1,ko=[],en=null,tn=null,rn=null,Qs=new Map,Zs=new Map,Wr=[],m1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jf(t,e){switch(t){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":Qs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(e.pointerId)}}function hs(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xo(e),e!==null&&Ud(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function g1(t,e,r,n,i){switch(e){case"focusin":return en=hs(en,t,e,r,n,i),!0;case"dragenter":return tn=hs(tn,t,e,r,n,i),!0;case"mouseover":return rn=hs(rn,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Qs.set(s,hs(Qs.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Zs.set(s,hs(Zs.get(s)||null,t,e,r,n,i)),!0}return!1}function zy(t){var e=Dn(t.target);if(e!==null){var r=Zn(e);if(r!==null){if(e=r.tag,e===13){if(e=Ry(r),e!==null){t.blockedOn=e,Hy(t.priority,function(){Uy(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ya(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Xh=n,r.target.dispatchEvent(n),Xh=null}else return e=xo(r),e!==null&&Ud(e),t.blockedOn=r,!1;e.shift()}return!0}function ep(t,e,r){ya(t)&&r.delete(e)}function y1(){Zh=!1,en!==null&&ya(en)&&(en=null),tn!==null&&ya(tn)&&(tn=null),rn!==null&&ya(rn)&&(rn=null),Qs.forEach(ep),Zs.forEach(ep)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,Zh||(Zh=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,y1)))}function Js(t){function e(i){return cs(i,t)}if(0<ko.length){cs(ko[0],t);for(var r=1;r<ko.length;r++){var n=ko[r];n.blockedOn===t&&(n.blockedOn=null)}}for(en!==null&&cs(en,t),tn!==null&&cs(tn,t),rn!==null&&cs(rn,t),Qs.forEach(e),Zs.forEach(e),r=0;r<Wr.length;r++)n=Wr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wr.length&&(r=Wr[0],r.blockedOn===null);)zy(r),r.blockedOn===null&&Wr.shift()}var Di=Lr.ReactCurrentBatchConfig,ja=!0;function v1(t,e,r,n){var i=de,s=Di.transition;Di.transition=null;try{de=1,Gd(t,e,r,n)}finally{de=i,Di.transition=s}}function _1(t,e,r,n){var i=de,s=Di.transition;Di.transition=null;try{de=4,Gd(t,e,r,n)}finally{de=i,Di.transition=s}}function Gd(t,e,r,n){if(ja){var i=Jh(t,e,r,n);if(i===null)Au(t,e,n,Va,r),Jf(t,n);else if(g1(i,t,e,r,n))n.stopPropagation();else if(Jf(t,n),e&4&&-1<m1.indexOf(t)){for(;i!==null;){var s=xo(i);if(s!==null&&Ly(s),s=Jh(t,e,r,n),s===null&&Au(t,e,n,Va,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Au(t,e,n,null,r)}}var Va=null;function Jh(t,e,r,n){if(Va=null,t=Od(n),t=Dn(t),t!==null)if(e=Zn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ry(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Va=t,null}function $y(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o1()){case Fd:return 1;case ky:return 4;case za:case a1:return 16;case By:return 536870912;default:return 16}default:return 16}}var Kr=null,Hd=null,va=null;function jy(){if(va)return va;var t,e=Hd,r=e.length,n,i="value"in Kr?Kr.value:Kr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return va=i.slice(t,1<n?1-n:void 0)}function _a(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bo(){return!0}function tp(){return!1}function Et(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bo:tp,this.isPropagationStopped=tp,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),e}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zd=Et(ns),_o=be({},ns,{view:0,detail:0}),x1=Et(_o),gu,yu,ds,Nl=be({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ds&&(ds&&t.type==="mousemove"?(gu=t.screenX-ds.screenX,yu=t.screenY-ds.screenY):yu=gu=0,ds=t),gu)},movementY:function(t){return"movementY"in t?t.movementY:yu}}),rp=Et(Nl),E1=be({},Nl,{dataTransfer:0}),w1=Et(E1),T1=be({},_o,{relatedTarget:0}),vu=Et(T1),S1=be({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),A1=Et(S1),b1=be({},ns,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C1=Et(b1),P1=be({},ns,{data:0}),np=Et(P1),I1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M1[t])?!!e[t]:!1}function $d(){return D1}var N1=be({},_o,{key:function(t){if(t.key){var e=I1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_a(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(t){return t.type==="keypress"?_a(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_a(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k1=Et(N1),B1=be({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ip=Et(B1),O1=be({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),F1=Et(O1),L1=be({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),U1=Et(L1),G1=be({},Nl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H1=Et(G1),z1=[9,13,27,32],jd=Mr&&"CompositionEvent"in window,Os=null;Mr&&"documentMode"in document&&(Os=document.documentMode);var $1=Mr&&"TextEvent"in window&&!Os,Vy=Mr&&(!jd||Os&&8<Os&&11>=Os),sp=" ",op=!1;function Wy(t,e){switch(t){case"keyup":return z1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yi=!1;function j1(t,e){switch(t){case"compositionend":return Xy(e);case"keypress":return e.which!==32?null:(op=!0,sp);case"textInput":return t=e.data,t===sp&&op?null:t;default:return null}}function V1(t,e){if(yi)return t==="compositionend"||!jd&&Wy(t,e)?(t=jy(),va=Hd=Kr=null,yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vy&&e.locale!=="ko"?null:e.data;default:return null}}var W1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W1[t.type]:e==="textarea"}function Yy(t,e,r,n){Ay(n),e=Wa(e,"onChange"),0<e.length&&(r=new zd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fs=null,eo=null;function X1(t){sv(t,0)}function kl(t){var e=xi(t);if(vy(e))return t}function Y1(t,e){if(t==="change")return e}var Ky=!1;if(Mr){var _u;if(Mr){var xu="oninput"in document;if(!xu){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),xu=typeof lp.oninput=="function"}_u=xu}else _u=!1;Ky=_u&&(!document.documentMode||9<document.documentMode)}function up(){Fs&&(Fs.detachEvent("onpropertychange",qy),eo=Fs=null)}function qy(t){if(t.propertyName==="value"&&kl(eo)){var e=[];Yy(e,eo,t,Od(t)),Iy(X1,e)}}function K1(t,e,r){t==="focusin"?(up(),Fs=e,eo=r,Fs.attachEvent("onpropertychange",qy)):t==="focusout"&&up()}function q1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kl(eo)}function Q1(t,e){if(t==="click")return kl(e)}function Z1(t,e){if(t==="input"||t==="change")return kl(e)}function J1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:J1;function to(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Bh.call(e,i)||!Yt(t[i],e[i]))return!1}return!0}function hp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var r=hp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hp(r)}}function Qy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zy(){for(var t=window,e=Ua();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ua(t.document)}return e}function Vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eE(t){var e=Zy(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Qy(r.ownerDocument.documentElement,r)){if(n!==null&&Vd(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=cp(r,s);var o=cp(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tE=Mr&&"documentMode"in document&&11>=document.documentMode,vi=null,ec=null,Ls=null,tc=!1;function dp(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tc||vi==null||vi!==Ua(n)||(n=vi,"selectionStart"in n&&Vd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ls&&to(Ls,n)||(Ls=n,n=Wa(ec,"onSelect"),0<n.length&&(e=new zd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=vi)))}function Oo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var _i={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},Eu={},Jy={};Mr&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function Bl(t){if(Eu[t])return Eu[t];if(!_i[t])return t;var e=_i[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Jy)return Eu[t]=e[r];return t}var ev=Bl("animationend"),tv=Bl("animationiteration"),rv=Bl("animationstart"),nv=Bl("transitionend"),iv=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(t,e){iv.set(t,e),Qn(e,[t])}for(var wu=0;wu<fp.length;wu++){var Tu=fp[wu],rE=Tu.toLowerCase(),nE=Tu[0].toUpperCase()+Tu.slice(1);pn(rE,"on"+nE)}pn(ev,"onAnimationEnd");pn(tv,"onAnimationIteration");pn(rv,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(nv,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function pp(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,r1(n,e,void 0,t),t.currentTarget=null}function sv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;pp(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;pp(i,a,u),s=l}}}if(Ha)throw t=qh,Ha=!1,qh=null,t}function ye(t,e){var r=e[oc];r===void 0&&(r=e[oc]=new Set);var n=t+"__bubble";r.has(n)||(ov(e,t,2,!1),r.add(n))}function Su(t,e,r){var n=0;e&&(n|=4),ov(r,t,n,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function ro(t){if(!t[Fo]){t[Fo]=!0,fy.forEach(function(r){r!=="selectionchange"&&(iE.has(r)||Su(r,!1,t),Su(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,Su("selectionchange",!1,e))}}function ov(t,e,r,n){switch($y(e)){case 1:var i=v1;break;case 4:i=_1;break;default:i=Gd}r=i.bind(null,e,r,t),i=void 0,!Kh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Au(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Dn(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}Iy(function(){var u=s,h=Od(r),c=[];e:{var d=iv.get(t);if(d!==void 0){var f=zd,p=t;switch(t){case"keypress":if(_a(r)===0)break e;case"keydown":case"keyup":f=k1;break;case"focusin":p="focus",f=vu;break;case"focusout":p="blur",f=vu;break;case"beforeblur":case"afterblur":f=vu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=w1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=F1;break;case ev:case tv:case rv:f=A1;break;case nv:f=U1;break;case"scroll":f=x1;break;case"wheel":f=H1;break;case"copy":case"cut":case"paste":f=C1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ip}var v=(e&4)!==0,_=!v&&t==="scroll",g=v?d!==null?d+"Capture":null:d;v=[];for(var y=u,m;y!==null;){m=y;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=qs(y,g),x!=null&&v.push(no(y,x,m)))),_)break;y=y.return}0<v.length&&(d=new f(d,p,null,r,h),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&r!==Xh&&(p=r.relatedTarget||r.fromElement)&&(Dn(p)||p[Dr]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=u,p=p?Dn(p):null,p!==null&&(_=Zn(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(v=rp,x="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=ip,x="onPointerLeave",g="onPointerEnter",y="pointer"),_=f==null?d:xi(f),m=p==null?d:xi(p),d=new v(x,y+"leave",f,r,h),d.target=_,d.relatedTarget=m,x=null,Dn(h)===u&&(v=new v(g,y+"enter",p,r,h),v.target=m,v.relatedTarget=_,x=v),_=x,f&&p)t:{for(v=f,g=p,y=0,m=v;m;m=ri(m))y++;for(m=0,x=g;x;x=ri(x))m++;for(;0<y-m;)v=ri(v),y--;for(;0<m-y;)g=ri(g),m--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=ri(v),g=ri(g)}v=null}else v=null;f!==null&&mp(c,d,f,v,!1),p!==null&&_!==null&&mp(c,_,p,v,!0)}}e:{if(d=u?xi(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=Y1;else if(ap(d))if(Ky)E=Z1;else{E=q1;var A=K1}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Q1);if(E&&(E=E(t,u))){Yy(c,E,r,h);break e}A&&A(t,d,u),t==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&zh(d,"number",d.value)}switch(A=u?xi(u):window,t){case"focusin":(ap(A)||A.contentEditable==="true")&&(vi=A,ec=u,Ls=null);break;case"focusout":Ls=ec=vi=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,dp(c,r,h);break;case"selectionchange":if(tE)break;case"keydown":case"keyup":dp(c,r,h)}var w;if(jd)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else yi?Wy(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Vy&&r.locale!=="ko"&&(yi||T!=="onCompositionStart"?T==="onCompositionEnd"&&yi&&(w=jy()):(Kr=h,Hd="value"in Kr?Kr.value:Kr.textContent,yi=!0)),A=Wa(u,T),0<A.length&&(T=new np(T,t,null,r,h),c.push({event:T,listeners:A}),w?T.data=w:(w=Xy(r),w!==null&&(T.data=w)))),(w=$1?j1(t,r):V1(t,r))&&(u=Wa(u,"onBeforeInput"),0<u.length&&(h=new np("onBeforeInput","beforeinput",null,r,h),c.push({event:h,listeners:u}),h.data=w))}sv(c,e)})}function no(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Wa(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qs(t,r),s!=null&&n.unshift(no(t,s,i)),s=qs(t,e),s!=null&&n.push(no(t,s,i))),t=t.return}return n}function ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mp(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=qs(r,s),l!=null&&o.unshift(no(r,l,a))):i||(l=qs(r,s),l!=null&&o.push(no(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var sE=/\r\n?/g,oE=/\u0000|\uFFFD/g;function gp(t){return(typeof t=="string"?t:""+t).replace(sE,`
`).replace(oE,"")}function Lo(t,e,r){if(e=gp(e),gp(t)!==e&&r)throw Error(N(425))}function Xa(){}var rc=null,nc=null;function ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sc=typeof setTimeout=="function"?setTimeout:void 0,aE=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,lE=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(t){return yp.resolve(null).then(t).catch(uE)}:sc;function uE(t){setTimeout(function(){throw t})}function bu(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Js(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Js(e)}function nn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var is=Math.random().toString(36).slice(2),lr="__reactFiber$"+is,io="__reactProps$"+is,Dr="__reactContainer$"+is,oc="__reactEvents$"+is,hE="__reactListeners$"+is,cE="__reactHandles$"+is;function Dn(t){var e=t[lr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Dr]||r[lr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=vp(t);t!==null;){if(r=t[lr])return r;t=vp(t)}return e}t=r,r=t.parentNode}return null}function xo(t){return t=t[lr]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function Ol(t){return t[io]||null}var ac=[],Ei=-1;function mn(t){return{current:t}}function _e(t){0>Ei||(t.current=ac[Ei],ac[Ei]=null,Ei--)}function ge(t,e){Ei++,ac[Ei]=t.current,t.current=e}var dn={},Je=mn(dn),ht=mn(!1),Hn=dn;function Wi(t,e){var r=t.type.contextTypes;if(!r)return dn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ct(t){return t=t.childContextTypes,t!=null}function Ya(){_e(ht),_e(Je)}function _p(t,e,r){if(Je.current!==dn)throw Error(N(168));ge(Je,e),ge(ht,r)}function av(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(N(108,Kx(t)||"Unknown",i));return be({},r,n)}function Ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,Hn=Je.current,ge(Je,t),ge(ht,ht.current),!0}function xp(t,e,r){var n=t.stateNode;if(!n)throw Error(N(169));r?(t=av(t,e,Hn),n.__reactInternalMemoizedMergedChildContext=t,_e(ht),_e(Je),ge(Je,t)):_e(ht),ge(ht,r)}var Er=null,Fl=!1,Cu=!1;function lv(t){Er===null?Er=[t]:Er.push(t)}function dE(t){Fl=!0,lv(t)}function gn(){if(!Cu&&Er!==null){Cu=!0;var t=0,e=de;try{var r=Er;for(de=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Er=null,Fl=!1}catch(i){throw Er!==null&&(Er=Er.slice(t+1)),Ny(Fd,gn),i}finally{de=e,Cu=!1}}return null}var wi=[],Ti=0,qa=null,Qa=0,St=[],At=0,zn=null,wr=1,Tr="";function wn(t,e){wi[Ti++]=Qa,wi[Ti++]=qa,qa=t,Qa=e}function uv(t,e,r){St[At++]=wr,St[At++]=Tr,St[At++]=zn,zn=t;var n=wr;t=Tr;var i=32-jt(n)-1;n&=~(1<<i),r+=1;var s=32-jt(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,wr=1<<32-jt(e)+i|r<<i|n,Tr=s+t}else wr=1<<s|r<<i|n,Tr=t}function Wd(t){t.return!==null&&(wn(t,1),uv(t,1,0))}function Xd(t){for(;t===qa;)qa=wi[--Ti],wi[Ti]=null,Qa=wi[--Ti],wi[Ti]=null;for(;t===zn;)zn=St[--At],St[At]=null,Tr=St[--At],St[At]=null,wr=St[--At],St[At]=null}var vt=null,gt=null,Ee=!1,Ht=null;function hv(t,e){var r=bt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ep(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vt=t,gt=nn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=zn!==null?{id:wr,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=bt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,vt=t,gt=null,!0):!1;default:return!1}}function lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uc(t){if(Ee){var e=gt;if(e){var r=e;if(!Ep(t,e)){if(lc(t))throw Error(N(418));e=nn(r.nextSibling);var n=vt;e&&Ep(t,e)?hv(n,r):(t.flags=t.flags&-4097|2,Ee=!1,vt=t)}}else{if(lc(t))throw Error(N(418));t.flags=t.flags&-4097|2,Ee=!1,vt=t}}}function wp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function Uo(t){if(t!==vt)return!1;if(!Ee)return wp(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ic(t.type,t.memoizedProps)),e&&(e=gt)){if(lc(t))throw cv(),Error(N(418));for(;e;)hv(t,e),e=nn(e.nextSibling)}if(wp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){gt=nn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=vt?nn(t.stateNode.nextSibling):null;return!0}function cv(){for(var t=gt;t;)t=nn(t.nextSibling)}function Xi(){gt=vt=null,Ee=!1}function Yd(t){Ht===null?Ht=[t]:Ht.push(t)}var fE=Lr.ReactCurrentBatchConfig;function fs(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(N(309));var n=r.stateNode}if(!n)throw Error(N(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(N(284));if(!r._owner)throw Error(N(290,t))}return t}function Go(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function dv(t){function e(g,y){if(t){var m=g.deletions;m===null?(g.deletions=[y],g.flags|=16):m.push(y)}}function r(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=ln(g,y),g.index=0,g.sibling=null,g}function s(g,y,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<y?(g.flags|=2,y):m):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,m,x){return y===null||y.tag!==6?(y=ku(m,g.mode,x),y.return=g,y):(y=i(y,m),y.return=g,y)}function l(g,y,m,x){var E=m.type;return E===gi?h(g,y,m.props.children,x,m.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$r&&Tp(E)===y.type)?(x=i(y,m.props),x.ref=fs(g,y,m),x.return=g,x):(x=ba(m.type,m.key,m.props,null,g.mode,x),x.ref=fs(g,y,m),x.return=g,x)}function u(g,y,m,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==m.containerInfo||y.stateNode.implementation!==m.implementation?(y=Bu(m,g.mode,x),y.return=g,y):(y=i(y,m.children||[]),y.return=g,y)}function h(g,y,m,x,E){return y===null||y.tag!==7?(y=On(m,g.mode,x,E),y.return=g,y):(y=i(y,m),y.return=g,y)}function c(g,y,m){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ku(""+y,g.mode,m),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Io:return m=ba(y.type,y.key,y.props,null,g.mode,m),m.ref=fs(g,null,y),m.return=g,m;case mi:return y=Bu(y,g.mode,m),y.return=g,y;case $r:var x=y._init;return c(g,x(y._payload),m)}if(ws(y)||ls(y))return y=On(y,g.mode,m,null),y.return=g,y;Go(g,y)}return null}function d(g,y,m,x){var E=y!==null?y.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return E!==null?null:a(g,y,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Io:return m.key===E?l(g,y,m,x):null;case mi:return m.key===E?u(g,y,m,x):null;case $r:return E=m._init,d(g,y,E(m._payload),x)}if(ws(m)||ls(m))return E!==null?null:h(g,y,m,x,null);Go(g,m)}return null}function f(g,y,m,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,a(y,g,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Io:return g=g.get(x.key===null?m:x.key)||null,l(y,g,x,E);case mi:return g=g.get(x.key===null?m:x.key)||null,u(y,g,x,E);case $r:var A=x._init;return f(g,y,m,A(x._payload),E)}if(ws(x)||ls(x))return g=g.get(m)||null,h(y,g,x,E,null);Go(y,x)}return null}function p(g,y,m,x){for(var E=null,A=null,w=y,T=y=0,R=null;w!==null&&T<m.length;T++){w.index>T?(R=w,w=null):R=w.sibling;var I=d(g,w,m[T],x);if(I===null){w===null&&(w=R);break}t&&w&&I.alternate===null&&e(g,w),y=s(I,y,T),A===null?E=I:A.sibling=I,A=I,w=R}if(T===m.length)return r(g,w),Ee&&wn(g,T),E;if(w===null){for(;T<m.length;T++)w=c(g,m[T],x),w!==null&&(y=s(w,y,T),A===null?E=w:A.sibling=w,A=w);return Ee&&wn(g,T),E}for(w=n(g,w);T<m.length;T++)R=f(w,g,T,m[T],x),R!==null&&(t&&R.alternate!==null&&w.delete(R.key===null?T:R.key),y=s(R,y,T),A===null?E=R:A.sibling=R,A=R);return t&&w.forEach(function(q){return e(g,q)}),Ee&&wn(g,T),E}function v(g,y,m,x){var E=ls(m);if(typeof E!="function")throw Error(N(150));if(m=E.call(m),m==null)throw Error(N(151));for(var A=E=null,w=y,T=y=0,R=null,I=m.next();w!==null&&!I.done;T++,I=m.next()){w.index>T?(R=w,w=null):R=w.sibling;var q=d(g,w,I.value,x);if(q===null){w===null&&(w=R);break}t&&w&&q.alternate===null&&e(g,w),y=s(q,y,T),A===null?E=q:A.sibling=q,A=q,w=R}if(I.done)return r(g,w),Ee&&wn(g,T),E;if(w===null){for(;!I.done;T++,I=m.next())I=c(g,I.value,x),I!==null&&(y=s(I,y,T),A===null?E=I:A.sibling=I,A=I);return Ee&&wn(g,T),E}for(w=n(g,w);!I.done;T++,I=m.next())I=f(w,g,T,I.value,x),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?T:I.key),y=s(I,y,T),A===null?E=I:A.sibling=I,A=I);return t&&w.forEach(function(F){return e(g,F)}),Ee&&wn(g,T),E}function _(g,y,m,x){if(typeof m=="object"&&m!==null&&m.type===gi&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Io:e:{for(var E=m.key,A=y;A!==null;){if(A.key===E){if(E=m.type,E===gi){if(A.tag===7){r(g,A.sibling),y=i(A,m.props.children),y.return=g,g=y;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$r&&Tp(E)===A.type){r(g,A.sibling),y=i(A,m.props),y.ref=fs(g,A,m),y.return=g,g=y;break e}r(g,A);break}else e(g,A);A=A.sibling}m.type===gi?(y=On(m.props.children,g.mode,x,m.key),y.return=g,g=y):(x=ba(m.type,m.key,m.props,null,g.mode,x),x.ref=fs(g,y,m),x.return=g,g=x)}return o(g);case mi:e:{for(A=m.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===m.containerInfo&&y.stateNode.implementation===m.implementation){r(g,y.sibling),y=i(y,m.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else e(g,y);y=y.sibling}y=Bu(m,g.mode,x),y.return=g,g=y}return o(g);case $r:return A=m._init,_(g,y,A(m._payload),x)}if(ws(m))return p(g,y,m,x);if(ls(m))return v(g,y,m,x);Go(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,y!==null&&y.tag===6?(r(g,y.sibling),y=i(y,m),y.return=g,g=y):(r(g,y),y=ku(m,g.mode,x),y.return=g,g=y),o(g)):r(g,y)}return _}var Yi=dv(!0),fv=dv(!1),Za=mn(null),Ja=null,Si=null,Kd=null;function qd(){Kd=Si=Ja=null}function Qd(t){var e=Za.current;_e(Za),t._currentValue=e}function hc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ni(t,e){Ja=t,Kd=Si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lt=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(Kd!==t)if(t={context:t,memoizedValue:e,next:null},Si===null){if(Ja===null)throw Error(N(308));Si=t,Ja.dependencies={lanes:0,firstContext:t}}else Si=Si.next=t;return e}var Nn=null;function Zd(t){Nn===null?Nn=[t]:Nn.push(t)}function pv(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Zd(e)):(r.next=i.next,i.next=r),e.interleaved=r,Nr(t,n)}function Nr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var jr=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ue&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Nr(t,r)}return i=n.interleaved,i===null?(e.next=e,Zd(n)):(e.next=i.next,i.next=e),n.interleaved=e,Nr(t,r)}function xa(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ld(t,r)}}function Sp(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function el(t,e,r,n){var i=t.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,v=a;switch(d=e,f=r,v.tag){case 1:if(p=v.payload,typeof p=="function"){c=p.call(f,c,d);break e}c=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,d=typeof p=="function"?p.call(f,c,d):p,d==null)break e;c=be({},c,d);break e;case 2:jr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(h===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);jn|=o,t.lanes=o,t.memoizedState=c}}function Ap(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(N(191,i));i.call(n)}}}var Eo={},cr=mn(Eo),so=mn(Eo),oo=mn(Eo);function kn(t){if(t===Eo)throw Error(N(174));return t}function ef(t,e){switch(ge(oo,e),ge(so,t),ge(cr,Eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}_e(cr),ge(cr,e)}function Ki(){_e(cr),_e(so),_e(oo)}function gv(t){kn(oo.current);var e=kn(cr.current),r=jh(e,t.type);e!==r&&(ge(so,t),ge(cr,r))}function tf(t){so.current===t&&(_e(cr),_e(so))}var Te=mn(0);function tl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pu=[];function rf(){for(var t=0;t<Pu.length;t++)Pu[t]._workInProgressVersionPrimary=null;Pu.length=0}var Ea=Lr.ReactCurrentDispatcher,Iu=Lr.ReactCurrentBatchConfig,$n=0,Ae=null,Le=null,He=null,rl=!1,Us=!1,ao=0,pE=0;function qe(){throw Error(N(321))}function nf(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Yt(t[r],e[r]))return!1;return!0}function sf(t,e,r,n,i,s){if($n=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ea.current=t===null||t.memoizedState===null?vE:_E,t=r(n,i),Us){s=0;do{if(Us=!1,ao=0,25<=s)throw Error(N(301));s+=1,He=Le=null,e.updateQueue=null,Ea.current=xE,t=r(n,i)}while(Us)}if(Ea.current=nl,e=Le!==null&&Le.next!==null,$n=0,He=Le=Ae=null,rl=!1,e)throw Error(N(300));return t}function of(){var t=ao!==0;return ao=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ae.memoizedState=He=t:He=He.next=t,He}function Dt(){if(Le===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=He===null?Ae.memoizedState:He.next;if(e!==null)He=e,Le=t;else{if(t===null)throw Error(N(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},He===null?Ae.memoizedState=He=t:He=He.next=t}return He}function lo(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=Dt(),r=e.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=t;var n=Le,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if(($n&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=n):l=l.next=c,Ae.lanes|=h,jn|=h}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,Yt(n,e.memoizedState)||(lt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,jn|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Mu(t){var e=Dt(),r=e.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yt(s,e.memoizedState)||(lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function yv(){}function vv(t,e){var r=Ae,n=Dt(),i=e(),s=!Yt(n.memoizedState,i);if(s&&(n.memoizedState=i,lt=!0),n=n.queue,af(Ev.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||He!==null&&He.memoizedState.tag&1){if(r.flags|=2048,uo(9,xv.bind(null,r,n,i,e),void 0,null),$e===null)throw Error(N(349));$n&30||_v(r,e,i)}return i}function _v(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function xv(t,e,r,n){e.value=r,e.getSnapshot=n,wv(e)&&Tv(t)}function Ev(t,e,r){return r(function(){wv(e)&&Tv(t)})}function wv(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Yt(t,r)}catch{return!0}}function Tv(t){var e=Nr(t,1);e!==null&&Vt(e,t,1,-1)}function bp(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},e.queue=t,t=t.dispatch=yE.bind(null,Ae,t),[e.memoizedState,t]}function uo(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Sv(){return Dt().memoizedState}function wa(t,e,r,n){var i=ir();Ae.flags|=t,i.memoizedState=uo(1|e,r,void 0,n===void 0?null:n)}function Ll(t,e,r,n){var i=Dt();n=n===void 0?null:n;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,n!==null&&nf(n,o.deps)){i.memoizedState=uo(e,r,s,n);return}}Ae.flags|=t,i.memoizedState=uo(1|e,r,s,n)}function Cp(t,e){return wa(8390656,8,t,e)}function af(t,e){return Ll(2048,8,t,e)}function Av(t,e){return Ll(4,2,t,e)}function bv(t,e){return Ll(4,4,t,e)}function Cv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pv(t,e,r){return r=r!=null?r.concat([t]):null,Ll(4,4,Cv.bind(null,e,t),r)}function lf(){}function Iv(t,e){var r=Dt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nf(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Rv(t,e){var r=Dt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nf(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Mv(t,e,r){return $n&21?(Yt(r,e)||(r=Oy(),Ae.lanes|=r,jn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=r)}function mE(t,e){var r=de;de=r!==0&&4>r?r:4,t(!0);var n=Iu.transition;Iu.transition={};try{t(!1),e()}finally{de=r,Iu.transition=n}}function Dv(){return Dt().memoizedState}function gE(t,e,r){var n=an(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nv(t))kv(e,r);else if(r=pv(t,e,r,n),r!==null){var i=nt();Vt(r,t,n,i),Bv(r,e,n)}}function yE(t,e,r){var n=an(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nv(t))kv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Yt(a,o)){var l=e.interleaved;l===null?(i.next=i,Zd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=pv(t,e,i,n),r!==null&&(i=nt(),Vt(r,t,n,i),Bv(r,e,n))}}function Nv(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function kv(t,e){Us=rl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Bv(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ld(t,r)}}var nl={readContext:Mt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},vE={readContext:Mt,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:Cp,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,wa(4194308,4,Cv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return wa(4,2,t,e)},useMemo:function(t,e){var r=ir();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ir();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=gE.bind(null,Ae,t),[n.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:bp,useDebugValue:lf,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=bp(!1),e=t[0];return t=mE.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ae,i=ir();if(Ee){if(r===void 0)throw Error(N(407));r=r()}else{if(r=e(),$e===null)throw Error(N(349));$n&30||_v(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Cp(Ev.bind(null,n,s,t),[t]),n.flags|=2048,uo(9,xv.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ir(),e=$e.identifierPrefix;if(Ee){var r=Tr,n=wr;r=(n&~(1<<32-jt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ao++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=pE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_E={readContext:Mt,useCallback:Iv,useContext:Mt,useEffect:af,useImperativeHandle:Pv,useInsertionEffect:Av,useLayoutEffect:bv,useMemo:Rv,useReducer:Ru,useRef:Sv,useState:function(){return Ru(lo)},useDebugValue:lf,useDeferredValue:function(t){var e=Dt();return Mv(e,Le.memoizedState,t)},useTransition:function(){var t=Ru(lo)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:yv,useSyncExternalStore:vv,useId:Dv,unstable_isNewReconciler:!1},xE={readContext:Mt,useCallback:Iv,useContext:Mt,useEffect:af,useImperativeHandle:Pv,useInsertionEffect:Av,useLayoutEffect:bv,useMemo:Rv,useReducer:Mu,useRef:Sv,useState:function(){return Mu(lo)},useDebugValue:lf,useDeferredValue:function(t){var e=Dt();return Le===null?e.memoizedState=t:Mv(e,Le.memoizedState,t)},useTransition:function(){var t=Mu(lo)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:yv,useSyncExternalStore:vv,useId:Dv,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function cc(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:be({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ul={isMounted:function(t){return(t=t._reactInternals)?Zn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=nt(),i=an(t),s=Pr(n,i);s.payload=e,r!=null&&(s.callback=r),e=sn(t,s,i),e!==null&&(Vt(e,t,i,n),xa(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=nt(),i=an(t),s=Pr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=sn(t,s,i),e!==null&&(Vt(e,t,i,n),xa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=nt(),n=an(t),i=Pr(r,n);i.tag=2,e!=null&&(i.callback=e),e=sn(t,i,n),e!==null&&(Vt(e,t,n,r),xa(e,t,n))}};function Pp(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!to(r,n)||!to(i,s):!0}function Ov(t,e,r){var n=!1,i=dn,s=e.contextType;return typeof s=="object"&&s!==null?s=Mt(s):(i=ct(e)?Hn:Je.current,n=e.contextTypes,s=(n=n!=null)?Wi(t,i):dn),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ul,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ip(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ul.enqueueReplaceState(e,e.state,null)}function dc(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Jd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Mt(s):(s=ct(e)?Hn:Je.current,i.context=Wi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cc(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ul.enqueueReplaceState(i,i.state,null),el(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qi(t,e){try{var r="",n=e;do r+=Yx(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Du(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function fc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var EE=typeof WeakMap=="function"?WeakMap:Map;function Fv(t,e,r){r=Pr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){sl||(sl=!0,Tc=n),fc(t,e)},r}function Lv(t,e,r){r=Pr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){fc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){fc(t,e),typeof n!="function"&&(on===null?on=new Set([this]):on.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Rp(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new EE;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=BE.bind(null,t,e,r),e.then(t,t))}function Mp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dp(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Pr(-1,1),e.tag=2,sn(r,e,1))),r.lanes|=1),t)}var wE=Lr.ReactCurrentOwner,lt=!1;function tt(t,e,r,n){e.child=t===null?fv(e,null,r,n):Yi(e,t.child,r,n)}function Np(t,e,r,n,i){r=r.render;var s=e.ref;return Ni(e,i),n=sf(t,e,r,n,s,i),r=of(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(Ee&&r&&Wd(e),e.flags|=1,tt(t,e,n,i),e.child)}function kp(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!gf(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Uv(t,e,s,n,i)):(t=ba(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:to,r(o,n)&&t.ref===e.ref)return kr(t,e,i)}return e.flags|=1,t=ln(s,n),t.ref=e.ref,t.return=e,e.child=t}function Uv(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(to(s,n)&&t.ref===e.ref)if(lt=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(lt=!0);else return e.lanes=t.lanes,kr(t,e,i)}return pc(t,e,r,n,i)}function Gv(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(bi,mt),mt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(bi,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ge(bi,mt),mt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ge(bi,mt),mt|=n;return tt(t,e,i,r),e.child}function Hv(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function pc(t,e,r,n,i){var s=ct(r)?Hn:Je.current;return s=Wi(e,s),Ni(e,i),r=sf(t,e,r,n,s,i),n=of(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(Ee&&n&&Wd(e),e.flags|=1,tt(t,e,r,i),e.child)}function Bp(t,e,r,n,i){if(ct(r)){var s=!0;Ka(e)}else s=!1;if(Ni(e,i),e.stateNode===null)Ta(t,e),Ov(e,r,n),dc(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Mt(u):(u=ct(r)?Hn:Je.current,u=Wi(e,u));var h=r.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Ip(e,o,n,u),jr=!1;var d=e.memoizedState;o.state=d,el(e,n,o,i),l=e.memoizedState,a!==n||d!==l||ht.current||jr?(typeof h=="function"&&(cc(e,r,h,n),l=e.memoizedState),(a=jr||Pp(e,r,a,n,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,mv(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ut(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Mt(l):(l=ct(r)?Hn:Je.current,l=Wi(e,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&Ip(e,o,n,l),jr=!1,d=e.memoizedState,o.state=d,el(e,n,o,i);var p=e.memoizedState;a!==c||d!==p||ht.current||jr?(typeof f=="function"&&(cc(e,r,f,n),p=e.memoizedState),(u=jr||Pp(e,r,u,n,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return mc(t,e,r,n,s,i)}function mc(t,e,r,n,i,s){Hv(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&xp(e,r,!1),kr(t,e,s);n=e.stateNode,wE.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Yi(e,t.child,null,s),e.child=Yi(e,null,a,s)):tt(t,e,a,s),e.memoizedState=n.state,i&&xp(e,r,!0),e.child}function zv(t){var e=t.stateNode;e.pendingContext?_p(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_p(t,e.context,!1),ef(t,e.containerInfo)}function Op(t,e,r,n,i){return Xi(),Yd(i),e.flags|=256,tt(t,e,r,n),e.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function $v(t,e,r){var n=e.pendingProps,i=Te.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Te,i&1),t===null)return uc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zl(o,n,0,null),t=On(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yc(r),e.memoizedState=gc,t):uf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return TE(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=ln(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ln(a,s):(s=On(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?yc(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=gc,n}return s=t.child,t=s.sibling,n=ln(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function uf(t,e){return e=zl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ho(t,e,r,n){return n!==null&&Yd(n),Yi(e,t.child,null,r),t=uf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TE(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Du(Error(N(422))),Ho(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=zl({mode:"visible",children:n.children},i,0,null),s=On(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Yi(e,t.child,null,o),e.child.memoizedState=yc(o),e.memoizedState=gc,s);if(!(e.mode&1))return Ho(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(N(419)),n=Du(s,n,void 0),Ho(t,e,o,n)}if(a=(o&t.childLanes)!==0,lt||a){if(n=$e,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Nr(t,i),Vt(n,t,i,-1))}return mf(),n=Du(Error(N(421))),Ho(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=OE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gt=nn(i.nextSibling),vt=e,Ee=!0,Ht=null,t!==null&&(St[At++]=wr,St[At++]=Tr,St[At++]=zn,wr=t.id,Tr=t.overflow,zn=e),e=uf(e,n.children),e.flags|=4096,e)}function Fp(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hc(t.return,e,r)}function Nu(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function jv(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(tt(t,e,n.children,r),n=Te.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fp(t,r,e);else if(t.tag===19)Fp(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ge(Te,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&tl(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Nu(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tl(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Nu(e,!0,r,null,s);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ta(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),jn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,r=ln(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ln(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function SE(t,e,r){switch(e.tag){case 3:zv(e),Xi();break;case 5:gv(e);break;case 1:ct(e.type)&&Ka(e);break;case 4:ef(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ge(Za,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ge(Te,Te.current&1),e.flags|=128,null):r&e.child.childLanes?$v(t,e,r):(ge(Te,Te.current&1),t=kr(t,e,r),t!==null?t.sibling:null);ge(Te,Te.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return jv(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Te,Te.current),n)break;return null;case 22:case 23:return e.lanes=0,Gv(t,e,r)}return kr(t,e,r)}var Vv,vc,Wv,Xv;Vv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vc=function(){};Wv=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,kn(cr.current);var s=null;switch(r){case"input":i=Gh(t,i),n=Gh(t,n),s=[];break;case"select":i=be({},i,{value:void 0}),n=be({},n,{value:void 0}),s=[];break;case"textarea":i=$h(t,i),n=$h(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Xa)}Vh(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ys.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ys.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ye("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Xv=function(t,e,r,n){r!==n&&(e.flags|=4)};function ps(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function AE(t,e,r){var n=e.pendingProps;switch(Xd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(e),null;case 1:return ct(e.type)&&Ya(),Qe(e),null;case 3:return n=e.stateNode,Ki(),_e(ht),_e(Je),rf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(bc(Ht),Ht=null))),vc(t,e),Qe(e),null;case 5:tf(e);var i=kn(oo.current);if(r=e.type,t!==null&&e.stateNode!=null)Wv(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(N(166));return Qe(e),null}if(t=kn(cr.current),Uo(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[lr]=e,n[io]=s,t=(e.mode&1)!==0,r){case"dialog":ye("cancel",n),ye("close",n);break;case"iframe":case"object":case"embed":ye("load",n);break;case"video":case"audio":for(i=0;i<Ss.length;i++)ye(Ss[i],n);break;case"source":ye("error",n);break;case"img":case"image":case"link":ye("error",n),ye("load",n);break;case"details":ye("toggle",n);break;case"input":Wf(n,s),ye("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ye("invalid",n);break;case"textarea":Yf(n,s),ye("invalid",n)}Vh(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lo(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lo(n.textContent,a,t),i=["children",""+a]):Ys.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ye("scroll",n)}switch(r){case"input":Ro(n),Xf(n,s,!0);break;case"textarea":Ro(n),Kf(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Xa)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ey(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[lr]=e,t[io]=n,Vv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wh(r,n),r){case"dialog":ye("cancel",t),ye("close",t),i=n;break;case"iframe":case"object":case"embed":ye("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ss.length;i++)ye(Ss[i],t);i=n;break;case"source":ye("error",t),i=n;break;case"img":case"image":case"link":ye("error",t),ye("load",t),i=n;break;case"details":ye("toggle",t),i=n;break;case"input":Wf(t,n),i=Gh(t,n),ye("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=be({},n,{value:void 0}),ye("invalid",t);break;case"textarea":Yf(t,n),i=$h(t,n),ye("invalid",t);break;default:i=n}Vh(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Sy(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wy(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ks(t,l):typeof l=="number"&&Ks(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ys.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ye("scroll",t):l!=null&&Dd(t,s,l,o))}switch(r){case"input":Ro(t),Xf(t,n,!1);break;case"textarea":Ro(t),Kf(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ii(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ii(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qe(e),null;case 6:if(t&&e.stateNode!=null)Xv(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(N(166));if(r=kn(oo.current),kn(cr.current),Uo(e)){if(n=e.stateNode,r=e.memoizedProps,n[lr]=e,(s=n.nodeValue!==r)&&(t=vt,t!==null))switch(t.tag){case 3:Lo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lo(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lr]=e,e.stateNode=n}return Qe(e),null;case 13:if(_e(Te),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&gt!==null&&e.mode&1&&!(e.flags&128))cv(),Xi(),e.flags|=98560,s=!1;else if(s=Uo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(N(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));s[lr]=e}else Xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qe(e),s=!1}else Ht!==null&&(bc(Ht),Ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Ue===0&&(Ue=3):mf())),e.updateQueue!==null&&(e.flags|=4),Qe(e),null);case 4:return Ki(),vc(t,e),t===null&&ro(e.stateNode.containerInfo),Qe(e),null;case 10:return Qd(e.type._context),Qe(e),null;case 17:return ct(e.type)&&Ya(),Qe(e),null;case 19:if(_e(Te),s=e.memoizedState,s===null)return Qe(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ps(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tl(t),o!==null){for(e.flags|=128,ps(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ge(Te,Te.current&1|2),e.child}t=t.sibling}s.tail!==null&&De()>Qi&&(e.flags|=128,n=!0,ps(s,!1),e.lanes=4194304)}else{if(!n)if(t=tl(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ps(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ee)return Qe(e),null}else 2*De()-s.renderingStartTime>Qi&&r!==1073741824&&(e.flags|=128,n=!0,ps(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=De(),e.sibling=null,r=Te.current,ge(Te,n?r&1|2:r&1),e):(Qe(e),null);case 22:case 23:return pf(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?mt&1073741824&&(Qe(e),e.subtreeFlags&6&&(e.flags|=8192)):Qe(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function bE(t,e){switch(Xd(e),e.tag){case 1:return ct(e.type)&&Ya(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ki(),_e(ht),_e(Je),rf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tf(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return Ki(),null;case 10:return Qd(e.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var zo=!1,Ze=!1,CE=typeof WeakSet=="function"?WeakSet:Set,$=null;function Ai(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ie(t,e,n)}else r.current=null}function _c(t,e,r){try{r()}catch(n){Ie(t,e,n)}}var Lp=!1;function PE(t,e){if(rc=ja,t=Zy(),Vd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=t,d=null;t:for(;;){for(var f;c!==r||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(l=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===t)break t;if(d===r&&++u===i&&(a=o),d===s&&++h===n&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(nc={focusedElem:t,selectionRange:r},ja=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,_=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ut(e.type,v),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(x){Ie(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return p=Lp,Lp=!1,p}function Gs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_c(e,r,s)}i=i.next}while(i!==n)}}function Gl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function xc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Yv(t){var e=t.alternate;e!==null&&(t.alternate=null,Yv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[io],delete e[oc],delete e[hE],delete e[cE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kv(t){return t.tag===5||t.tag===3||t.tag===4}function Up(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ec(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xa));else if(n!==4&&(t=t.child,t!==null))for(Ec(t,e,r),t=t.sibling;t!==null;)Ec(t,e,r),t=t.sibling}function wc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(wc(t,e,r),t=t.sibling;t!==null;)wc(t,e,r),t=t.sibling}var We=null,Gt=!1;function Ur(t,e,r){for(r=r.child;r!==null;)qv(t,e,r),r=r.sibling}function qv(t,e,r){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(Dl,r)}catch{}switch(r.tag){case 5:Ze||Ai(r,e);case 6:var n=We,i=Gt;We=null,Ur(t,e,r),We=n,Gt=i,We!==null&&(Gt?(t=We,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):We.removeChild(r.stateNode));break;case 18:We!==null&&(Gt?(t=We,r=r.stateNode,t.nodeType===8?bu(t.parentNode,r):t.nodeType===1&&bu(t,r),Js(t)):bu(We,r.stateNode));break;case 4:n=We,i=Gt,We=r.stateNode.containerInfo,Gt=!0,Ur(t,e,r),We=n,Gt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_c(r,e,o),i=i.next}while(i!==n)}Ur(t,e,r);break;case 1:if(!Ze&&(Ai(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ie(r,e,a)}Ur(t,e,r);break;case 21:Ur(t,e,r);break;case 22:r.mode&1?(Ze=(n=Ze)||r.memoizedState!==null,Ur(t,e,r),Ze=n):Ur(t,e,r);break;default:Ur(t,e,r)}}function Gp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new CE),e.forEach(function(n){var i=FE.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function kt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:We=a.stateNode,Gt=!1;break e;case 3:We=a.stateNode.containerInfo,Gt=!0;break e;case 4:We=a.stateNode.containerInfo,Gt=!0;break e}a=a.return}if(We===null)throw Error(N(160));qv(s,o,i),We=null,Gt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ie(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qv(e,t),e=e.sibling}function Qv(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(e,t),Qt(t),n&4){try{Gs(3,t,t.return),Gl(3,t)}catch(v){Ie(t,t.return,v)}try{Gs(5,t,t.return)}catch(v){Ie(t,t.return,v)}}break;case 1:kt(e,t),Qt(t),n&512&&r!==null&&Ai(r,r.return);break;case 5:if(kt(e,t),Qt(t),n&512&&r!==null&&Ai(r,r.return),t.flags&32){var i=t.stateNode;try{Ks(i,"")}catch(v){Ie(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_y(i,s),Wh(a,o);var u=Wh(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?Sy(i,c):h==="dangerouslySetInnerHTML"?wy(i,c):h==="children"?Ks(i,c):Dd(i,h,c,u)}switch(a){case"input":Hh(i,s);break;case"textarea":xy(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ii(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ii(i,!!s.multiple,s.defaultValue,!0):Ii(i,!!s.multiple,s.multiple?[]:"",!1))}i[io]=s}catch(v){Ie(t,t.return,v)}}break;case 6:if(kt(e,t),Qt(t),n&4){if(t.stateNode===null)throw Error(N(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ie(t,t.return,v)}}break;case 3:if(kt(e,t),Qt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Js(e.containerInfo)}catch(v){Ie(t,t.return,v)}break;case 4:kt(e,t),Qt(t);break;case 13:kt(e,t),Qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(df=De())),n&4&&Gp(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Ze=(u=Ze)||h,kt(e,t),Ze=u):kt(e,t),Qt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(c=$=h;$!==null;){switch(d=$,f=d.child,d.tag){case 0:case 11:case 14:case 15:Gs(4,d,d.return);break;case 1:Ai(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Ie(n,r,v)}}break;case 5:Ai(d,d.return);break;case 22:if(d.memoizedState!==null){zp(c);continue}}f!==null?(f.return=d,$=f):zp(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ty("display",o))}catch(v){Ie(t,t.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){Ie(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:kt(e,t),Qt(t),n&4&&Gp(t);break;case 21:break;default:kt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Kv(r)){var n=r;break e}r=r.return}throw Error(N(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ks(i,""),n.flags&=-33);var s=Up(t);wc(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Up(t);Ec(t,a,o);break;default:throw Error(N(161))}}catch(l){Ie(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IE(t,e,r){$=t,Zv(t)}function Zv(t,e,r){for(var n=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||zo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ze;a=zo;var u=Ze;if(zo=o,(Ze=l)&&!u)for($=i;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?$p(i):l!==null?(l.return=o,$=l):$p(i);for(;s!==null;)$=s,Zv(s),s=s.sibling;$=i,zo=a,Ze=u}Hp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Hp(t)}}function Hp(t){for(;$!==null;){var e=$;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||Gl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ze)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ut(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ap(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ap(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Js(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ze||e.flags&512&&xc(e)}catch(d){Ie(e,e.return,d)}}if(e===t){$=null;break}if(r=e.sibling,r!==null){r.return=e.return,$=r;break}$=e.return}}function zp(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$=r;break}$=e.return}}function $p(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Gl(4,e)}catch(l){Ie(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Ie(e,i,l)}}var s=e.return;try{xc(e)}catch(l){Ie(e,s,l)}break;case 5:var o=e.return;try{xc(e)}catch(l){Ie(e,o,l)}}}catch(l){Ie(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var RE=Math.ceil,il=Lr.ReactCurrentDispatcher,hf=Lr.ReactCurrentOwner,It=Lr.ReactCurrentBatchConfig,ue=0,$e=null,Be=null,Ye=0,mt=0,bi=mn(0),Ue=0,ho=null,jn=0,Hl=0,cf=0,Hs=null,at=null,df=0,Qi=1/0,_r=null,sl=!1,Tc=null,on=null,$o=!1,qr=null,ol=0,zs=0,Sc=null,Sa=-1,Aa=0;function nt(){return ue&6?De():Sa!==-1?Sa:Sa=De()}function an(t){return t.mode&1?ue&2&&Ye!==0?Ye&-Ye:fE.transition!==null?(Aa===0&&(Aa=Oy()),Aa):(t=de,t!==0||(t=window.event,t=t===void 0?16:$y(t.type)),t):1}function Vt(t,e,r,n){if(50<zs)throw zs=0,Sc=null,Error(N(185));vo(t,r,n),(!(ue&2)||t!==$e)&&(t===$e&&(!(ue&2)&&(Hl|=r),Ue===4&&Xr(t,Ye)),dt(t,n),r===1&&ue===0&&!(e.mode&1)&&(Qi=De()+500,Fl&&gn()))}function dt(t,e){var r=t.callbackNode;f1(t,e);var n=$a(t,t===$e?Ye:0);if(n===0)r!==null&&Zf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Zf(r),e===1)t.tag===0?dE(jp.bind(null,t)):lv(jp.bind(null,t)),lE(function(){!(ue&6)&&gn()}),r=null;else{switch(Fy(n)){case 1:r=Fd;break;case 4:r=ky;break;case 16:r=za;break;case 536870912:r=By;break;default:r=za}r=o0(r,Jv.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Jv(t,e){if(Sa=-1,Aa=0,ue&6)throw Error(N(327));var r=t.callbackNode;if(ki()&&t.callbackNode!==r)return null;var n=$a(t,t===$e?Ye:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=al(t,n);else{e=n;var i=ue;ue|=2;var s=t0();($e!==t||Ye!==e)&&(_r=null,Qi=De()+500,Bn(t,e));do try{NE();break}catch(a){e0(t,a)}while(!0);qd(),il.current=s,ue=i,Be!==null?e=0:($e=null,Ye=0,e=Ue)}if(e!==0){if(e===2&&(i=Qh(t),i!==0&&(n=i,e=Ac(t,i))),e===1)throw r=ho,Bn(t,0),Xr(t,n),dt(t,De()),r;if(e===6)Xr(t,n);else{if(i=t.current.alternate,!(n&30)&&!ME(i)&&(e=al(t,n),e===2&&(s=Qh(t),s!==0&&(n=s,e=Ac(t,s))),e===1))throw r=ho,Bn(t,0),Xr(t,n),dt(t,De()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(N(345));case 2:Tn(t,at,_r);break;case 3:if(Xr(t,n),(n&130023424)===n&&(e=df+500-De(),10<e)){if($a(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sc(Tn.bind(null,t,at,_r),e);break}Tn(t,at,_r);break;case 4:if(Xr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-jt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=De()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*RE(n/1960))-n,10<n){t.timeoutHandle=sc(Tn.bind(null,t,at,_r),n);break}Tn(t,at,_r);break;case 5:Tn(t,at,_r);break;default:throw Error(N(329))}}}return dt(t,De()),t.callbackNode===r?Jv.bind(null,t):null}function Ac(t,e){var r=Hs;return t.current.memoizedState.isDehydrated&&(Bn(t,e).flags|=256),t=al(t,e),t!==2&&(e=at,at=r,e!==null&&bc(e)),t}function bc(t){at===null?at=t:at.push.apply(at,t)}function ME(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Yt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~cf,e&=~Hl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-jt(e),n=1<<r;t[r]=-1,e&=~n}}function jp(t){if(ue&6)throw Error(N(327));ki();var e=$a(t,0);if(!(e&1))return dt(t,De()),null;var r=al(t,e);if(t.tag!==0&&r===2){var n=Qh(t);n!==0&&(e=n,r=Ac(t,n))}if(r===1)throw r=ho,Bn(t,0),Xr(t,e),dt(t,De()),r;if(r===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Tn(t,at,_r),dt(t,De()),null}function ff(t,e){var r=ue;ue|=1;try{return t(e)}finally{ue=r,ue===0&&(Qi=De()+500,Fl&&gn())}}function Vn(t){qr!==null&&qr.tag===0&&!(ue&6)&&ki();var e=ue;ue|=1;var r=It.transition,n=de;try{if(It.transition=null,de=1,t)return t()}finally{de=n,It.transition=r,ue=e,!(ue&6)&&gn()}}function pf(){mt=bi.current,_e(bi)}function Bn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,aE(r)),Be!==null)for(r=Be.return;r!==null;){var n=r;switch(Xd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ya();break;case 3:Ki(),_e(ht),_e(Je),rf();break;case 5:tf(n);break;case 4:Ki();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:Qd(n.type._context);break;case 22:case 23:pf()}r=r.return}if($e=t,Be=t=ln(t.current,null),Ye=mt=e,Ue=0,ho=null,cf=Hl=jn=0,at=Hs=null,Nn!==null){for(e=0;e<Nn.length;e++)if(r=Nn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Nn=null}return t}function e0(t,e){do{var r=Be;try{if(qd(),Ea.current=nl,rl){for(var n=Ae.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}rl=!1}if($n=0,He=Le=Ae=null,Us=!1,ao=0,hf.current=null,r===null||r.return===null){Ue=1,ho=e,Be=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Ye,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Mp(o);if(f!==null){f.flags&=-257,Dp(f,o,a,s,e),f.mode&1&&Rp(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){Rp(s,u,e),mf();break e}l=Error(N(426))}}else if(Ee&&a.mode&1){var _=Mp(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Dp(_,o,a,s,e),Yd(qi(l,a));break e}}s=l=qi(l,a),Ue!==4&&(Ue=2),Hs===null?Hs=[s]:Hs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Fv(s,l,e);Sp(s,g);break e;case 1:a=l;var y=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(on===null||!on.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=Lv(s,a,e);Sp(s,x);break e}}s=s.return}while(s!==null)}n0(r)}catch(E){e=E,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(!0)}function t0(){var t=il.current;return il.current=nl,t===null?nl:t}function mf(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),$e===null||!(jn&268435455)&&!(Hl&268435455)||Xr($e,Ye)}function al(t,e){var r=ue;ue|=2;var n=t0();($e!==t||Ye!==e)&&(_r=null,Bn(t,e));do try{DE();break}catch(i){e0(t,i)}while(!0);if(qd(),ue=r,il.current=n,Be!==null)throw Error(N(261));return $e=null,Ye=0,Ue}function DE(){for(;Be!==null;)r0(Be)}function NE(){for(;Be!==null&&!i1();)r0(Be)}function r0(t){var e=s0(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?n0(t):Be=e,hf.current=null}function n0(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=bE(r,e),r!==null){r.flags&=32767,Be=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Be=null;return}}else if(r=AE(r,e,mt),r!==null){Be=r;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ue===0&&(Ue=5)}function Tn(t,e,r){var n=de,i=It.transition;try{It.transition=null,de=1,kE(t,e,r,n)}finally{It.transition=i,de=n}return null}function kE(t,e,r,n){do ki();while(qr!==null);if(ue&6)throw Error(N(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(p1(t,s),t===$e&&(Be=$e=null,Ye=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$o||($o=!0,o0(za,function(){return ki(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=It.transition,It.transition=null;var o=de;de=1;var a=ue;ue|=4,hf.current=null,PE(t,r),Qv(r,t),eE(nc),ja=!!rc,nc=rc=null,t.current=r,IE(r),s1(),ue=a,de=o,It.transition=s}else t.current=r;if($o&&($o=!1,qr=t,ol=i),s=t.pendingLanes,s===0&&(on=null),l1(r.stateNode),dt(t,De()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(sl)throw sl=!1,t=Tc,Tc=null,t;return ol&1&&t.tag!==0&&ki(),s=t.pendingLanes,s&1?t===Sc?zs++:(zs=0,Sc=t):zs=0,gn(),null}function ki(){if(qr!==null){var t=Fy(ol),e=It.transition,r=de;try{if(It.transition=null,de=16>t?16:t,qr===null)var n=!1;else{if(t=qr,qr=null,ol=0,ue&6)throw Error(N(331));var i=ue;for(ue|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:Gs(8,h,s)}var c=h.child;if(c!==null)c.return=h,$=c;else for(;$!==null;){h=$;var d=h.sibling,f=h.return;if(Yv(h),h===u){$=null;break}if(d!==null){d.return=f,$=d;break}$=f}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gs(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$=g;break e}$=s.return}}var y=t.current;for($=y;$!==null;){o=$;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,$=m;else e:for(o=y;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gl(9,a)}}catch(E){Ie(a,a.return,E)}if(a===o){$=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,$=x;break e}$=a.return}}if(ue=i,gn(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(Dl,t)}catch{}n=!0}return n}finally{de=r,It.transition=e}}return!1}function Vp(t,e,r){e=qi(r,e),e=Fv(t,e,1),t=sn(t,e,1),e=nt(),t!==null&&(vo(t,1,e),dt(t,e))}function Ie(t,e,r){if(t.tag===3)Vp(t,t,r);else for(;e!==null;){if(e.tag===3){Vp(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(on===null||!on.has(n))){t=qi(r,t),t=Lv(e,t,1),e=sn(e,t,1),t=nt(),e!==null&&(vo(e,1,t),dt(e,t));break}}e=e.return}}function BE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=nt(),t.pingedLanes|=t.suspendedLanes&r,$e===t&&(Ye&r)===r&&(Ue===4||Ue===3&&(Ye&130023424)===Ye&&500>De()-df?Bn(t,0):cf|=r),dt(t,e)}function i0(t,e){e===0&&(t.mode&1?(e=No,No<<=1,!(No&130023424)&&(No=4194304)):e=1);var r=nt();t=Nr(t,e),t!==null&&(vo(t,e,r),dt(t,r))}function OE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),i0(t,r)}function FE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(e),i0(t,r)}var s0;s0=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)lt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return lt=!1,SE(t,e,r);lt=!!(t.flags&131072)}else lt=!1,Ee&&e.flags&1048576&&uv(e,Qa,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ta(t,e),t=e.pendingProps;var i=Wi(e,Je.current);Ni(e,r),i=sf(null,e,n,t,i,r);var s=of();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ct(n)?(s=!0,Ka(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jd(e),i.updater=Ul,e.stateNode=i,i._reactInternals=e,dc(e,n,t,r),e=mc(null,e,n,!0,s,r)):(e.tag=0,Ee&&s&&Wd(e),tt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ta(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=UE(n),t=Ut(n,t),i){case 0:e=pc(null,e,n,t,r);break e;case 1:e=Bp(null,e,n,t,r);break e;case 11:e=Np(null,e,n,t,r);break e;case 14:e=kp(null,e,n,Ut(n.type,t),r);break e}throw Error(N(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ut(n,i),pc(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ut(n,i),Bp(t,e,n,i,r);case 3:e:{if(zv(e),t===null)throw Error(N(387));n=e.pendingProps,s=e.memoizedState,i=s.element,mv(t,e),el(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=qi(Error(N(423)),e),e=Op(t,e,n,r,i);break e}else if(n!==i){i=qi(Error(N(424)),e),e=Op(t,e,n,r,i);break e}else for(gt=nn(e.stateNode.containerInfo.firstChild),vt=e,Ee=!0,Ht=null,r=fv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xi(),n===i){e=kr(t,e,r);break e}tt(t,e,n,r)}e=e.child}return e;case 5:return gv(e),t===null&&uc(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ic(n,i)?o=null:s!==null&&ic(n,s)&&(e.flags|=32),Hv(t,e),tt(t,e,o,r),e.child;case 6:return t===null&&uc(e),null;case 13:return $v(t,e,r);case 4:return ef(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Yi(e,null,n,r):tt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ut(n,i),Np(t,e,n,i,r);case 7:return tt(t,e,e.pendingProps,r),e.child;case 8:return tt(t,e,e.pendingProps.children,r),e.child;case 12:return tt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ge(Za,n._currentValue),n._currentValue=o,s!==null)if(Yt(s.value,o)){if(s.children===i.children&&!ht.current){e=kr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Pr(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),hc(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(N(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),hc(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ni(e,r),i=Mt(i),n=n(i),e.flags|=1,tt(t,e,n,r),e.child;case 14:return n=e.type,i=Ut(n,e.pendingProps),i=Ut(n.type,i),kp(t,e,n,i,r);case 15:return Uv(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ut(n,i),Ta(t,e),e.tag=1,ct(n)?(t=!0,Ka(e)):t=!1,Ni(e,r),Ov(e,n,i),dc(e,n,i,r),mc(null,e,n,!0,t,r);case 19:return jv(t,e,r);case 22:return Gv(t,e,r)}throw Error(N(156,e.tag))};function o0(t,e){return Ny(t,e)}function LE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,r,n){return new LE(t,e,r,n)}function gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UE(t){if(typeof t=="function")return gf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kd)return 11;if(t===Bd)return 14}return 2}function ln(t,e){var r=t.alternate;return r===null?(r=bt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ba(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")gf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gi:return On(r.children,i,s,e);case Nd:o=8,i|=8;break;case Oh:return t=bt(12,r,e,i|2),t.elementType=Oh,t.lanes=s,t;case Fh:return t=bt(13,r,e,i),t.elementType=Fh,t.lanes=s,t;case Lh:return t=bt(19,r,e,i),t.elementType=Lh,t.lanes=s,t;case gy:return zl(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case py:o=10;break e;case my:o=9;break e;case kd:o=11;break e;case Bd:o=14;break e;case $r:o=16,n=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=bt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function On(t,e,r,n){return t=bt(7,t,n,e),t.lanes=r,t}function zl(t,e,r,n){return t=bt(22,t,n,e),t.elementType=gy,t.lanes=r,t.stateNode={isHidden:!1},t}function ku(t,e,r){return t=bt(6,t,null,e),t.lanes=r,t}function Bu(t,e,r){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GE(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yf(t,e,r,n,i,s,o,a,l){return t=new GE(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(s),t}function HE(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function a0(t){if(!t)return dn;t=t._reactInternals;e:{if(Zn(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var r=t.type;if(ct(r))return av(t,r,e)}return e}function l0(t,e,r,n,i,s,o,a,l){return t=yf(r,n,!0,t,i,s,o,a,l),t.context=a0(null),r=t.current,n=nt(),i=an(r),s=Pr(n,i),s.callback=e??null,sn(r,s,i),t.current.lanes=i,vo(t,i,n),dt(t,n),t}function $l(t,e,r,n){var i=e.current,s=nt(),o=an(i);return r=a0(r),e.context===null?e.context=r:e.pendingContext=r,e=Pr(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=sn(i,e,o),t!==null&&(Vt(t,i,o,s),xa(t,i,o)),o}function ll(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vf(t,e){Wp(t,e),(t=t.alternate)&&Wp(t,e)}function zE(){return null}var u0=typeof reportError=="function"?reportError:function(t){console.error(t)};function _f(t){this._internalRoot=t}jl.prototype.render=_f.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));$l(t,e,null,null)};jl.prototype.unmount=_f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vn(function(){$l(null,t,null,null)}),e[Dr]=null}};function jl(t){this._internalRoot=t}jl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gy();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Wr.length&&e!==0&&e<Wr[r].priority;r++);Wr.splice(r,0,t),r===0&&zy(t)}};function xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xp(){}function $E(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=ll(o);s.call(u)}}var o=l0(e,n,t,0,null,!1,!1,"",Xp);return t._reactRootContainer=o,t[Dr]=o.current,ro(t.nodeType===8?t.parentNode:t),Vn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=ll(l);a.call(u)}}var l=yf(t,0,!1,null,null,!1,!1,"",Xp);return t._reactRootContainer=l,t[Dr]=l.current,ro(t.nodeType===8?t.parentNode:t),Vn(function(){$l(e,l,r,n)}),l}function Wl(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ll(o);a.call(l)}}$l(e,o,t,i)}else o=$E(r,e,t,i,n);return ll(o)}Ly=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ts(e.pendingLanes);r!==0&&(Ld(e,r|1),dt(e,De()),!(ue&6)&&(Qi=De()+500,gn()))}break;case 13:Vn(function(){var n=Nr(t,1);if(n!==null){var i=nt();Vt(n,t,1,i)}}),vf(t,1)}};Ud=function(t){if(t.tag===13){var e=Nr(t,134217728);if(e!==null){var r=nt();Vt(e,t,134217728,r)}vf(t,134217728)}};Uy=function(t){if(t.tag===13){var e=an(t),r=Nr(t,e);if(r!==null){var n=nt();Vt(r,t,e,n)}vf(t,e)}};Gy=function(){return de};Hy=function(t,e){var r=de;try{return de=t,e()}finally{de=r}};Yh=function(t,e,r){switch(e){case"input":if(Hh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Ol(n);if(!i)throw Error(N(90));vy(n),Hh(n,i)}}}break;case"textarea":xy(t,r);break;case"select":e=r.value,e!=null&&Ii(t,!!r.multiple,e,!1)}};Cy=ff;Py=Vn;var jE={usingClientEntryPoint:!1,Events:[xo,xi,Ol,Ay,by,ff]},ms={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VE={bundleType:ms.bundleType,version:ms.version,rendererPackageName:ms.rendererPackageName,rendererConfig:ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=My(t),t===null?null:t.stateNode},findFiberByHostInstance:ms.findFiberByHostInstance||zE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jo.isDisabled&&jo.supportsFiber)try{Dl=jo.inject(VE),hr=jo}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE;xt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xf(e))throw Error(N(200));return HE(t,e,null,r)};xt.createRoot=function(t,e){if(!xf(t))throw Error(N(299));var r=!1,n="",i=u0;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yf(t,1,!1,null,null,r,!1,n,i),t[Dr]=e.current,ro(t.nodeType===8?t.parentNode:t),new _f(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=My(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Vn(t)};xt.hydrate=function(t,e,r){if(!Vl(e))throw Error(N(200));return Wl(null,t,e,!0,r)};xt.hydrateRoot=function(t,e,r){if(!xf(t))throw Error(N(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=u0;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=l0(e,null,t,1,r??null,i,!1,s,o),t[Dr]=e.current,ro(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new jl(e)};xt.render=function(t,e,r){if(!Vl(e))throw Error(N(200));return Wl(null,t,e,!1,r)};xt.unmountComponentAtNode=function(t){if(!Vl(t))throw Error(N(40));return t._reactRootContainer?(Vn(function(){Wl(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};xt.unstable_batchedUpdates=ff;xt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Vl(r))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Wl(t,e,r,!1,n)};xt.version="18.3.1-next-f1338f8080-20240426";function h0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h0)}catch(t){console.error(t)}}h0(),hy.exports=xt;var WE=hy.exports,Yp=WE;kh.createRoot=Yp.createRoot,kh.hydrateRoot=Yp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ul.apply(this,arguments)}var Qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qr||(Qr={}));const Kp="popstate";function XE(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return Cc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:d0(i)}return KE(e,r,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function c0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YE(){return Math.random().toString(36).substr(2,8)}function qp(t,e){return{usr:t.state,key:t.key,idx:e}}function Cc(t,e,r,n){return r===void 0&&(r=null),ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xl(e):e,{state:r,key:e&&e.key||n||YE()})}function d0(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function KE(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Qr.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(ul({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function c(){a=Qr.Pop;let _=h(),g=_==null?null:_-u;u=_,l&&l({action:a,location:v.location,delta:g})}function d(_,g){a=Qr.Push;let y=Cc(v.location,_,g);u=h()+1;let m=qp(y,u),x=v.createHref(y);try{o.pushState(m,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(x)}s&&l&&l({action:a,location:v.location,delta:1})}function f(_,g){a=Qr.Replace;let y=Cc(v.location,_,g);u=h();let m=qp(y,u),x=v.createHref(y);o.replaceState(m,"",x),s&&l&&l({action:a,location:v.location,delta:0})}function p(_){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof _=="string"?_:d0(_);return y=y.replace(/ $/,"%20"),ft(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Kp,c),l=_,()=>{i.removeEventListener(Kp,c),l=null}},createHref(_){return e(i,_)},createURL:p,encodeLocation(_){let g=p(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(_){return o.go(_)}};return v}var Qp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qp||(Qp={}));function qE(t,e,r){return r===void 0&&(r="/"),QE(t,e,r)}function QE(t,e,r,n){let i=typeof e=="string"?Xl(e):e,s=m0(i.pathname||"/",r);if(s==null)return null;let o=f0(t);ZE(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=hw(s);a=aw(o[l],u)}return a}function f0(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Bi([n,l.relativePath]),h=r.concat(l);s.children&&s.children.length>0&&(ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),f0(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:sw(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of p0(s.path))i(s,o,l)}),e}function p0(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=p0(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZE(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ow(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const JE=/^:[\w-]+$/,ew=3,tw=2,rw=1,nw=10,iw=-2,Zp=t=>t==="*";function sw(t,e){let r=t.split("/"),n=r.length;return r.some(Zp)&&(n+=iw),e&&(n+=tw),r.filter(i=>!Zp(i)).reduce((i,s)=>i+(JE.test(s)?ew:s===""?rw:nw),n)}function ow(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function aw(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",c=lw({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),d=l.route;if(!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:Bi([s,c.pathname]),pathnameBase:cw(Bi([s,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(s=Bi([s,c.pathnameBase]))}return o}function lw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=uw(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,h,c)=>{let{paramName:d,isOptional:f}=h;if(d==="*"){let v=a[c]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[c];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function uw(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),c0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function hw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return c0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function m0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Bi=t=>t.join("/").replace(/\/\/+/g,"/"),cw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function dw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const g0=["post","put","patch","delete"];new Set(g0);const fw=["get",...g0];new Set(fw);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hl.apply(this,arguments)}const pw=D.createContext(null),mw=D.createContext(null),y0=D.createContext(null),Yl=D.createContext(null),Kl=D.createContext({outlet:null,matches:[],isDataRoute:!1}),v0=D.createContext(null);function Ef(){return D.useContext(Yl)!=null}function gw(){return Ef()||ft(!1),D.useContext(Yl).location}function yw(t,e){return vw(t,e)}function vw(t,e,r,n){Ef()||ft(!1);let{navigator:i}=D.useContext(y0),{matches:s}=D.useContext(Kl),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=gw(),h;if(e){var c;let _=typeof e=="string"?Xl(e):e;l==="/"||(c=_.pathname)!=null&&c.startsWith(l)||ft(!1),h=_}else h=u;let d=h.pathname||"/",f=d;if(l!=="/"){let _=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=qE(t,{pathname:f}),v=Tw(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Bi([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Bi([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,r,n);return e&&v?D.createElement(Yl.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qr.Pop}},v):v}function _w(){let t=Cw(),e=dw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),r?D.createElement("pre",{style:i},r):null,null)}const xw=D.createElement(_w,null);class Ew extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?D.createElement(Kl.Provider,{value:this.props.routeContext},D.createElement(v0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ww(t){let{routeContext:e,match:r,children:n}=t,i=D.useContext(pw);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),D.createElement(Kl.Provider,{value:e},n)}function Tw(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);h>=0||ft(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let c=o[h];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=h),c.route.id){let{loaderData:d,errors:f}=r,p=c.route.loader&&d[c.route.id]===void 0&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,c,d)=>{let f,p=!1,v=null,_=null;r&&(f=a&&c.route.id?a[c.route.id]:void 0,v=c.route.errorElement||xw,l&&(u<0&&d===0?(Pw("route-fallback"),p=!0,_=null):u===d&&(p=!0,_=c.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),y=()=>{let m;return f?m=v:p?m=_:c.route.Component?m=D.createElement(c.route.Component,null):c.route.element?m=c.route.element:m=h,D.createElement(ww,{match:c,routeContext:{outlet:h,matches:g,isDataRoute:r!=null},children:m})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?D.createElement(Ew,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var _0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_0||{});function Sw(t){let e=D.useContext(mw);return e||ft(!1),e}function Aw(t){let e=D.useContext(Kl);return e||ft(!1),e}function bw(t){let e=Aw(),r=e.matches[e.matches.length-1];return r.route.id||ft(!1),r.route.id}function Cw(){var t;let e=D.useContext(v0),r=Sw(_0.UseRouteError),n=bw();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}const Jp={};function Pw(t,e,r){Jp[t]||(Jp[t]=!0)}function Iw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Pc(t){ft(!1)}function Rw(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Qr.Pop,navigator:s,static:o=!1,future:a}=t;Ef()&&ft(!1);let l=e.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:l,navigator:s,static:o,future:hl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=Xl(n));let{pathname:h="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,v=D.useMemo(()=>{let _=m0(h,l);return _==null?null:{location:{pathname:_,search:c,hash:d,state:f,key:p},navigationType:i}},[l,h,c,d,f,p,i]);return v==null?null:D.createElement(y0.Provider,{value:u},D.createElement(Yl.Provider,{children:r,value:v}))}function Mw(t){let{children:e,location:r}=t;return yw(Ic(e),r)}new Promise(()=>{});function Ic(t,e){e===void 0&&(e=[]);let r=[];return D.Children.forEach(t,(n,i)=>{if(!D.isValidElement(n))return;let s=[...e,i];if(n.type===D.Fragment){r.push.apply(r,Ic(n.props.children,s));return}n.type!==Pc&&ft(!1),!n.props.index||!n.props.children||ft(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ic(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Dw="6";try{window.__reactRouterVersion=Dw}catch{}const Nw="startTransition",em=Bx[Nw];function kw(t){let{basename:e,children:r,future:n,window:i}=t,s=D.useRef();s.current==null&&(s.current=XE({window:i,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=D.useCallback(c=>{u&&em?em(()=>l(c)):l(c)},[l,u]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>Iw(n),[n]),D.createElement(Rw,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}var tm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tm||(tm={}));var rm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rm||(rm={}));function Bw(){const[t,e]=D.useState(""),[r,n]=D.useState(""),[i,s]=D.useState(!1),o=async()=>{if(!r.trim()){alert("  (1~10)");return}s(!0),setTimeout(()=>{s(!1),console.log(" :",r)},500)},a=async()=>{if(!t.trim()){alert("  (6)");return}if(!r.trim()){alert("  (1~10)");return}s(!0),setTimeout(()=>{s(!1),console.log(" :",t.toUpperCase(),r)},500)},l=u=>{const h=u.target.value.toUpperCase().slice(0,6);e(h)};return G.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-6 bg-gradient-to-b from-purple-50 to-blue-50",children:[G.jsxs("div",{className:"mb-12 text-center",children:[G.jsx("h1",{className:"text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"PolyPang"}),G.jsx("p",{className:"mt-2 text-sm text-gray-600",children:" !  "})]}),G.jsxs("div",{className:"w-full max-w-sm mb-6",children:[G.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:""}),G.jsx("input",{type:"text",className:"w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-colors",placeholder:"  (1~10)",value:r,onChange:u=>n(u.target.value.slice(0,10)),maxLength:10,disabled:i})]}),G.jsx("button",{className:"w-full max-w-sm px-6 py-4 mb-6 text-lg font-bold text-white bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",onClick:o,disabled:i||!r.trim(),children:i?" ...":" "}),G.jsxs("div",{className:"flex items-center w-full max-w-sm mb-6",children:[G.jsx("div",{className:"flex-1 border-t border-gray-300"}),G.jsx("span",{className:"px-3 text-sm text-gray-500",children:""}),G.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),G.jsxs("div",{className:"w-full max-w-sm mb-3",children:[G.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:""}),G.jsxs("div",{className:"flex gap-2",children:[G.jsx("input",{type:"text",className:"flex-1 px-4 py-3 text-lg font-mono tracking-widest text-center uppercase border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-colors",placeholder:"ABC123",value:t,onChange:l,maxLength:6,disabled:i}),G.jsx("button",{className:"px-6 py-3 text-lg font-bold text-purple-600 border-2 border-purple-600 rounded-lg hover:bg-purple-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",onClick:a,disabled:i||!t.trim()||!r.trim()||t.length<6,children:""})]})]}),G.jsxs("div",{className:"absolute bottom-4 text-xs text-gray-400 space-y-1",children:[G.jsx("div",{children:"v0.1.0 MVP  Vite + React + TypeScript + PixiJS"}),G.jsx("div",{children:G.jsx("a",{href:"/arena-test",className:"text-purple-400 hover:text-purple-300 underline",children:" Arena   "})})]})]})}var Jn=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Jn||{}),x0=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(x0||{}),Rc=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Rc||{}),Q=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Q||{}),ur=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(ur||{}),B=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(B||{}),Oi=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Oi||{}),K=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(K||{}),H=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(H||{}),Sr=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Sr||{}),un=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(un||{}),pr=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(pr||{}),ut=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(ut||{}),or=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(or||{}),wf=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(wf||{}),Ct=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Ct||{}),Fe=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Fe||{}),ke=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(ke||{}),dr=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(dr||{});const Ow={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},z={ADAPTER:Ow,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Ou=/iPhone/i,nm=/iPod/i,im=/iPad/i,sm=/\biOS-universal(?:.+)Mac\b/i,Fu=/\bAndroid(?:.+)Mobile\b/i,om=/Android/i,ni=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Vo=/Silk/i,yr=/Windows Phone/i,am=/\bWindows(?:.+)ARM\b/i,lm=/BlackBerry/i,um=/BB10/i,hm=/Opera Mini/i,cm=/\b(CriOS|Chrome)(?:.+)Mobile/i,dm=/Mobile(?:.+)Firefox\b/i,fm=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Fw(t){return function(e){return e.test(t)}}function pm(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=Fw(r),s={apple:{phone:i(Ou)&&!i(yr),ipod:i(nm),tablet:!i(Ou)&&(i(im)||fm(e))&&!i(yr),universal:i(sm),device:(i(Ou)||i(nm)||i(im)||i(sm)||fm(e))&&!i(yr)},amazon:{phone:i(ni),tablet:!i(ni)&&i(Vo),device:i(ni)||i(Vo)},android:{phone:!i(yr)&&i(ni)||!i(yr)&&i(Fu),tablet:!i(yr)&&!i(ni)&&!i(Fu)&&(i(Vo)||i(om)),device:!i(yr)&&(i(ni)||i(Vo)||i(Fu)||i(om))||i(/\bokhttp\b/i)},windows:{phone:i(yr),tablet:i(am),device:i(yr)||i(am)},other:{blackberry:i(lm),blackberry10:i(um),opera:i(hm),firefox:i(dm),chrome:i(cm),device:i(lm)||i(um)||i(hm)||i(dm)||i(cm)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Lw=pm.default??pm,Ar=Lw(globalThis.navigator);z.RETINA_PREFIX=/@([0-9\.]+)x/;z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var E0={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new i(h,c||l,d),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)e.call(h,c)&&u.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=r?r+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(u){var h=r?r+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,p){var v=r?r+u:u;if(!this._events[v])return!1;var _=this._events[v],g=arguments.length,y,m;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),g){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,c),!0;case 4:return _.fn.call(_.context,h,c,d),!0;case 5:return _.fn.call(_.context,h,c,d,f),!0;case 6:return _.fn.call(_.context,h,c,d,f,p),!0}for(m=1,y=new Array(g-1);m<g;m++)y[m-1]=arguments[m];_.fn.apply(_.context,y)}else{var x=_.length,E;for(m=0;m<x;m++)switch(_[m].once&&this.removeListener(u,_[m].fn,void 0,!0),g){case 1:_[m].fn.call(_[m].context);break;case 2:_[m].fn.call(_[m].context,h);break;case 3:_[m].fn.call(_[m].context,h,c);break;case 4:_[m].fn.call(_[m].context,h,c,d);break;default:if(!y)for(E=1,y=new Array(g-1);E<g;E++)y[E-1]=arguments[E];_[m].fn.apply(_[m].context,y)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=r?r+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var v=0,_=[],g=p.length;v<g;v++)(p[v].fn!==h||d&&!p[v].once||c&&p[v].context!==c)&&_.push(p[v]);_.length?this._events[f]=_.length===1?_[0]:_:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(E0);var Uw=E0.exports;const wo=Ad(Uw);var Tf={exports:{}};Tf.exports=ql;Tf.exports.default=ql;function ql(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,s=w0(t,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(n&&(s=jw(t,e,s,r)),t.length>80*r){a=u=t[0],l=h=t[1];for(var p=r;p<i;p+=r)c=t[p],d=t[p+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return co(s,o,r,a,l,f,0),o}function w0(t,e,r,n,i){var s,o;if(i===Nc(t,e,r,n)>0)for(s=e;s<r;s+=n)o=mm(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=mm(s,t[s],t[s+1],o);return o&&Ql(o,o.next)&&(po(o),o=o.next),o}function Wn(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Ql(r,r.next)||Se(r.prev,r,r.next)===0)){if(po(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function co(t,e,r,n,i,s,o){if(t){!o&&s&&Kw(t,n,i,s);for(var a=t,l,u;t.prev!==t.next;){if(l=t.prev,u=t.next,s?Hw(t,n,i,s):Gw(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(u.i/r|0),po(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=zw(Wn(t),e,r),co(t,e,r,n,i,s,2)):o===2&&$w(t,e,r,n,i,s):co(Wn(t),e,r,n,i,s,1);break}}}}function Gw(t){var e=t.prev,r=t,n=t.next;if(Se(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,a=e.y,l=r.y,u=n.y,h=i<s?i<o?i:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&Ci(i,a,s,l,o,u,p.x,p.y)&&Se(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Hw(t,e,r,n){var i=t.prev,s=t,o=t.next;if(Se(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,h=i.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,v=a>l?a>u?a:u:l>u?l:u,_=h>c?h>d?h:d:c>d?c:d,g=Mc(f,p,e,r,n),y=Mc(v,_,e,r,n),m=t.prevZ,x=t.nextZ;m&&m.z>=g&&x&&x.z<=y;){if(m.x>=f&&m.x<=v&&m.y>=p&&m.y<=_&&m!==i&&m!==o&&Ci(a,h,l,c,u,d,m.x,m.y)&&Se(m.prev,m,m.next)>=0||(m=m.prevZ,x.x>=f&&x.x<=v&&x.y>=p&&x.y<=_&&x!==i&&x!==o&&Ci(a,h,l,c,u,d,x.x,x.y)&&Se(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;m&&m.z>=g;){if(m.x>=f&&m.x<=v&&m.y>=p&&m.y<=_&&m!==i&&m!==o&&Ci(a,h,l,c,u,d,m.x,m.y)&&Se(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=v&&x.y>=p&&x.y<=_&&x!==i&&x!==o&&Ci(a,h,l,c,u,d,x.x,x.y)&&Se(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function zw(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!Ql(i,s)&&T0(i,n,n.next,s)&&fo(i,s)&&fo(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),po(n),po(n.next),n=t=s),n=n.next}while(n!==t);return Wn(n)}function $w(t,e,r,n,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Zw(o,a)){var l=S0(o,a);o=Wn(o,o.next),l=Wn(l,l.next),co(o,e,r,n,i,s,0),co(l,e,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function jw(t,e,r,n){var i=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:t.length,u=w0(t,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(Qw(u));for(i.sort(Vw),s=0;s<i.length;s++)r=Ww(i[s],r);return r}function Vw(t,e){return t.x-e.x}function Ww(t,e){var r=Xw(t,e);if(!r)return e;var n=S0(r,t);return Wn(n,n.next),Wn(r,r.next)}function Xw(t,e){var r=e,n=t.x,i=t.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==e);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;r=o;do n>=r.x&&r.x>=u&&n!==r.x&&Ci(i<h?n:s,i,u,h,i<h?s:n,i,r.x,r.y)&&(d=Math.abs(i-r.y)/(n-r.x),fo(r,t)&&(d<c||d===c&&(r.x>o.x||r.x===o.x&&Yw(o,r)))&&(o=r,c=d)),r=r.next;while(r!==l);return o}function Yw(t,e){return Se(t.prev,t,e.prev)<0&&Se(e.next,t,t.next)<0}function Kw(t,e,r,n){var i=t;do i.z===0&&(i.z=Mc(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,qw(i)}function qw(t){var e,r,n,i,s,o,a,l,u=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,u*=2}while(o>1);return t}function Mc(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Qw(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Ci(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function Zw(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Jw(t,e)&&(fo(t,e)&&fo(e,t)&&eT(t,e)&&(Se(t.prev,t,e.prev)||Se(t,e.prev,e))||Ql(t,e)&&Se(t.prev,t,t.next)>0&&Se(e.prev,e,e.next)>0)}function Se(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Ql(t,e){return t.x===e.x&&t.y===e.y}function T0(t,e,r,n){var i=Xo(Se(t,e,r)),s=Xo(Se(t,e,n)),o=Xo(Se(r,n,t)),a=Xo(Se(r,n,e));return!!(i!==s&&o!==a||i===0&&Wo(t,r,e)||s===0&&Wo(t,n,e)||o===0&&Wo(r,t,n)||a===0&&Wo(r,e,n))}function Wo(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Xo(t){return t>0?1:t<0?-1:0}function Jw(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&T0(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function fo(t,e){return Se(t.prev,t,t.next)<0?Se(t,e,t.next)>=0&&Se(t,t.prev,e)>=0:Se(t,e,t.prev)<0||Se(t,t.next,e)<0}function eT(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function S0(t,e){var r=new Dc(t.i,t.x,t.y),n=new Dc(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function mm(t,e,r,n){var i=new Dc(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function po(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dc(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}ql.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(Nc(t,0,s,r));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*r,h=a<l-1?e[a+1]*r:t.length;o-=Math.abs(Nc(t,u,h,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Nc(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}ql.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var tT=Tf.exports;const rT=Ad(tT);var cl={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */cl.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof Ns=="object"&&Ns;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,p=128,v="-",_=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-u,E=Math.floor,A=String.fromCharCode,w;function T(b){throw new RangeError(m[b])}function R(b,P){for(var j=b.length,te=[];j--;)te[j]=P(b[j]);return te}function I(b,P){var j=b.split("@"),te="";j.length>1&&(te=j[0]+"@",b=j[1]),b=b.replace(y,".");var re=b.split("."),me=R(re,P).join(".");return te+me}function q(b){for(var P=[],j=0,te=b.length,re,me;j<te;)re=b.charCodeAt(j++),re>=55296&&re<=56319&&j<te?(me=b.charCodeAt(j++),(me&64512)==56320?P.push(((re&1023)<<10)+(me&1023)+65536):(P.push(re),j--)):P.push(re);return P}function F(b){return R(b,function(P){var j="";return P>65535&&(P-=65536,j+=A(P>>>10&1023|55296),P=56320|P&1023),j+=A(P),j}).join("")}function S(b){return b-48<10?b-22:b-65<26?b-65:b-97<26?b-97:l}function M(b,P){return b+22+75*(b<26)-((P!=0)<<5)}function O(b,P,j){var te=0;for(b=j?E(b/d):b>>1,b+=E(b/P);b>x*h>>1;te+=l)b=E(b/x);return E(te+(x+1)*b/(b+c))}function V(b){var P=[],j=b.length,te,re=0,me=p,he=f,fe,Z,ce,Ne,ne,le,pe,et,Re;for(fe=b.lastIndexOf(v),fe<0&&(fe=0),Z=0;Z<fe;++Z)b.charCodeAt(Z)>=128&&T("not-basic"),P.push(b.charCodeAt(Z));for(ce=fe>0?fe+1:0;ce<j;){for(Ne=re,ne=1,le=l;ce>=j&&T("invalid-input"),pe=S(b.charCodeAt(ce++)),(pe>=l||pe>E((a-re)/ne))&&T("overflow"),re+=pe*ne,et=le<=he?u:le>=he+h?h:le-he,!(pe<et);le+=l)Re=l-et,ne>E(a/Re)&&T("overflow"),ne*=Re;te=P.length+1,he=O(re-Ne,te,Ne==0),E(re/te)>a-me&&T("overflow"),me+=E(re/te),re%=te,P.splice(re++,0,me)}return F(P)}function L(b){var P,j,te,re,me,he,fe,Z,ce,Ne,ne,le=[],pe,et,Re,Nt;for(b=q(b),pe=b.length,P=p,j=0,me=f,he=0;he<pe;++he)ne=b[he],ne<128&&le.push(A(ne));for(te=re=le.length,re&&le.push(v);te<pe;){for(fe=a,he=0;he<pe;++he)ne=b[he],ne>=P&&ne<fe&&(fe=ne);for(et=te+1,fe-P>E((a-j)/et)&&T("overflow"),j+=(fe-P)*et,P=fe,he=0;he<pe;++he)if(ne=b[he],ne<P&&++j>a&&T("overflow"),ne==P){for(Z=j,ce=l;Ne=ce<=me?u:ce>=me+h?h:ce-me,!(Z<Ne);ce+=l)Nt=Z-Ne,Re=l-Ne,le.push(A(M(Ne+Nt%Re,0))),Z=E(Nt/Re);le.push(A(M(Z,0))),me=O(j,et,te==re),j=0,++te}++j,++P}return le.join("")}function C(b){return I(b,function(P){return _.test(P)?V(P.slice(4).toLowerCase()):P})}function k(b){return I(b,function(P){return g.test(P)?"xn--"+L(P):P})}if(o={version:"1.4.1",ucs2:{decode:q,encode:F},decode:V,encode:L,toASCII:k,toUnicode:C},n&&i)if(t.exports==n)i.exports=o;else for(w in o)o.hasOwnProperty(w)&&(n[w]=o[w]);else r.punycode=o})(Ns)})(cl,cl.exports);var nT=cl.exports,ss=TypeError;const iT={},sT=Object.freeze(Object.defineProperty({__proto__:null,default:iT},Symbol.toStringTag,{value:"Module"})),oT=_x(sT);var Sf=typeof Map=="function"&&Map.prototype,Lu=Object.getOwnPropertyDescriptor&&Sf?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,dl=Sf&&Lu&&typeof Lu.get=="function"?Lu.get:null,gm=Sf&&Map.prototype.forEach,Af=typeof Set=="function"&&Set.prototype,Uu=Object.getOwnPropertyDescriptor&&Af?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,fl=Af&&Uu&&typeof Uu.get=="function"?Uu.get:null,ym=Af&&Set.prototype.forEach,aT=typeof WeakMap=="function"&&WeakMap.prototype,$s=aT?WeakMap.prototype.has:null,lT=typeof WeakSet=="function"&&WeakSet.prototype,js=lT?WeakSet.prototype.has:null,uT=typeof WeakRef=="function"&&WeakRef.prototype,vm=uT?WeakRef.prototype.deref:null,hT=Boolean.prototype.valueOf,cT=Object.prototype.toString,dT=Function.prototype.toString,fT=String.prototype.match,bf=String.prototype.slice,Zr=String.prototype.replace,pT=String.prototype.toUpperCase,_m=String.prototype.toLowerCase,A0=RegExp.prototype.test,xm=Array.prototype.concat,ar=Array.prototype.join,mT=Array.prototype.slice,Em=Math.floor,kc=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Gu=Object.getOwnPropertySymbols,Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vs=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Zi||!0)?Symbol.toStringTag:null,b0=Object.prototype.propertyIsEnumerable,wm=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Tm(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||A0.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Em(-t):Em(t);if(n!==t){var i=String(n),s=bf.call(e,i.length+1);return Zr.call(i,r,"$&_")+"."+Zr.call(Zr.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Zr.call(e,r,"$&_")}var Oc=oT,Sm=Oc.custom,Am=I0(Sm)?Sm:null,C0={__proto__:null,double:'"',single:"'"},gT={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Zl=function t(e,r,n,i){var s=r||{};if(xr(s,"quoteStyle")&&!xr(C0,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=xr(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return M0(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Tm(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?Tm(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return Fc(e)?"[Array]":"[Object]";var c=kT(s,n);if(typeof i>"u")i=[];else if(R0(i,e)>=0)return"[Circular]";function d(S,M,O){if(M&&(i=mT.call(i),i.push(M)),O){var V={depth:s.depth};return xr(s,"quoteStyle")&&(V.quoteStyle=s.quoteStyle),t(S,V,n+1,i)}return t(S,s,n+1,i)}if(typeof e=="function"&&!bm(e)){var f=AT(e),p=Yo(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+ar.call(p,", ")+" }":"")}if(I0(e)){var v=Zi?Zr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Bc.call(e);return typeof e=="object"&&!Zi?gs(v):v}if(MT(e)){for(var _="<"+_m.call(String(e.nodeName)),g=e.attributes||[],y=0;y<g.length;y++)_+=" "+g[y].name+"="+P0(yT(g[y].value),"double",s);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+_m.call(String(e.nodeName))+">",_}if(Fc(e)){if(e.length===0)return"[]";var m=Yo(e,d);return c&&!NT(m)?"["+Lc(m,c)+"]":"[ "+ar.call(m,", ")+" ]"}if(_T(e)){var x=Yo(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!b0.call(e,"cause")?"{ ["+String(e)+"] "+ar.call(xm.call("[cause]: "+d(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ar.call(x,", ")+" }"}if(typeof e=="object"&&o){if(Am&&typeof e[Am]=="function"&&Oc)return Oc(e,{depth:h-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(bT(e)){var E=[];return gm&&gm.call(e,function(S,M){E.push(d(M,e,!0)+" => "+d(S,e))}),Cm("Map",dl.call(e),E,c)}if(IT(e)){var A=[];return ym&&ym.call(e,function(S){A.push(d(S,e))}),Cm("Set",fl.call(e),A,c)}if(CT(e))return Hu("WeakMap");if(RT(e))return Hu("WeakSet");if(PT(e))return Hu("WeakRef");if(ET(e))return gs(d(Number(e)));if(TT(e))return gs(d(kc.call(e)));if(wT(e))return gs(hT.call(e));if(xT(e))return gs(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Ns<"u"&&e===Ns)return"{ [object globalThis] }";if(!vT(e)&&!bm(e)){var w=Yo(e,d),T=wm?wm(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",I=!T&&Vs&&Object(e)===e&&Vs in e?bf.call(yn(e),8,-1):R?"Object":"",q=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",F=q+(I||R?"["+ar.call(xm.call([],I||[],R||[]),": ")+"] ":"");return w.length===0?F+"{}":c?F+"{"+Lc(w,c)+"}":F+"{ "+ar.call(w,", ")+" }"}return String(e)};function P0(t,e,r){var n=r.quoteStyle||e,i=C0[n];return i+t+i}function yT(t){return Zr.call(String(t),/"/g,"&quot;")}function ei(t){return!Vs||!(typeof t=="object"&&(Vs in t||typeof t[Vs]<"u"))}function Fc(t){return yn(t)==="[object Array]"&&ei(t)}function vT(t){return yn(t)==="[object Date]"&&ei(t)}function bm(t){return yn(t)==="[object RegExp]"&&ei(t)}function _T(t){return yn(t)==="[object Error]"&&ei(t)}function xT(t){return yn(t)==="[object String]"&&ei(t)}function ET(t){return yn(t)==="[object Number]"&&ei(t)}function wT(t){return yn(t)==="[object Boolean]"&&ei(t)}function I0(t){if(Zi)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Bc)return!1;try{return Bc.call(t),!0}catch{}return!1}function TT(t){if(!t||typeof t!="object"||!kc)return!1;try{return kc.call(t),!0}catch{}return!1}var ST=Object.prototype.hasOwnProperty||function(t){return t in this};function xr(t,e){return ST.call(t,e)}function yn(t){return cT.call(t)}function AT(t){if(t.name)return t.name;var e=fT.call(dT.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function R0(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function bT(t){if(!dl||!t||typeof t!="object")return!1;try{dl.call(t);try{fl.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function CT(t){if(!$s||!t||typeof t!="object")return!1;try{$s.call(t,$s);try{js.call(t,js)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function PT(t){if(!vm||!t||typeof t!="object")return!1;try{return vm.call(t),!0}catch{}return!1}function IT(t){if(!fl||!t||typeof t!="object")return!1;try{fl.call(t);try{dl.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function RT(t){if(!js||!t||typeof t!="object")return!1;try{js.call(t,js);try{$s.call(t,$s)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function MT(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function M0(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return M0(bf.call(t,0,e.maxStringLength),e)+n}var i=gT[e.quoteStyle||"single"];i.lastIndex=0;var s=Zr.call(Zr.call(t,i,"\\$1"),/[\x00-\x1f]/g,DT);return P0(s,"single",e)}function DT(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+pT.call(e.toString(16))}function gs(t){return"Object("+t+")"}function Hu(t){return t+" { ? }"}function Cm(t,e,r,n){var i=n?Lc(r,n):ar.call(r,", ");return t+" ("+e+") {"+i+"}"}function NT(t){for(var e=0;e<t.length;e++)if(R0(t[e],`
`)>=0)return!1;return!0}function kT(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=ar.call(Array(t.indent+1)," ");else return null;return{base:r,prev:ar.call(Array(e+1),r)}}function Lc(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+ar.call(t,","+r)+`
`+e.prev}function Yo(t,e){var r=Fc(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=xr(t,i)?e(t[i],t):""}var s=typeof Gu=="function"?Gu(t):[],o;if(Zi){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)xr(t,l)&&(r&&String(Number(l))===l&&l<t.length||Zi&&o["$"+l]instanceof Symbol||(A0.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof Gu=="function")for(var u=0;u<s.length;u++)b0.call(t,s[u])&&n.push("["+e(s[u])+"]: "+e(t[s[u]],t));return n}var BT=Zl,OT=ss,Jl=function(t,e,r){for(var n=t,i;(i=n.next)!=null;n=i)if(i.key===e)return n.next=i.next,r||(i.next=t.next,t.next=i),i},FT=function(t,e){if(t){var r=Jl(t,e);return r&&r.value}},LT=function(t,e,r){var n=Jl(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},UT=function(t,e){return t?!!Jl(t,e):!1},GT=function(t,e){if(t)return Jl(t,e,!0)},HT=function(){var e,r={assert:function(n){if(!r.has(n))throw new OT("Side channel does not contain "+BT(n))},delete:function(n){var i=e&&e.next,s=GT(e,n);return s&&i&&i===s&&(e=void 0),!!s},get:function(n){return FT(e,n)},has:function(n){return UT(e,n)},set:function(n,i){e||(e={next:void 0}),LT(e,n,i)}};return r},D0=Object,zT=Error,$T=EvalError,jT=RangeError,VT=ReferenceError,WT=SyntaxError,XT=URIError,YT=Math.abs,KT=Math.floor,qT=Math.max,QT=Math.min,ZT=Math.pow,JT=Math.round,eS=Number.isNaN||function(e){return e!==e},tS=eS,rS=function(e){return tS(e)||e===0?e:e<0?-1:1},nS=Object.getOwnPropertyDescriptor,Ca=nS;if(Ca)try{Ca([],"length")}catch{Ca=null}var N0=Ca,Pa=Object.defineProperty||!1;if(Pa)try{Pa({},"a",{value:1})}catch{Pa=!1}var iS=Pa,zu,Pm;function sS(){return Pm||(Pm=1,zu=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),zu}var $u,Im;function oS(){if(Im)return $u;Im=1;var t=typeof Symbol<"u"&&Symbol,e=sS();return $u=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},$u}var ju,Rm;function k0(){return Rm||(Rm=1,ju=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ju}var Vu,Mm;function B0(){if(Mm)return Vu;Mm=1;var t=D0;return Vu=t.getPrototypeOf||null,Vu}var Wu,Dm;function aS(){if(Dm)return Wu;Dm=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(l,u){for(var h=[],c=0;c<l.length;c+=1)h[c]=l[c];for(var d=0;d<u.length;d+=1)h[d+l.length]=u[d];return h},s=function(l,u){for(var h=[],c=u,d=0;c<l.length;c+=1,d+=1)h[d]=l[c];return h},o=function(a,l){for(var u="",h=0;h<a.length;h+=1)u+=a[h],h+1<a.length&&(u+=l);return u};return Wu=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(t+u);for(var h=s(arguments,1),c,d=function(){if(this instanceof c){var g=u.apply(this,i(h,arguments));return Object(g)===g?g:this}return u.apply(l,i(h,arguments))},f=r(0,u.length-h.length),p=[],v=0;v<f;v++)p[v]="$"+v;if(c=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(d),u.prototype){var _=function(){};_.prototype=u.prototype,c.prototype=new _,_.prototype=null}return c},Wu}var Xu,Nm;function eu(){if(Nm)return Xu;Nm=1;var t=aS();return Xu=Function.prototype.bind||t,Xu}var Yu,km;function Cf(){return km||(km=1,Yu=Function.prototype.call),Yu}var Ku,Bm;function O0(){return Bm||(Bm=1,Ku=Function.prototype.apply),Ku}var lS=typeof Reflect<"u"&&Reflect&&Reflect.apply,uS=eu(),hS=O0(),cS=Cf(),dS=lS,fS=dS||uS.call(cS,hS),pS=eu(),mS=ss,gS=Cf(),yS=fS,F0=function(e){if(e.length<1||typeof e[0]!="function")throw new mS("a function is required");return yS(pS,gS,e)},qu,Om;function vS(){if(Om)return qu;Om=1;var t=F0,e=N0,r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!r&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return qu=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,qu}var Qu,Fm;function _S(){if(Fm)return Qu;Fm=1;var t=k0(),e=B0(),r=vS();return Qu=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:r?function(i){return r(i)}:null,Qu}var Zu,Lm;function xS(){if(Lm)return Zu;Lm=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=eu();return Zu=r.call(t,e),Zu}var ie,ES=D0,wS=zT,TS=$T,SS=jT,AS=VT,Ji=WT,Fi=ss,bS=XT,CS=YT,PS=KT,IS=qT,RS=QT,MS=ZT,DS=JT,NS=rS,L0=Function,Ju=function(t){try{return L0('"use strict"; return ('+t+").constructor;")()}catch{}},mo=N0,kS=iS,eh=function(){throw new Fi},BS=mo?function(){try{return arguments.callee,eh}catch{try{return mo(arguments,"callee").get}catch{return eh}}}():eh,ii=oS()(),Ge=_S(),OS=B0(),FS=k0(),U0=O0(),To=Cf(),li={},LS=typeof Uint8Array>"u"||!Ge?ie:Ge(Uint8Array),Fn={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ie:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ie:ArrayBuffer,"%ArrayIteratorPrototype%":ii&&Ge?Ge([][Symbol.iterator]()):ie,"%AsyncFromSyncIteratorPrototype%":ie,"%AsyncFunction%":li,"%AsyncGenerator%":li,"%AsyncGeneratorFunction%":li,"%AsyncIteratorPrototype%":li,"%Atomics%":typeof Atomics>"u"?ie:Atomics,"%BigInt%":typeof BigInt>"u"?ie:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ie:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ie:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ie:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":wS,"%eval%":eval,"%EvalError%":TS,"%Float16Array%":typeof Float16Array>"u"?ie:Float16Array,"%Float32Array%":typeof Float32Array>"u"?ie:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ie:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ie:FinalizationRegistry,"%Function%":L0,"%GeneratorFunction%":li,"%Int8Array%":typeof Int8Array>"u"?ie:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ie:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ie:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ii&&Ge?Ge(Ge([][Symbol.iterator]())):ie,"%JSON%":typeof JSON=="object"?JSON:ie,"%Map%":typeof Map>"u"?ie:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ii||!Ge?ie:Ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":ES,"%Object.getOwnPropertyDescriptor%":mo,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ie:Promise,"%Proxy%":typeof Proxy>"u"?ie:Proxy,"%RangeError%":SS,"%ReferenceError%":AS,"%Reflect%":typeof Reflect>"u"?ie:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ie:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ii||!Ge?ie:Ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ie:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ii&&Ge?Ge(""[Symbol.iterator]()):ie,"%Symbol%":ii?Symbol:ie,"%SyntaxError%":Ji,"%ThrowTypeError%":BS,"%TypedArray%":LS,"%TypeError%":Fi,"%Uint8Array%":typeof Uint8Array>"u"?ie:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ie:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ie:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ie:Uint32Array,"%URIError%":bS,"%WeakMap%":typeof WeakMap>"u"?ie:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ie:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ie:WeakSet,"%Function.prototype.call%":To,"%Function.prototype.apply%":U0,"%Object.defineProperty%":kS,"%Object.getPrototypeOf%":OS,"%Math.abs%":CS,"%Math.floor%":PS,"%Math.max%":IS,"%Math.min%":RS,"%Math.pow%":MS,"%Math.round%":DS,"%Math.sign%":NS,"%Reflect.getPrototypeOf%":FS};if(Ge)try{null.error}catch(t){var US=Ge(Ge(t));Fn["%Error.prototype%"]=US}var GS=function t(e){var r;if(e==="%AsyncFunction%")r=Ju("async function () {}");else if(e==="%GeneratorFunction%")r=Ju("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ju("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Ge&&(r=Ge(i.prototype))}return Fn[e]=r,r},Um={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},So=eu(),pl=xS(),HS=So.call(To,Array.prototype.concat),zS=So.call(U0,Array.prototype.splice),Gm=So.call(To,String.prototype.replace),ml=So.call(To,String.prototype.slice),$S=So.call(To,RegExp.prototype.exec),jS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,VS=/\\(\\)?/g,WS=function(e){var r=ml(e,0,1),n=ml(e,-1);if(r==="%"&&n!=="%")throw new Ji("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ji("invalid intrinsic syntax, expected opening `%`");var i=[];return Gm(e,jS,function(s,o,a,l){i[i.length]=a?Gm(l,VS,"$1"):o||s}),i},XS=function(e,r){var n=e,i;if(pl(Um,n)&&(i=Um[n],n="%"+i[0]+"%"),pl(Fn,n)){var s=Fn[n];if(s===li&&(s=GS(n)),typeof s>"u"&&!r)throw new Fi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Ji("intrinsic "+e+" does not exist!")},Pf=function(e,r){if(typeof e!="string"||e.length===0)throw new Fi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Fi('"allowMissing" argument must be a boolean');if($S(/^%?[^%]*%?$/,e)===null)throw new Ji("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=WS(e),i=n.length>0?n[0]:"",s=XS("%"+i+"%",r),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],zS(n,HS([0,1],u)));for(var h=1,c=!0;h<n.length;h+=1){var d=n[h],f=ml(d,0,1),p=ml(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Ji("property names with quotes must have matching quotes");if((d==="constructor"||!c)&&(l=!0),i+="."+d,o="%"+i+"%",pl(Fn,o))a=Fn[o];else if(a!=null){if(!(d in a)){if(!r)throw new Fi("base intrinsic for "+e+" exists, but the property is not available.");return}if(mo&&h+1>=n.length){var v=mo(a,d);c=!!v,c&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[d]}else c=pl(a,d),a=a[d];c&&!l&&(Fn[o]=a)}}return a},G0=Pf,H0=F0,YS=H0([G0("%String.prototype.indexOf%")]),z0=function(e,r){var n=G0(e,!!r);return typeof n=="function"&&YS(e,".prototype.")>-1?H0([n]):n},KS=Pf,Ao=z0,qS=Zl,QS=ss,Hm=KS("%Map%",!0),ZS=Ao("Map.prototype.get",!0),JS=Ao("Map.prototype.set",!0),eA=Ao("Map.prototype.has",!0),tA=Ao("Map.prototype.delete",!0),rA=Ao("Map.prototype.size",!0),$0=!!Hm&&function(){var e,r={assert:function(n){if(!r.has(n))throw new QS("Side channel does not contain "+qS(n))},delete:function(n){if(e){var i=tA(e,n);return rA(e)===0&&(e=void 0),i}return!1},get:function(n){if(e)return ZS(e,n)},has:function(n){return e?eA(e,n):!1},set:function(n,i){e||(e=new Hm),JS(e,n,i)}};return r},nA=Pf,tu=z0,iA=Zl,Ko=$0,sA=ss,si=nA("%WeakMap%",!0),oA=tu("WeakMap.prototype.get",!0),aA=tu("WeakMap.prototype.set",!0),lA=tu("WeakMap.prototype.has",!0),uA=tu("WeakMap.prototype.delete",!0),hA=si?function(){var e,r,n={assert:function(i){if(!n.has(i))throw new sA("Side channel does not contain "+iA(i))},delete:function(i){if(si&&i&&(typeof i=="object"||typeof i=="function")){if(e)return uA(e,i)}else if(Ko&&r)return r.delete(i);return!1},get:function(i){return si&&i&&(typeof i=="object"||typeof i=="function")&&e?oA(e,i):r&&r.get(i)},has:function(i){return si&&i&&(typeof i=="object"||typeof i=="function")&&e?lA(e,i):!!r&&r.has(i)},set:function(i,s){si&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new si),aA(e,i,s)):Ko&&(r||(r=Ko()),r.set(i,s))}};return n}:Ko,cA=ss,dA=Zl,fA=HT,pA=$0,mA=hA,gA=mA||pA||fA,yA=function(){var e,r={assert:function(n){if(!r.has(n))throw new cA("Side channel does not contain "+dA(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,i){e||(e=gA()),e.set(n,i)}};return r},vA=String.prototype.replace,_A=/%20/g,th={RFC1738:"RFC1738",RFC3986:"RFC3986"},If={default:th.RFC3986,formatters:{RFC1738:function(t){return vA.call(t,_A,"+")},RFC3986:function(t){return String(t)}},RFC1738:th.RFC1738,RFC3986:th.RFC3986},xA=If,rh=Object.prototype.hasOwnProperty,Rn=Array.isArray,Zt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),EA=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Rn(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},j0=function(e,r){for(var n=r&&r.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},wA=function t(e,r,n){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(Rn(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!rh.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Rn(e)&&!Rn(r)&&(i=j0(e,n)),Rn(e)&&Rn(r)?(r.forEach(function(s,o){if(rh.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return rh.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},TA=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},SA=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},nh=1024,AA=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=nh){for(var u=o.length>=nh?o.slice(l,l+nh):o,h=[],c=0;c<u.length;++c){var d=u.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===xA.RFC1738&&(d===40||d===41)){h[h.length]=u.charAt(c);continue}if(d<128){h[h.length]=Zt[d];continue}if(d<2048){h[h.length]=Zt[192|d>>6]+Zt[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=Zt[224|d>>12]+Zt[128|d>>6&63]+Zt[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|u.charCodeAt(c)&1023),h[h.length]=Zt[240|d>>18]+Zt[128|d>>12&63]+Zt[128|d>>6&63]+Zt[128|d&63]}a+=h.join("")}return a},bA=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(r.push({obj:o,prop:u}),n.push(h))}return EA(r),e},CA=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},PA=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},IA=function(e,r){return[].concat(e,r)},RA=function(e,r){if(Rn(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},V0={arrayToObject:j0,assign:TA,combine:IA,compact:bA,decode:SA,encode:AA,isBuffer:PA,isRegExp:CA,maybeMap:RA,merge:wA},W0=yA,Ia=V0,Ws=If,MA=Object.prototype.hasOwnProperty,X0={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},sr=Array.isArray,DA=Array.prototype.push,Y0=function(t,e){DA.apply(t,sr(e)?e:[e])},NA=Date.prototype.toISOString,zm=Ws.default,Oe={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ia.encode,encodeValuesOnly:!1,filter:void 0,format:zm,formatter:Ws.formatters[zm],indices:!1,serializeDate:function(e){return NA.call(e)},skipNulls:!1,strictNullHandling:!1},kA=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ih={},BA=function t(e,r,n,i,s,o,a,l,u,h,c,d,f,p,v,_,g,y){for(var m=e,x=y,E=0,A=!1;(x=x.get(ih))!==void 0&&!A;){var w=x.get(e);if(E+=1,typeof w<"u"){if(w===E)throw new RangeError("Cyclic object value");A=!0}typeof x.get(ih)>"u"&&(E=0)}if(typeof h=="function"?m=h(r,m):m instanceof Date?m=f(m):n==="comma"&&sr(m)&&(m=Ia.maybeMap(m,function(b){return b instanceof Date?f(b):b})),m===null){if(o)return u&&!_?u(r,Oe.encoder,g,"key",p):r;m=""}if(kA(m)||Ia.isBuffer(m)){if(u){var T=_?r:u(r,Oe.encoder,g,"key",p);return[v(T)+"="+v(u(m,Oe.encoder,g,"value",p))]}return[v(r)+"="+v(String(m))]}var R=[];if(typeof m>"u")return R;var I;if(n==="comma"&&sr(m))_&&u&&(m=Ia.maybeMap(m,u)),I=[{value:m.length>0?m.join(",")||null:void 0}];else if(sr(h))I=h;else{var q=Object.keys(m);I=c?q.sort(c):q}var F=l?String(r).replace(/\./g,"%2E"):String(r),S=i&&sr(m)&&m.length===1?F+"[]":F;if(s&&sr(m)&&m.length===0)return S+"[]";for(var M=0;M<I.length;++M){var O=I[M],V=typeof O=="object"&&O&&typeof O.value<"u"?O.value:m[O];if(!(a&&V===null)){var L=d&&l?String(O).replace(/\./g,"%2E"):String(O),C=sr(m)?typeof n=="function"?n(S,L):S:S+(d?"."+L:"["+L+"]");y.set(e,E);var k=W0();k.set(ih,y),Y0(R,t(V,C,n,i,s,o,a,l,n==="comma"&&_&&sr(m)?null:u,h,c,d,f,p,v,_,g,k))}}return R},OA=function(e){if(!e)return Oe;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Oe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ws.default;if(typeof e.format<"u"){if(!MA.call(Ws.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Ws.formatters[n],s=Oe.filter;(typeof e.filter=="function"||sr(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in X0?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Oe.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Oe.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Oe.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Oe.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Oe.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Oe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Oe.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Oe.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Oe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Oe.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Oe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Oe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Oe.strictNullHandling}},FA=function(t,e){var r=t,n=OA(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):sr(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a=X0[n.arrayFormat],l=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var u=W0(),h=0;h<i.length;++h){var c=i[h],d=r[c];n.skipNulls&&d===null||Y0(o,BA(d,c,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var f=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Xn=V0,Uc=Object.prototype.hasOwnProperty,$m=Array.isArray,Pe={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Xn.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},LA=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},K0=function(t,e,r){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},UA="utf8=%26%2310003%3B",GA="utf8=%E2%9C%93",HA=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,r.throwOnLimitExceeded?s+1:s);if(r.throwOnLimitExceeded&&o.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var a=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===GA?u="utf-8":o[l]===UA&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),d=c===-1?h.indexOf("="):c+1,f,p;d===-1?(f=r.decoder(h,Pe.decoder,u,"key"),p=r.strictNullHandling?null:""):(f=r.decoder(h.slice(0,d),Pe.decoder,u,"key"),p=Xn.maybeMap(K0(h.slice(d+1),r,$m(n[f])?n[f].length:0),function(_){return r.decoder(_,Pe.decoder,u,"value")})),p&&r.interpretNumericEntities&&u==="iso-8859-1"&&(p=LA(String(p))),h.indexOf("[]=")>-1&&(p=$m(p)?[p]:p);var v=Uc.call(n,f);v&&r.duplicates==="combine"?n[f]=Xn.combine(n[f],p):(!v||r.duplicates==="last")&&(n[f]=p)}return n},zA=function(t,e,r,n){var i=0;if(t.length>0&&t[t.length-1]==="[]"){var s=t.slice(0,-1).join("");i=Array.isArray(e)&&e[s]?e[s].length:0}for(var o=n?e:K0(e,r,i),a=t.length-1;a>=0;--a){var l,u=t[a];if(u==="[]"&&r.parseArrays)l=r.allowEmptyArrays&&(o===""||r.strictNullHandling&&o===null)?[]:Xn.combine([],o);else{l=r.plainObjects?{__proto__:null}:{};var h=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,c=r.decodeDotInKeys?h.replace(/%2E/g,"."):h,d=parseInt(c,10);!r.parseArrays&&c===""?l={0:o}:!isNaN(d)&&u!==c&&String(d)===c&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(l=[],l[d]=o):c!=="__proto__"&&(l[c]=o)}o=l}return o},$A=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!n.plainObjects&&Uc.call(Object.prototype,u)&&!n.allowPrototypes)return;h.push(u)}for(var c=0;n.depth>0&&(l=a.exec(s))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&Uc.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");h.push("["+s.slice(l.index)+"]")}return zA(h,r,n,i)}},jA=function(e){if(!e)return Pe;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?Pe.charset:e.charset,n=typeof e.duplicates>"u"?Pe.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Pe.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Pe.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Pe.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Pe.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Pe.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Pe.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Pe.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Pe.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Pe.decoder,delimiter:typeof e.delimiter=="string"||Xn.isRegExp(e.delimiter)?e.delimiter:Pe.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Pe.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Pe.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Pe.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Pe.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Pe.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Pe.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},VA=function(t,e){var r=jA(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?{__proto__:null}:{};for(var n=typeof t=="string"?HA(t,r):t,i=r.plainObjects?{__proto__:null}:{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=$A(a,n[a],r,typeof t=="string");i=Xn.merge(i,l,r)}return r.allowSparse===!0?i:Xn.compact(i)},WA=FA,XA=VA,YA=If,KA={formats:YA,parse:XA,stringify:WA},qA=nT;function Ir(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var QA=/^([a-z0-9.+-]+:)/i,ZA=/:[0-9]*$/,JA=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,eb=["<",">",'"',"`"," ","\r",`
`,"	"],tb=["{","}","|","\\","^","`"].concat(eb),Gc=["'"].concat(tb),jm=["%","/","?",";","#"].concat(Gc),Vm=["/","?","#"],rb=255,Wm=/^[+a-z0-9A-Z_-]{0,63}$/,nb=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ib={javascript:!0,"javascript:":!0},Hc={javascript:!0,"javascript:":!0},Li={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},zc=KA;function sb(t,e,r){if(t&&typeof t=="object"&&t instanceof Ir)return t;var n=new Ir;return n.parse(t,e,r),n}Ir.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var l=JA.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=zc.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=QA.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&Hc[u])&&(a=a.substr(2),this.slashes=!0)}if(!Hc[u]&&(c||u&&!Li[u])){for(var d=-1,f=0;f<Vm.length;f++){var p=a.indexOf(Vm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var v,_;d===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",d),_!==-1&&(v=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(v)),d=-1;for(var f=0;f<jm.length;f++){var p=a.indexOf(jm[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var y=this.hostname.split(/\./),f=0,m=y.length;f<m;f++){var x=y[f];if(x&&!x.match(Wm)){for(var E="",A=0,w=x.length;A<w;A++)x.charCodeAt(A)>127?E+="x":E+=x[A];if(!E.match(Wm)){var T=y.slice(0,f),R=y.slice(f+1),I=x.match(nb);I&&(T.push(I[1]),R.unshift(I[2])),R.length&&(a="/"+R.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>rb?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=qA.toASCII(this.hostname));var q=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+q,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!ib[h])for(var f=0,m=Gc.length;f<m;f++){var S=Gc[f];if(a.indexOf(S)!==-1){var M=encodeURIComponent(S);M===S&&(M=escape(S)),a=a.split(S).join(M)}}var O=a.indexOf("#");O!==-1&&(this.hash=a.substr(O),a=a.slice(0,O));var V=a.indexOf("?");if(V!==-1?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=zc.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Li[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",L=this.search||"";this.path=q+L}return this.href=this.format(),this};Ir.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=zc.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Li[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+r+o+n};Ir.prototype.resolve=function(t){return this.resolveObject(sb(t,!1,!0)).format()};Ir.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Ir;e.parse(t,!1,!0),t=e}for(var r=new Ir,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=t[l])}return Li[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Li[t.protocol]){for(var u=Object.keys(t),h=0;h<u.length;h++){var c=u[h];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Hc[t.protocol]){for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",f=r.search||"";r.path=d+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",v=t.host||t.pathname&&t.pathname.charAt(0)==="/",_=v||p||r.host&&t.pathname,g=_,y=r.pathname&&r.pathname.split("/")||[],m=t.pathname&&t.pathname.split("/")||[],x=r.protocol&&!Li[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(m[0]===""?m[0]=t.host:m.unshift(t.host)),t.host=null),_=_&&(m[0]===""||y[0]==="")),v)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=m;else if(m.length)y||(y=[]),y.pop(),y=y.concat(m),r.search=t.search,r.query=t.query;else if(t.search!=null){if(x){r.host=y.shift(),r.hostname=r.host;var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;E&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=y.slice(-1)[0],w=(r.host||t.host||y.length>1)&&(A==="."||A==="..")||A==="",T=0,R=y.length;R>=0;R--)A=y[R],A==="."?y.splice(R,1):A===".."?(y.splice(R,1),T++):T&&(y.splice(R,1),T--);if(!_&&!g)for(;T--;T)y.unshift("..");_&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),w&&y.join("/").substr(-1)!=="/"&&y.push("");var I=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(x){r.hostname=I?"":y.length?y.shift():"",r.host=r.hostname;var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;E&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname)}return _=_||r.host&&y.length,_&&!I&&y.unshift(""),y.length>0?r.pathname=y.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Ir.prototype.parseHost=function(){var t=this.host,e=ZA.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const Xm={};function se(t,e,r=3){if(Xm[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),Xm[e]=!0}function Bt(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function ys(t){return t.split("?")[0].split("#")[0]}function ob(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ab(t,e,r){return t.replace(new RegExp(ob(e),"g"),r)}function lb(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const je={toPosix(t){return ab(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Bt(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(Bt(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=ys(this.toPosix(e??z.ADAPTER.getBaseUrl())),i=ys(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?je.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(Bt(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=lb(t),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return Bt(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(Bt(n),n.length>0)if(e===void 0)e=n;else{const i=t[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Bt(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+t:s:r&&n===1?"//":s+t.slice(0,n)},rootname(t){Bt(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Bt(t),e&&Bt(e),t=ys(this.toPosix(t));let r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Bt(t),t=ys(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){Bt(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=ys(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,u=t.length-1,h=0;for(;u>=i;--u){if(r=t.charCodeAt(u),r===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),r===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let sh;async function ub(){return sh??(sh=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return ut.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return ut.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(n),t.deleteTexture(r),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?ut.PMA:ut.UNPACK})()),sh}let oh;function hb(){return typeof oh>"u"&&(oh=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!z.ADAPTER.getWebGLRenderingContext())return!1;const r=z.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),oh}var cb={grad:.9,turn:360,rad:360/(2*Math.PI)},vr=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ze=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Pt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},q0=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Ym=function(t){return{r:Pt(t.r,0,255),g:Pt(t.g,0,255),b:Pt(t.b,0,255),a:Pt(t.a)}},ah=function(t){return{r:ze(t.r),g:ze(t.g),b:ze(t.b),a:ze(t.a,3)}},db=/^#([0-9a-f]{3,8})$/i,qo=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Q0=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),a=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},Z0=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),a=n*(1-(e-s)*r),l=n*(1-(1-e+s)*r),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:i}},Km=function(t){return{h:q0(t.h),s:Pt(t.s,0,100),l:Pt(t.l,0,100),a:Pt(t.a)}},qm=function(t){return{h:ze(t.h),s:ze(t.s),l:ze(t.l),a:ze(t.a,3)}},Qm=function(t){return Z0((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},Xs=function(t){return{h:(e=Q0(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},fb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$c={string:[[function(t){var e=db.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?ze(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?ze(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=mb.exec(t)||gb.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ym({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=fb.exec(t)||pb.exec(t);if(!e)return null;var r,n,i=Km({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(cb[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Qm(i)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=i===void 0?1:i;return vr(e)&&vr(r)&&vr(n)?Ym({r:Number(e),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,i=t.a,s=i===void 0?1:i;if(!vr(e)||!vr(r)||!vr(n))return null;var o=Km({h:Number(e),s:Number(r),l:Number(n),a:Number(s)});return Qm(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,i=t.a,s=i===void 0?1:i;if(!vr(e)||!vr(r)||!vr(n))return null;var o=function(a){return{h:q0(a.h),s:Pt(a.s,0,100),v:Pt(a.v,0,100),a:Pt(a.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(s)});return Z0(o)},"hsv"]]},Zm=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},yb=function(t){return typeof t=="string"?Zm(t.trim(),$c.string):typeof t=="object"&&t!==null?Zm(t,$c.object):[null,void 0]},lh=function(t,e){var r=Xs(t);return{h:r.h,s:Pt(r.s+100*e,0,100),l:r.l,a:r.a}},uh=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Jm=function(t,e){var r=Xs(t);return{h:r.h,s:r.s,l:Pt(r.l+100*e,0,100),a:r.a}},jc=function(){function t(e){this.parsed=yb(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return ze(uh(this.rgba),2)},t.prototype.isDark=function(){return uh(this.rgba)<.5},t.prototype.isLight=function(){return uh(this.rgba)>=.5},t.prototype.toHex=function(){return e=ah(this.rgba),r=e.r,n=e.g,i=e.b,o=(s=e.a)<1?qo(ze(255*s)):"","#"+qo(r)+qo(n)+qo(i)+o;var e,r,n,i,s,o},t.prototype.toRgb=function(){return ah(this.rgba)},t.prototype.toRgbString=function(){return e=ah(this.rgba),r=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var e,r,n,i,s},t.prototype.toHsl=function(){return qm(Xs(this.rgba))},t.prototype.toHslString=function(){return e=qm(Xs(this.rgba)),r=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var e,r,n,i,s},t.prototype.toHsv=function(){return e=Q0(this.rgba),{h:ze(e.h),s:ze(e.s),v:ze(e.v),a:ze(e.a,3)};var e},t.prototype.invert=function(){return Jt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Jt(lh(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Jt(lh(this.rgba,-e))},t.prototype.grayscale=function(){return Jt(lh(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Jt(Jm(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Jt(Jm(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Jt({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):ze(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=Xs(this.rgba);return typeof e=="number"?Jt({h:e,s:r.s,l:r.l,a:r.a}):ze(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Jt(e).toHex()},t}(),Jt=function(t){return t instanceof jc?t:new jc(t)},eg=[],vb=function(t){t.forEach(function(e){eg.indexOf(e)<0&&(e(jc,$c),eg.push(e))})};function _b(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,d="black";if(!s.length)for(var f in r)s[f]=new t(r[f]).toRgb();for(var p in r){var v=(a=h,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<c&&(c=v,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":r[a];return l?new t(l).toRgb():null},"name"])}vb([_b]);const ui=class Ra{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ra)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((i,s)=>i===r[s]);if(e!==null&&r!==null){const i=Object.keys(e),s=Object.keys(r);return i.length!==s.length?!1:i.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,n,i]=this._components;return{r:e,g:r,b:n,a:i}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,i]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[r,n,i]=this._components;return e[0]=r,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,i,s]=Ra.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,n,i]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,n,i,s]=this._components;return e[0]=r,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let r,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,i,s=255]=e,r/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Ra.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Jt(e);o.isValid()&&({r,g:n,b:i,a:s}=o.rgba,r/=255,n/=255,i/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,r),n)}),e)}};ui.shared=new ui,ui.temp=new ui,ui.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ve=ui;function xb(t){return se("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ve.shared.setValue(t).toHex()}function Eb(t){return se("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ve.shared.setValue(t).toNumber()}function wb(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[Q.NORMAL_NPM]=Q.NORMAL,t[Q.ADD_NPM]=Q.ADD,t[Q.SCREEN_NPM]=Q.SCREEN,e[Q.NORMAL]=Q.NORMAL_NPM,e[Q.ADD]=Q.ADD_NPM,e[Q.SCREEN]=Q.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const J0=wb();function e_(t,e){return J0[e?1:0][t]}function Tb(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function t_(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function gl(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function tg(t){return!(t&t-1)&&!!t}function rg(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Ui(t,e,r){const n=t.length;let i;if(e>=n||r===0)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function Jr(t){return t===0?0:t<0?-1:1}let Sb=0;function Yn(){return++Sb}const Vc=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Vc.EMPTY=new Vc(0,0,0,0);let ng=Vc;const ig={},er=Object.create(null),Gr=Object.create(null);class Ab{constructor(e,r,n){this._canvas=z.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||z.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function sg(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(t[i+3]!==0)return!1;return!0}function og(t,e,r,n,i){const s=4*e;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function bb(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,r).data;let s=0,o=0,a=e-1,l=r-1;for(;o<r&&sg(i,e,o);)++o;if(o===r)return ng.EMPTY;for(;sg(i,e,l);)--l;for(;og(i,e,s,o,l);)++s;for(;og(i,e,a,o,l);)--a;return++a,++l,new ng(s,o,a,l)}function Cb(t){const e=bb(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}function Pb(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function Br(t,e=1){var n;const r=(n=z.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}var U=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(U||{});const Wc=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},ag=(t,e)=>Wc(t).priority??e,X={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Wc).forEach(e=>{e.type.forEach(r=>{var n,i;return(i=(n=this._removeHandlers)[r])==null?void 0:i.call(n,e)})}),this},add(...t){return t.map(Wc).forEach(e=>{e.type.forEach(r=>{var s,o;const n=this._addHandlers,i=this._queue;n[r]?(s=n[r])==null||s.call(n,e):(i[r]=i[r]||[],(o=i[r])==null||o.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>ag(s,r)-ag(i,r)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class Xc{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Ib=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Rb(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function Mb(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=Ib.replace(/%forloop%/gi,Rb(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const hh=0,ch=1,dh=2,fh=3,ph=4,mh=5;class mr{constructor(){this.data=0,this.blendMode=Q.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<hh)}set blend(e){!!(this.data&1<<hh)!==e&&(this.data^=1<<hh)}get offsets(){return!!(this.data&1<<ch)}set offsets(e){!!(this.data&1<<ch)!==e&&(this.data^=1<<ch)}get culling(){return!!(this.data&1<<dh)}set culling(e){!!(this.data&1<<dh)!==e&&(this.data^=1<<dh)}get depthTest(){return!!(this.data&1<<fh)}set depthTest(e){!!(this.data&1<<fh)!==e&&(this.data^=1<<fh)}get depthMask(){return!!(this.data&1<<mh)}set depthMask(e){!!(this.data&1<<mh)!==e&&(this.data^=1<<mh)}get clockwiseFrontFace(){return!!(this.data&1<<ph)}set clockwiseFrontFace(e){!!(this.data&1<<ph)!==e&&(this.data^=1<<ph)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Q.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new mr;return e.depthTest=!1,e.blend=!0,e}}mr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Yc=[];function r_(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=Yc.length-1;n>=0;--n){const i=Yc[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Wt{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](e,r,n,i,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Wt.prototype,{dispatch:{value:Wt.prototype.emit},run:{value:Wt.prototype.emit}});class go{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Wt("setRealSize"),this.onUpdate=new Wt("update"),this.onError=new Wt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class ru extends go{constructor(e,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ut.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Db={scaleMode:Sr.NEAREST,alphaMode:ut.NPM},Kc=class hi extends wo{constructor(e=null,r=null){super(),r=Object.assign({},hi.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:h,type:c,target:d,resolution:f,resourceOptions:p}=r;e&&!(e instanceof go)&&(e=r_(e,p),e.internal=!0),this.resolution=f||z.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=h,this.type=c,this.target=d,this.alphaMode=n,this.uid=Yn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)}setRealSize(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=tg(this.realWidth)&&tg(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Gr[this.cacheId],delete er[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),hi.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,n=z.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Yn()}`}s=e._pixiId}let o=Gr[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new hi(e,r),o.cacheId=s,hi.addToCache(o,s)),o}static fromBuffer(e,r,n,i){e=e||new Float32Array(r*n*4);const s=new ru(e,{width:r,height:n,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=B.RGBA,a=K.FLOAT):e instanceof Int32Array?(o=B.RGBA_INTEGER,a=K.INT):e instanceof Uint32Array?(o=B.RGBA_INTEGER,a=K.UNSIGNED_INT):e instanceof Int16Array?(o=B.RGBA_INTEGER,a=K.SHORT):e instanceof Uint16Array?(o=B.RGBA_INTEGER,a=K.UNSIGNED_SHORT):e instanceof Int8Array?(o=B.RGBA,a=K.BYTE):(o=B.RGBA,a=K.UNSIGNED_BYTE),s.internal=!0,new hi(s,Object.assign({},Db,{type:a,format:o},i))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Gr[r]&&Gr[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),Gr[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Gr[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Gr[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete Gr[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};Kc.defaultOptions={mipmap:pr.POW2,anisotropicLevel:0,scaleMode:Sr.LINEAR,wrapMode:un.CLAMP,alphaMode:ut.UNPACK,target:Oi.TEXTURE_2D,format:B.RGBA,type:K.UNSIGNED_BYTE},Kc._globalBatch=0;let J=Kc;class qc{constructor(){this.texArray=null,this.blend=0,this.type=ur.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Nb=0;class Me{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=Nb++,this.disposeRunner=new Wt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?dr.ELEMENT_ARRAY_BUFFER:dr.ARRAY_BUFFER}get index(){return this.type===dr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Me(e)}}class yl{constructor(e,r=0,n=!1,i=K.FLOAT,s,o,a,l=1){this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,r,n,i,s){return new yl(e,r,n,i,s)}}const kb={Float32Array,Uint32Array,Int32Array,Uint8Array};function Bb(t,e){let r=0,n=0;const i={};for(let l=0;l<t.length;l++)n+=e[l],r+=t[l].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<t.length;l++){const u=e[l],h=t[l],c=t_(h);i[c]||(i[c]=new kb[c](s)),o=i[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*n+a,p=d%u;o[f+p]=h[d]}a+=u}return new Float32Array(s)}const lg={5126:4,5123:2,5121:1};let Ob=0;const Fb={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class fn{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=Ob++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Wt("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,i=!1,s,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Me||(r instanceof Array&&(r=new Float32Array(r)),r=new Me(r));const u=e.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],r,n,i,s);return this}let h=this.buffers.indexOf(r);return h===-1&&(this.buffers.push(r),h=this.buffers.length-1),this.attributes[e]=new yl(h,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Me||(e instanceof Array&&(e=new Uint16Array(e)),e=new Me(e)),e.type=dr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new Me;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),r.push(s.size*lg[s.type]/4),s.buffer=0}for(n.data=Bb(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new fn;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new Me(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new yl(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=dr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new fn,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new Fb[t_(o.buffers[a].data)](i[a]),r.buffers[a]=new Me(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=dr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*lg[d.type]/4)}for(let c=0;c<e.length;c++){const d=e[c].indexBuffer.data;for(let f=0;f<d.length;f++)r.indexBuffer.data[f+u]+=a;a+=e[c].buffers[h].data.length/l,u+=d.length}}return r}}class n_ extends fn{constructor(e=!1){super(),this._buffer=new Me(null,e,!1),this._indexBuffer=new Me(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,K.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,K.FLOAT).addAttribute("aColor",this._buffer,4,!0,K.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,K.FLOAT).addIndex(this._indexBuffer)}}const vl=Math.PI*2,Lb=180/Math.PI,Ub=Math.PI/180;var Xe=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Xe||{});class ae{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new ae(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}ae.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Qo=[new ae,new ae,new ae,new ae];class ee{constructor(e=0,r=0,n=0,i=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Xe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ee(0,0,0,0)}clone(){return new ee(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const T=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=T)return!1;const R=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>R}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Qo[0].set(e.left,e.top),l=Qo[1].set(e.left,e.bottom),u=Qo[2].set(e.right,e.top),h=Qo[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(r.a*r.d-r.b*r.c);if(c===0||(r.apply(a,a),r.apply(l,l),r.apply(u,u),r.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=n||Math.min(a.x,l.x,u.x,h.x)>=i||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*n+f*s,v=d*i+f*s,_=d*n+f*o,g=d*i+f*o;if(Math.max(p,v,_,g)<=d*a.x+f*a.y||Math.min(p,v,_,g)>=d*h.x+f*h.y)return!1;const y=c*(a.y-u.y),m=c*(u.x-a.x),x=y*n+m*s,E=y*i+m*s,A=y*n+m*o,w=y*i+m*o;return!(Math.max(x,E,A,w)<=y*a.x+m*a.y||Math.min(x,E,A,w)>=y*h.x+m*h.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}}ee.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class nu{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=Xe.CIRC}clone(){return new nu(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new ee(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}nu.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class iu{constructor(e=0,r=0,n=0,i=0){this.x=e,this.y=r,this.width=n,this.height=i,this.type=Xe.ELIP}clone(){return new iu(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new ee(this.x-this.width,this.y-this.height,this.width,this.height)}}iu.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ln{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=Xe.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new Ln(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>r!=h>r&&e<(u-a)*((r-l)/(h-l))+a&&(n=!n)}return n}}Ln.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class su{constructor(e=0,r=0,n=0,i=0,s=20){this.x=e,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=Xe.RREC}clone(){return new su(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}su.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class xe{constructor(e=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,i,s,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new ae;const n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(e,r){r=r||new ae;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,r,n,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,r),u=Math.abs(a+l);return u<1e-5||Math.abs(vl-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new xe;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new xe}static get TEMP_MATRIX(){return new xe}}xe.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Sn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],An=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],bn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Cn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Qc=[],i_=[],Zo=Math.sign;function Gb(){for(let t=0;t<16;t++){const e=[];Qc.push(e);for(let r=0;r<16;r++){const n=Zo(Sn[t]*Sn[r]+bn[t]*An[r]),i=Zo(An[t]*Sn[r]+Cn[t]*An[r]),s=Zo(Sn[t]*bn[r]+bn[t]*Cn[r]),o=Zo(An[t]*bn[r]+Cn[t]*Cn[r]);for(let a=0;a<16;a++)if(Sn[a]===n&&An[a]===i&&bn[a]===s&&Cn[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new xe;e.set(Sn[t],An[t],bn[t],Cn[t],0,0),i_.push(e)}}Gb();const we={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Sn[t],uY:t=>An[t],vX:t=>bn[t],vY:t=>Cn[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Qc[t][e],sub:(t,e)=>Qc[t][we.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?we.S:we.N:Math.abs(e)*2<=Math.abs(t)?t>0?we.E:we.W:e>0?t>0?we.SE:we.SW:t>0?we.NE:we.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=i_[we.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class br{constructor(e,r,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new br(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}br.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Zc=class{constructor(){this.worldTransform=new xe,this.localTransform=new xe,this.position=new br(this.onChange,this,0,0),this.scale=new br(this.onChange,this,1,1),this.pivot=new br(this.onChange,this,0,0),this.skew=new br(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};Zc.IDENTITY=new Zc;let Rf=Zc;Rf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Hb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,zb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function ug(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function gh(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function s_(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return gh(2*e);case"bvec3":return gh(3*e);case"bvec4":return gh(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Gi=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],$b={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},jb={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Vb(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((n=t.uniforms[i])==null?void 0:n.group)===!0&&(t.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let l=0;l<Gi.length;l++)if(Gi[l].test(s,o)){r.push(Gi[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?$b:jb)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const o_={};let oi=o_;function Wb(){if(oi===o_||oi!=null&&oi.isContextLost()){const t=z.ADAPTER.createCanvas();let e;z.PREFER_ENV>=Jn.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),oi=e}return oi}let Jo;function Xb(){if(!Jo){Jo=Ct.MEDIUM;const t=Wb();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(Jo=e.precision?Ct.HIGH:Ct.MEDIUM)}}return Jo}function hg(t,e){const r=t.getShaderSource(e).split(`
`).map((u,h)=>`${h}: ${u}`),n=t.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{r[u-1]=`%c${r[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Yb(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||hg(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||hg(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const Kb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function a_(t){return Kb[t]}let ea=null;const cg={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function l_(t,e){if(!ea){const r=Object.keys(cg);ea={};for(let n=0;n<r.length;++n){const i=r[n];ea[t[i]]=cg[i]}}return ea[e]}function dg(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===Ct.HIGH&&r!==Ct.HIGH&&(n=Ct.MEDIUM),`precision ${n} float;
${t}`}else if(r!==Ct.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let vs;function qb(){if(typeof vs=="boolean")return vs;try{vs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{vs=!1}return vs}let Qb=0;const ta={},Jc=class ci{constructor(e,r,n="pixi-shader",i={}){this.extra={},this.id=Qb++,this.vertexSrc=e||ci.defaultVertexSrc,this.fragmentSrc=r||ci.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),ta[n]?(ta[n]++,n+=`-${ta[n]}`):ta[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=dg(this.vertexSrc,ci.defaultVertexPrecision,Ct.HIGH),this.fragmentSrc=dg(this.fragmentSrc,ci.defaultFragmentPrecision,Xb())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return zb}static get defaultFragmentSrc(){return Hb}static from(e,r,n){const i=e+r;let s=ig[i];return s||(ig[i]=s=new ci(e,r,n)),s}};Jc.defaultVertexPrecision=Ct.HIGH,Jc.defaultFragmentPrecision=Ar.apple.device?Ct.HIGH:Ct.MEDIUM;let Cr=Jc,Zb=0;class Xt{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Zb++,this.static=!!r,this.ubo=!!n,e instanceof Me?(this.buffer=e,this.buffer.type=dr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Me(new Float32Array(1)),this.buffer.type=dr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new Xt(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new Xt(e,r,n)}static uboFrom(e,r){return new Xt(e,r??!0,!0)}}class fr{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof Xt?this.uniformGroup=r:this.uniformGroup=new Xt(r):this.uniformGroup=new Xt({}),this.disposeRunner=new Wt("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const i=Cr.from(e,r);return new fr(i,n)}}class Jb{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=Xt.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Cr(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new xe,default:this.defaultGroupCache[e]};return new fr(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class ed{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function eC(){return!Ar.apple.device}function tC(t){let e=!0;const r=z.ADAPTER.getNavigator();if(Ar.tablet||Ar.phone){if(Ar.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Ar.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class ou{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var rC=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,nC=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const As=class Ft extends ou{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=n_,this.vertexSize=6,this.state=mr.for2d(),this.size=Ft.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??tC(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??eC(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return se("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return nC}static get defaultFragmentTemplate(){return rC}setShaderGenerator({vertex:e=Ft.defaultVertexSrc,fragment:r=Ft.defaultFragmentTemplate}={}){this.shaderGenerator=new Jb(e,r)}contextChange(){const e=this.renderer.gl;z.PREFER_ENV===Jn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ft.defaultMaxTextures),this.maxTextures=Mb(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=Ft,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new qc);for(;r.length<i;)r.push(new ed);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,n=Ft._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++J._globalBatch,l=0,u=n[0],h=0;i.copyBoundTextures(s,r);for(let c=0;c<this._bufferSize;++c){const d=e[c];e[c]=null,d._batchEnabled!==a&&(u.count>=r&&(i.boundArray(u,s,a,r),this.buildDrawCalls(u,h,c),h=c,u=n[++l],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,s,a,r),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(let c=0;c<s.length;c++)s[c]=null;J._globalBatch=a}buildDrawCalls(e,r,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Ft._drawCallPool;let u=this._dcIndex,h=this._aIndex,c=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(let f=r;f<n;++f){const p=i[f],v=p._texture.baseTexture,_=J0[v.alphaMode?1:0][p.blendMode];i[f]=null,r<f&&d.blend!==_&&(d.size=c-d.start,r=f,d=l[++u],d.texArray=e,d.start=c),this.packInterleavedGeometry(p,s,o,h,c),h+=p.vertexData.length/2*a,c+=p.indices.length,d.blend=_}r<n&&(d.size=c-d.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const r=this.renderer.texture;for(let n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:n}=this;Ft.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:n}=this.renderer,i=Ft._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:u,start:h,blend:c}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=c,n.set(this.state),r.drawElements(l,u,r.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ft.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=gl(Math.ceil(e/8)),n=rg(r),i=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new Xc(i*this.vertexSize*4)),s}getIndexBuffer(e){const r=gl(Math.ceil(e/12)),n=rg(r),i=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,r,n,i,s){const{uint32View:o,float32View:a}=r,l=i/this.vertexSize,u=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=ve.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let v=0;v<c.length;v+=2)a[i++]=c[v],a[i++]=c[v+1],a[i++]=u[v],a[i++]=u[v+1],o[i++]=p,a[i++]=d;for(let v=0;v<h.length;v++)n[s++]=l+h[v]}};As.defaultBatchSize=4096,As.extension={name:"batch",type:U.RendererPlugin},As._drawCallPool=[],As._textureArrayPool=[];let Pn=As;X.add(Pn);var iC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,sC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const td=class bs extends fr{constructor(e,r,n){const i=Cr.from(e||bs.defaultVertexSrc,r||bs.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=bs.defaultResolution,this.multisample=bs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new mr}apply(e,r,n,i,s){e.applyFilter(this,r,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return sC}static get defaultFragmentSrc(){return iC}};td.defaultResolution=1,td.defaultMultisample=ke.NONE;let rt=td;class _l{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ve(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=e,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}_l.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},_l.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"background"};X.add(_l);class u_{constructor(e){this.renderer=e,this.emptyRenderer=new ou(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,r,n,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<i&&r[c]===h){o[u]=c;continue}for(;l<i;){const d=r[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,r[l]=h;break}}}destroy(){this.renderer=null}}u_.extension={type:U.RendererSystem,name:"batch"};X.add(u_);let fg=0;class xl{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=fg++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=fg++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(z.PREFER_ENV>=Jn.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}xl.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},xl.extension={type:U.RendererSystem,name:"context"};X.add(xl);class rd{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Wt("disposeFramebuffer"),this.multisample=ke.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new J(null,{scaleMode:Sr.NEAREST,resolution:1,mipmap:pr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new J(null,{scaleMode:Sr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:pr.OFF,format:B.DEPTH_COMPONENT,type:K.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class h_ extends J{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:r,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=ke.NONE),super(null,e),this.mipmap=pr.OFF,this.valid=!0,this._clear=new ve([0,0,0,0]),this.framebuffer=new rd(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Or extends go{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,i=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=Pb(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,i){const s=e.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ut.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class c_ extends Or{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;Or.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??z.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ut.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Mf{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const i=r.width,s=r.height;if(n){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,u=e.y/s+a;n=we.add(n,we.NW),this.x0=l+o*we.uX(n),this.y0=u+a*we.uY(n),n=we.add(n,2),this.x1=l+o*we.uX(n),this.y1=u+a*we.uY(n),n=we.add(n,2),this.x2=l+o*we.uX(n),this.y2=u+a*we.uY(n),n=we.add(n,2),this.x3=l+o*we.uX(n),this.y3=u+a*we.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Mf.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const pg=new Mf;function ra(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class W extends wo{constructor(e,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new ee(0,0,1,1)),e instanceof W&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=pg,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ae(o.x,o.y):new ae(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&er[r.url]&&W.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,W.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new W(this.baseTexture,!this.noFrame&&e,r,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===pg&&(this._uvs=new Mf),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=z.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof J){if(!e.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Yn()}`,J.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Yn()}`}s=e._pixiId}let o=er[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof J)?(r.resolution||(r.resolution=Br(e)),o=new W(new J(e,r)),o.baseTexture.cacheId=s,J.addToCache(o.baseTexture,s),W.addToCache(o,s)):!o&&e instanceof J&&(o=new W(e),W.addToCache(o,s)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),i=W.from(e,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,r,n,i){return new W(J.fromBuffer(e,r,n,i))}static fromLoader(e,r,n,i){const s=new J(e,Object.assign({scaleMode:J.defaultOptions.scaleMode,resolution:Br(r)},i)),{resource:o}=s;o instanceof c_&&(o.url=r);const a=new W(s);return n||(n=r),J.addToCache(a.baseTexture,n),W.addToCache(a,n),n!==r&&(J.addToCache(a.baseTexture,r),W.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),er[r]&&er[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),er[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=er[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete er[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)er[e.textureCacheIds[r]]===e&&delete er[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=e,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,h=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return W._EMPTY||(W._EMPTY=new W(new J),ra(W._EMPTY),ra(W._EMPTY.baseTexture)),W._EMPTY}static get WHITE(){if(!W._WHITE){const e=z.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),W._WHITE=new W(J.from(e)),ra(W._WHITE),ra(W._WHITE.baseTexture)}return W._WHITE}}class ti extends W{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new ti(new h_(e))}}class d_{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=ke.NONE){const i=new h_(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new ti(i)}getOptimalTexture(e,r,n=1,i=ke.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=gl(e),r=gl(r),s=((e&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,r,n){const i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||ke.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}d_.SCREEN_KEY=-1;class oC extends fn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class f_ extends fn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Me(this.vertices),this.uvBuffer=new Me(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/e.width,this.uvs[3]=i,this.uvs[4]=n+r.width/e.width,this.uvs[5]=i+r.height/e.height,this.uvs[6]=n,this.uvs[7]=i+r.height/e.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class aC{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ke.NONE,this.sourceFrame=new ee,this.destinationFrame=new ee,this.bindingSourceFrame=new ee,this.bindingDestinationFrame=new ee,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const na=[new ae,new ae,new ae,new ae],yh=new xe;class p_{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new d_,this.statePool=[],this.quad=new oC,this.quadUv=new f_,this.tempRect=new ee,this.activeState={},this.globalUniforms=new Xt({outputFrame:new ee,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new aC,o=n.renderTexture;let a,l;if(o.current){const _=o.current;a=_.resolution,l=_.multisample}else a=n.resolution,l=n.multisample;let u=r[0].resolution||a,h=r[0].multisample??l,c=r[0].padding,d=r[0].autoFit,f=r[0].legacy??!0;for(let _=1;_<r.length;_++){const g=r[_];u=Math.min(u,g.resolution||a),h=Math.min(h,g.multisample??l),c=this.useMaxPadding?Math.max(c,g.padding):c+g.padding,d=d&&g.autoFit,f=f||(g.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=u,s.multisample=h,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(yh.copyFrom(n.projection.transform).invert(),p),d?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const u=i.filterArea;u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=r.sourceFrame.x,u[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,or.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let u=r.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,r.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&r.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,r.resolution),h.filterFrame=u.filterFrame),n[c].apply(this,u,h,or.CLEAR,r);const d=u;u=h,h=d}n[c].apply(this,u,l.renderTexture,or.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=or.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===or.CLEAR||r===or.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(ur.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(ur.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(xe.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,i=ke.NONE){return this.texturePool.getOptimalTexture(e,r,n,i)}getFilterTexture(e,r,n){if(typeof e=="number"){const s=e;e=r,r=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||ke.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=na[0],i=na[1],s=na[2],o=na[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),u=Math.max(n.x,i.x,s.x,o.x),h=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=l,r.width=u-a,r.height=h-l}roundFrame(e,r,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?yh.copyFrom(s):yh.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}}}p_.extension={type:U.RendererSystem,name:"filter"};X.add(p_);class lC{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ke.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const uC=new ee;class m_{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new rd(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ee,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;z.PREFER_ENV===Jn.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,a=r.height>>n,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,i){const s=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=n,s.height=i,this.gl.viewport(e,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,i,s=Rc.COLOR|Rc.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,i),o.clear(s)}initFramebuffer(e){const{gl:r}=this,n=new lC(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,u=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,u=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,u,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=ke.NONE;if(e<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=ke.NONE),n}blit(e,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=i.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new rd(i.width,i.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}r||(r=uC,r.width=i.width,r.height=i.height),n||(n=r);const u=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=r.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,l,n,i):s.renderbufferStorage(s.RENDERBUFFER,l,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ee}destroy(){this.renderer=null}}m_.extension={type:U.RendererSystem,name:"framebuffer"};X.add(m_);const vh={5126:4,5123:2,5121:1};class g_{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;z.PREFER_ENV===Jn.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];r.update(i)}}checkCompatibility(e,r){const n=e.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const n=e.attributes,i=r.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=e.buffers,d=e.attributes,f={},p={};for(const v in c)f[v]=0,p[v]=0;for(const v in d)!d[v].size&&a.attributeData[v]?d[v].size=a.attributeData[v].size:d[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[v].buffer]+=d[v].size*vh[d[v].type];for(const v in d){const _=d[v],g=_.size;_.stride===void 0&&(f[_.buffer]===g*vh[_.type]?_.stride=0:_.stride=f[_.buffer]),_.start===void 0&&(_.start=p[_.buffer],p[_.buffer]+=g*vh[_.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let v=0;v<c.length;v++){const _=c[v];o.bind(_),n&&_._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=h,u[l]=h,i.bindVertexArray(null),o.unbind(dr.ARRAY_BUFFER),h}disposeGeometry(e,r){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&o.dispose(s[l],r))}if(!r){for(const l in n)if(l[0]==="g"){const u=n[l];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[i];if(r.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=r.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,r||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(e,r||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,r||o.getSize(),i||1):s.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}g_.extension={type:U.RendererSystem,name:"geometry"};X.add(g_);const mg=new xe;class y_{constructor(e,r){this._texture=e,this.mapCoord=new xe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(mg.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(mg));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(r._frame.x+l+u)/o.width,a[1]=(r._frame.y+l+u)/o.height,a[2]=(r._frame.x+r._frame.width-l+u)/o.width,a[3]=(r._frame.y+r._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var hC=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,cC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class dC extends rt{constructor(e,r,n){let i=null;typeof e!="string"&&r===void 0&&n===void 0&&(i=e,e=void 0,r=void 0,n=void 0),super(e||cC,r||hC,n),this.maskSprite=i,this.maskMatrix=new xe}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new y_(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,i))}}class fC{constructor(e=null){this.type=Fe.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=rt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Fe.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class v_{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new fC;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Fe.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Fe.SCISSOR:this.renderer.scissor.push(n);break;case Fe.STENCIL:this.renderer.stencil.push(n);break;case Fe.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Fe.COLOR:this.pushColorMask(n);break}n.type===Fe.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Fe.SCISSOR:this.renderer.scissor.pop(r);break;case Fe.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Fe.SPRITE:this.popSpriteMask(r);break;case Fe.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Fe.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=Fe.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Fe.SCISSOR:e.type=Fe.STENCIL:e.type=Fe.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new dC])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=r;const s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}v_.extension={type:U.RendererSystem,name:"mask"};X.add(v_);class __{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const gg=new xe,yg=[],x_=class Ma extends __{constructor(e){super(e),this.glConst=z.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,yg.pop()??new ee);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||Ma.isMatrixRotated(r.worldTransform)||Ma.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,r,n,i,s){Ma.isMatrixRotated(s)||(s=s?gg.copyFrom(s):gg.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&yg.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};x_.extension={type:U.RendererSystem,name:"scissor"};let pC=x_;X.add(pC);class E_ extends __{constructor(e){super(e),this.glConst=z.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}E_.extension={type:U.RendererSystem,name:"stencil"};X.add(E_);class w_{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return se("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return se("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return se("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}w_.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"_plugin"};X.add(w_);class T_{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new xe,this.transform=null}update(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(e){}destroy(){this.renderer=null}}T_.extension={type:U.RendererSystem,name:"projection"};X.add(T_);const mC=new Rf,vg=new ee;class S_{constructor(e){this.renderer=e,this._tempMatrix=new xe}generateTexture(e,r){const{region:n,...i}=r||{},s=(n==null?void 0:n.copyTo(vg))||e.getLocalBounds(vg,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=ti.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=mC,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}S_.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"textureGenerator"};X.add(S_);const xn=new ee,_s=new ee;class A_{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ee,this.destinationFrame=new ee,this.viewportFrame=new ee}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,r||(xn.width=e.frame.width,xn.height=e.frame.height,r=xn),n||(_s.x=e.frame.x,_s.y=e.frame.y,_s.width=r.width,_s.height=r.height,n=_s),o=s.framebuffer):(a=i.resolution,r||(xn.width=i._view.screen.width,xn.height=i._view.screen.height,r=xn),n||(n=xn,n.width=r.width,n.height=r.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,r,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=ve.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:c}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}A_.extension={type:U.RendererSystem,name:"renderTexture"};X.add(A_);class gC{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function yC(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=l_(e,s.type),a={type:o,name:s.name,size:a_(o),location:e.getAttribLocation(t,s.name)};r[s.name]=a}return r}function vC(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=l_(e,s.type);r[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:s_(l,s.size)}}return r}function _C(t,e){var a;const r=ug(t,t.VERTEX_SHADER,e.vertexSrc),n=ug(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||Yb(t,i,r,n),e.attributeData=yC(i,t),e.uniformData=vC(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,h)=>u>h?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,t.bindAttribLocation(i,u,l[u]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:s_(u.type,u.size)}}return new gC(i,o)}function xC(t,e,r,n,i){r.buffer.update(i)}const EC={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},b_={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function wC(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(r=b_[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function TC(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,i)=>n.index-i.index),r}function SC(t,e){if(!t.autoManage)return{size:0,syncFunc:xC};const r=TC(t.uniforms,e),{uboElements:n,size:i}=wC(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=t.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<Gi.length;c++){const d=Gi[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Gi[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=a_(a.data.type),d=Math.max(b_[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=EC[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let AC=0;const ia={textureCount:0,uboCount:0};class C_{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=AC++}systemCheck(){if(!qb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(ia.textureCount=0,ia.uboCount=0,this.syncUniformGroup(e.uniformGroup,ia)),i}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Vb(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,ia,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=SC(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,i=_C(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}C_.extension={type:U.RendererSystem,name:"shader"};X.add(C_);class El{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.3 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}El.defaultOptions={hello:!1},El.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"startup"};X.add(El);function bC(t,e=[]){return e[Q.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.ADD]=[t.ONE,t.ONE],e[Q.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.NONE]=[0,0],e[Q.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Q.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Q.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Q.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Q.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Q.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Q.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Q.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Q.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Q.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Q.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const CC=0,PC=1,IC=2,RC=3,MC=4,DC=5,P_=class nd{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Q.NONE,this._blendEq=!1,this.map=[],this.map[CC]=this.setBlend,this.map[PC]=this.setOffset,this.map[IC]=this.setCullFace,this.map[RC]=this.setDepthTest,this.map[MC]=this.setFrontFace,this.map[DC]=this.setDepthMask,this.checks=[],this.defaultState=new mr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=bC(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(nd.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(nd.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};P_.extension={type:U.RendererSystem,name:"state"};let NC=P_;X.add(NC);class kC extends wo{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(i=>e.systems[i]),n=[...r,...Object.keys(e.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(r=>{this.runners[r]=new Wt(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](r[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Cs=class Da{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Da.defaultMaxIdle,this.checkCountMax=Da.defaultCheckCountMax,this.mode=Da.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==wf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let n=!1;for(let i=0;i<r.length;i++){const s=r[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<r.length;s++)r[s]!==null&&(r[i++]=r[s]);r.length=i}}unload(e){const r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Cs.defaultMode=wf.AUTO,Cs.defaultMaxIdle=60*60,Cs.defaultCheckCountMax=60*10,Cs.extension={type:U.RendererSystem,name:"textureGC"};let In=Cs;X.add(In);class _h{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=K.UNSIGNED_BYTE,this.internalFormat=B.RGBA,this.samplerType=0}}function BC(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:H.FLOAT,[t.RGBA]:H.FLOAT,[t.ALPHA]:H.FLOAT,[t.LUMINANCE]:H.FLOAT,[t.LUMINANCE_ALPHA]:H.FLOAT,[t.R8]:H.FLOAT,[t.R8_SNORM]:H.FLOAT,[t.RG8]:H.FLOAT,[t.RG8_SNORM]:H.FLOAT,[t.RGB8]:H.FLOAT,[t.RGB8_SNORM]:H.FLOAT,[t.RGB565]:H.FLOAT,[t.RGBA4]:H.FLOAT,[t.RGB5_A1]:H.FLOAT,[t.RGBA8]:H.FLOAT,[t.RGBA8_SNORM]:H.FLOAT,[t.RGB10_A2]:H.FLOAT,[t.RGB10_A2UI]:H.FLOAT,[t.SRGB8]:H.FLOAT,[t.SRGB8_ALPHA8]:H.FLOAT,[t.R16F]:H.FLOAT,[t.RG16F]:H.FLOAT,[t.RGB16F]:H.FLOAT,[t.RGBA16F]:H.FLOAT,[t.R32F]:H.FLOAT,[t.RG32F]:H.FLOAT,[t.RGB32F]:H.FLOAT,[t.RGBA32F]:H.FLOAT,[t.R11F_G11F_B10F]:H.FLOAT,[t.RGB9_E5]:H.FLOAT,[t.R8I]:H.INT,[t.R8UI]:H.UINT,[t.R16I]:H.INT,[t.R16UI]:H.UINT,[t.R32I]:H.INT,[t.R32UI]:H.UINT,[t.RG8I]:H.INT,[t.RG8UI]:H.UINT,[t.RG16I]:H.INT,[t.RG16UI]:H.UINT,[t.RG32I]:H.INT,[t.RG32UI]:H.UINT,[t.RGB8I]:H.INT,[t.RGB8UI]:H.UINT,[t.RGB16I]:H.INT,[t.RGB16UI]:H.UINT,[t.RGB32I]:H.INT,[t.RGB32UI]:H.UINT,[t.RGBA8I]:H.INT,[t.RGBA8UI]:H.UINT,[t.RGBA16I]:H.INT,[t.RGBA16UI]:H.UINT,[t.RGBA32I]:H.INT,[t.RGBA32UI]:H.UINT,[t.DEPTH_COMPONENT16]:H.FLOAT,[t.DEPTH_COMPONENT24]:H.FLOAT,[t.DEPTH_COMPONENT32F]:H.FLOAT,[t.DEPTH_STENCIL]:H.FLOAT,[t.DEPTH24_STENCIL8]:H.FLOAT,[t.DEPTH32F_STENCIL8]:H.FLOAT}:e={[t.RGB]:H.FLOAT,[t.RGBA]:H.FLOAT,[t.ALPHA]:H.FLOAT,[t.LUMINANCE]:H.FLOAT,[t.LUMINANCE_ALPHA]:H.FLOAT,[t.DEPTH_STENCIL]:H.FLOAT},e}function OC(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[K.UNSIGNED_BYTE]:{[B.RGBA]:t.RGBA8,[B.RGB]:t.RGB8,[B.RG]:t.RG8,[B.RED]:t.R8,[B.RGBA_INTEGER]:t.RGBA8UI,[B.RGB_INTEGER]:t.RGB8UI,[B.RG_INTEGER]:t.RG8UI,[B.RED_INTEGER]:t.R8UI,[B.ALPHA]:t.ALPHA,[B.LUMINANCE]:t.LUMINANCE,[B.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[K.BYTE]:{[B.RGBA]:t.RGBA8_SNORM,[B.RGB]:t.RGB8_SNORM,[B.RG]:t.RG8_SNORM,[B.RED]:t.R8_SNORM,[B.RGBA_INTEGER]:t.RGBA8I,[B.RGB_INTEGER]:t.RGB8I,[B.RG_INTEGER]:t.RG8I,[B.RED_INTEGER]:t.R8I},[K.UNSIGNED_SHORT]:{[B.RGBA_INTEGER]:t.RGBA16UI,[B.RGB_INTEGER]:t.RGB16UI,[B.RG_INTEGER]:t.RG16UI,[B.RED_INTEGER]:t.R16UI,[B.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[K.SHORT]:{[B.RGBA_INTEGER]:t.RGBA16I,[B.RGB_INTEGER]:t.RGB16I,[B.RG_INTEGER]:t.RG16I,[B.RED_INTEGER]:t.R16I},[K.UNSIGNED_INT]:{[B.RGBA_INTEGER]:t.RGBA32UI,[B.RGB_INTEGER]:t.RGB32UI,[B.RG_INTEGER]:t.RG32UI,[B.RED_INTEGER]:t.R32UI,[B.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[K.INT]:{[B.RGBA_INTEGER]:t.RGBA32I,[B.RGB_INTEGER]:t.RGB32I,[B.RG_INTEGER]:t.RG32I,[B.RED_INTEGER]:t.R32I},[K.FLOAT]:{[B.RGBA]:t.RGBA32F,[B.RGB]:t.RGB32F,[B.RG]:t.RG32F,[B.RED]:t.R32F,[B.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[K.HALF_FLOAT]:{[B.RGBA]:t.RGBA16F,[B.RGB]:t.RGB16F,[B.RG]:t.RG16F,[B.RED]:t.R16F},[K.UNSIGNED_SHORT_5_6_5]:{[B.RGB]:t.RGB565},[K.UNSIGNED_SHORT_4_4_4_4]:{[B.RGBA]:t.RGBA4},[K.UNSIGNED_SHORT_5_5_5_1]:{[B.RGBA]:t.RGB5_A1},[K.UNSIGNED_INT_2_10_10_10_REV]:{[B.RGBA]:t.RGB10_A2,[B.RGBA_INTEGER]:t.RGB10_A2UI},[K.UNSIGNED_INT_10F_11F_11F_REV]:{[B.RGB]:t.R11F_G11F_B10F},[K.UNSIGNED_INT_5_9_9_9_REV]:{[B.RGB]:t.RGB9_E5},[K.UNSIGNED_INT_24_8]:{[B.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[K.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[B.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[K.UNSIGNED_BYTE]:{[B.RGBA]:t.RGBA,[B.RGB]:t.RGB,[B.ALPHA]:t.ALPHA,[B.LUMINANCE]:t.LUMINANCE,[B.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[K.UNSIGNED_SHORT_5_6_5]:{[B.RGB]:t.RGB},[K.UNSIGNED_SHORT_4_4_4_4]:{[B.RGBA]:t.RGBA},[K.UNSIGNED_SHORT_5_5_5_1]:{[B.RGBA]:t.RGBA}},e}class I_{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new J,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=OC(e),this.samplerTypes=BC(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new _h(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new _h(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==H.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new _h(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??H.FLOAT,this.webGLVersion===2&&e.type===K.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var i;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(i=e.resource)==null?void 0:i.upload(n,e,r))r.samplerType!==H.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=n.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,a.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(e);i!==-1&&Ui(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===pr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=un.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==pr.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Sr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Sr.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Sr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Sr.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}I_.extension={type:U.RendererSystem,name:"texture"};X.add(I_);class R_{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();e._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(a,r))}n&&(r||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}R_.extension={type:U.RendererSystem,name:"transformFeedback"};X.add(R_);class wl{constructor(e){this.renderer=e}init(e){this.screen=new ee(0,0,e.width,e.height),this.element=e.view||z.ADAPTER.createCanvas(),this.resolution=e.resolution||z.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}wl.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},wl.extension={type:[U.RendererSystem,U.CanvasRendererSystem],name:"_view"};X.add(wl);z.PREFER_ENV=Jn.WEBGL2;z.STRICT_TEXTURE_CACHE=!1;z.RENDER_OPTIONS={...xl.defaultOptions,..._l.defaultOptions,...wl.defaultOptions,...El.defaultOptions};Object.defineProperties(z,{WRAP_MODE:{get(){return J.defaultOptions.wrapMode},set(t){se("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),J.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return J.defaultOptions.scaleMode},set(t){se("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),J.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return J.defaultOptions.mipmap},set(t){se("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),J.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return J.defaultOptions.anisotropicLevel},set(t){se("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),J.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return se("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),rt.defaultResolution},set(t){rt.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return se("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),rt.defaultMultisample},set(t){rt.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Pn.defaultMaxTextures},set(t){se("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Pn.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Pn.defaultBatchSize},set(t){se("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Pn.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Pn.canUploadSameBuffer},set(t){se("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Pn.canUploadSameBuffer=t}},GC_MODE:{get(){return In.defaultMode},set(t){se("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),In.defaultMode=t}},GC_MAX_IDLE:{get(){return In.defaultMaxIdle},set(t){se("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),In.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return In.defaultCheckCountMax},set(t){se("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),In.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Cr.defaultVertexPrecision},set(t){se("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Cr.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Cr.defaultFragmentPrecision},set(t){se("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Cr.defaultFragmentPrecision=t}}});var Kn=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Kn||{});class xh{constructor(e,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const M_=class pt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xh(null,null,1/0),this.deltaMS=1/pt.targetFPMS,this.elapsedMS=1/pt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=Kn.NORMAL){return this._addListener(new xh(e,r,n))}addOnce(e,r,n=Kn.NORMAL){return this._addListener(new xh(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*pt.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,pt.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!pt._shared){const e=pt._shared=new pt;e.autoStart=!0,e._protected=!0}return pt._shared}static get system(){if(!pt._system){const e=pt._system=new pt;e.autoStart=!0,e._protected=!0}return pt._system}};M_.targetFPMS=.06;let yt=M_;Object.defineProperties(z,{TARGET_FPMS:{get(){return yt.targetFPMS},set(t){se("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),yt.targetFPMS=t}}});class D_{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Kn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?yt.shared:new yt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}D_.extension=U.Application;X.add(D_);const N_=[];X.handleByList(U.Renderer,N_);function FC(t){for(const e of N_)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var LC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,UC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const GC=LC,k_=UC;class B_{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=ke.HIGH?this.multisample=ke.HIGH:r>=ke.MEDIUM?this.multisample=ke.MEDIUM:r>=ke.LOW?this.multisample=ke.LOW:this.multisample=ke.NONE}destroy(){}}B_.extension={type:U.RendererSystem,name:"_multisample"};X.add(B_);class HC{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class O_{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(e,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,r.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new HC(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}O_.extension={type:U.RendererSystem,name:"buffer"};X.add(O_);class F_{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}F_.extension={type:U.RendererSystem,name:"objectRenderer"};X.add(F_);const Na=class id extends kC{constructor(e){super(),this.type=x0.WEBGL,e=Object.assign({},z.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Xt({projectionMatrix:new xe},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:id.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(se("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=id.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:hb()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return se("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return se("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return se("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return se("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){se("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return se("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){se("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return se("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};Na.extension={type:U.Renderer,priority:1},Na.__plugins={},Na.__systems={};let Df=Na;X.handleByMap(U.RendererPlugin,Df.__plugins);X.handleByMap(U.RendererSystem,Df.__systems);X.add(Df);class L_ extends go{constructor(e,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new J;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof go?this.addResourceAt(e[n],n):this.addResourceAt(r_(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class zC extends L_{constructor(e,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Oi.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let l=0;l<i;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,r.format,n.type,u.resource.source))}return!0}}class $C extends Or{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const U_=class Ps extends L_{constructor(e,r){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=r||{};if(e&&e.length!==Ps.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<Ps.SIDES;a++)this.items[a].target=Oi.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Oi.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Oi.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,n){const i=this.itemDirtyIds;for(let s=0;s<Ps.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Ps.SIDES}};U_.SIDES=6;let jC=U_;class Pi extends Or{constructor(e,r){r=r||{};let n,i,s;typeof e=="string"?(n=Pi.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??s,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await z.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ut.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Pi._EMPTY=Pi._EMPTY??z.ADAPTER.createCanvas(0,0),Pi._EMPTY}}const sd=class ka extends Or{constructor(e,r){r=r||{},super(z.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},ka.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Or.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=r*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*r,s=this._overrideHeight||this._overrideWidth/r*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${Yn()}`,o.getContext("2d").drawImage(e,0,0,r,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const r=ka.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&ka.SVG_XML.test(e)}};sd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,sd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let od=sd;class VC extends Or{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const ad=class ld extends Or{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Or.crossOrigin(n,i,r.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);l=l||ld.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=yt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(yt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(yt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(yt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||ld.TYPES.includes(r)}};ad.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ad.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let G_=ad;Yc.push(Pi,c_,$C,G_,VC,od,ru,jC,zC);class Tl{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ee.EMPTY:(e=e||new ee(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:i,c:s,d:o,tx:a,ty:l}=e,u=n*r.x+s*r.y+a,h=i*r.x+o*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,r,n,i,s){this.addFrameMatrix(e.worldTransform,r,n,i,s)}addFrameMatrix(e,r,n,i,s){const o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,c=e.ty;let d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,_=o*r+l*n+h,g=a*r+u*n+c;d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,v=g>v?g:v,_=o*i+l*n+h,g=a*i+u*n+c,d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,v=g>v?g:v,_=o*r+l*s+h,g=a*r+u*s+c,d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,v=g>v?g:v,_=o*i+l*s+h,g=a*i+u*s+c,d=_<d?_:d,f=g<f?g:f,p=_>p?_:p,v=g>v?g:v,this.minX=d,this.minY=f,this.maxX=p,this.maxY=v}addVertexData(e,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<n;l+=2){const u=e[l],h=e[l+1];i=u<i?u:i,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)}addVerticesMatrix(e,r,n,i,s=0,o=s){const a=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,d=e.ty;let f=this.minX,p=this.minY,v=this.maxX,_=this.maxY;for(let g=n;g<i;g+=2){const y=r[g],m=r[g+1],x=a*y+u*m+c,E=h*m+l*y+d;f=Math.min(f,x-s),v=Math.max(v,x+s),p=Math.min(p,E-o),_=Math.max(_,E+o)}this.minX=f,this.minY=p,this.maxX=v,this.maxY=_}addBounds(e){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,i,s,o){e-=s,r-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class Ce extends wo{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Rf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Tl,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(Ce.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new ee),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ee),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Tl);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,i){return r&&(e=r.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new WC),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Lb}set angle(e){this.transform.rotation=e*Ub}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class WC extends Ce{constructor(){super(...arguments),this.sortDirty=null}}Ce.prototype.displayObjectUpdateTransform=Ce.prototype.updateTransform;const XC=new xe;function YC(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const H_=class ud extends Ce{constructor(){super(),this.children=[],this.sortableChildren=ud.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const n=this.getChildIndex(e),i=this.getChildIndex(r);this.children[n]=r,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Ui(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,Ui(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Ui(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const n=e,i=r,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,n=this.children.length;r<n;++r){const i=this.children[r];i._lastSortedIndex=r,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(YC),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const n=super.getLocalBounds(e);if(!r)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==ud.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=XC.copyFrom(i),i.prepend(s)):i=s),n&&r.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,a;const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<r.length;l++)r[l].enabled&&this._enabledFilters.push(r[l])}const i=r&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Fe.NONE));if(i&&e.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),r&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(r)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};H_.defaultSortableChildren=!1;let it=H_;it.prototype.containerUpdateTransform=it.prototype.updateTransform;Object.defineProperties(z,{SORTABLE_CHILDREN:{get(){return it.defaultSortableChildren},set(t){se("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),it.defaultSortableChildren=t}}});const xs=new ae,KC=new Uint16Array([0,1,2,0,2,3]);class os extends it{constructor(e){super(),this._anchor=new br(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ve(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Q.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||W.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=KC,this.pluginName="batch",this.isSprite=!0,this._roundPixels=z.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Jr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Jr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this.vertexData,h=e.trim,c=e.orig,d=this._anchor;let f=0,p=0,v=0,_=0;if(h?(p=h.x-d._x*c.width,f=p+h.width,_=h.y-d._y*c.height,v=_+h.height):(p=-d._x*c.width,f=p+c.width,_=-d._y*c.height,v=_+c.height),u[0]=n*p+s*_+a,u[1]=o*_+i*p+l,u[2]=n*f+s*_+a,u[3]=o*_+i*f+l,u[4]=n*f+s*v+a,u[5]=o*v+i*f+l,u[6]=n*p+s*v+a,u[7]=o*v+i*p+l,this._roundPixels){const g=z.RESOLUTION;for(let y=0;y<u.length;++y)u[y]=Math.round(u[y]*g)/g}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-i._x*n.width,f=d+n.width,p=-i._y*n.height,v=p+n.height;if(r[0]=o*d+l*p+h,r[1]=u*p+a*d+c,r[2]=o*f+l*p+h,r[3]=u*p+a*f+c,r[4]=o*f+l*v+h,r[5]=u*v+a*f+c,r[6]=o*d+l*v+h,r[7]=u*v+a*d+c,this._roundPixels){const _=z.RESOLUTION;for(let g=0;g<r.length;++g)r[g]=Math.round(r[g]*_)/_}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Tl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ee),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,xs);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return xs.x>=i&&xs.x<i+r&&(s=-n*this.anchor.y,xs.y>=s&&xs.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const n=e instanceof W?e:W.from(e,r);return new os(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Jr(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Jr(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||W.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const z_=new xe;Ce.prototype._cacheAsBitmap=!1;Ce.prototype._cacheData=null;Ce.prototype._cacheAsBitmapResolution=null;Ce.prototype._cacheAsBitmapMultisample=null;class qC{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ce.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new qC),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ce.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Ce.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(new ee,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;r.pad(p)}const n=this.cacheAsBitmapResolution||t.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=ti.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??t.multisample}),u=`cacheAsBitmap_${Yn()}`;this._cacheData.textureCacheId=u,J.addToCache(l.baseTexture,u),W.addToCache(l,u);const h=this.transform.localTransform.copyTo(z_).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new os(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(r.x/r.width),c.anchor.y=-(r.y/r.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Ce.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Ce.prototype._initCachedDisplayObjectCanvas=function(t){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(new ee,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=ti.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${Yn()}`;this._cacheData.textureCacheId=a,J.addToCache(o.baseTexture,a),W.addToCache(o,a);const l=z_;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const u=new os(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ce.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ce.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ce.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,J.removeFromCache(this._cacheData.textureCacheId),W.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ce.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Ce.prototype.name=null;it.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const i=this.children[r];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};Ce.prototype.getGlobalPosition=function(t=new ae,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var QC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class ZC extends rt{constructor(e=1){super(GC,QC,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const JC={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},eP=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function tP(t){const e=JC[t],r=e.length;let n=eP,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const rP=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function nP(t,e){const r=Math.ceil(t/2);let n=rP,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}class hd extends rt{constructor(e,r=8,n=4,i=rt.defaultResolution,s=5){const o=nP(s,e),a=tP(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=r,l=s;this.state.blend=!1,e.applyFilter(this,a,l,or.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,or.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class iP extends rt{constructor(e=8,r=4,n=rt.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new hd(!0,e,r,n,i),this.blurYFilter=new hd(!1,e,r,n,i),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,r,a,or.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,r,n,i):this.blurXFilter.apply(e,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var sP=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class cd extends rt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(k_,sP,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,i,s]=ve.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,u=o*(1-n)-a*i,h=o*(1-n)+a*i,c=o*(1-n)+a*i,d=n+o*(1-n),f=o*(1-n)-a*i,p=o*(1-n)-a*i,v=o*(1-n)+a*i,_=n+o*(1-n),g=[l,u,h,0,0,c,d,f,0,0,p,v,_,0,0,0,0,0,1,0];this._loadMatrix(g,r)}contrast(e,r){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,i,s){e=e||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=ve.shared,[a,l,u]=o.setValue(n).toArray(),[h,c,d]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,h,c,d,r,0,a-h,l-c,u-d,0,0];this._loadMatrix(f,s)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}cd.prototype.grayscale=cd.prototype.greyscale;var oP=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,aP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class lP extends rt{constructor(e,r){const n=new xe;e.renderable=!1,super(aP,oP,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new ae(r,r)}apply(e,r,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var uP=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,hP=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class cP extends rt{constructor(){super(hP,uP)}}var dP=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class fP extends rt{constructor(e=.5,r=Math.random()){super(k_,dP,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const _g={AlphaFilter:ZC,BlurFilter:iP,BlurFilterPass:hd,ColorMatrixFilter:cd,DisplacementFilter:lP,FXAAFilter:cP,NoiseFilter:fP};Object.entries(_g).forEach(([t,e])=>{Object.defineProperty(_g,t,{get(){return se("7.1.0",`filters.${t} has moved to ${t}`),e}})});class pP{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(yt.system.add(this.tickerUpdate,this,Kn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(yt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Yr=new pP;class bo{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=bo.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ae,this.page=new ae,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Sl extends bo{constructor(){super(...arguments),this.client=new ae,this.movement=new ae,this.offset=new ae,this.global=new ae,this.screen=new ae}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,i,s,o,a,l,u,h,c,d,f,p,v){throw new Error("Method not implemented.")}}class Lt extends Sl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Hi extends Sl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Hi.DOM_DELTA_PIXEL=0,Hi.DOM_DELTA_LINE=1,Hi.DOM_DELTA_PAGE=2;const mP=2048,gP=new ae,Eh=new ae;class yP{constructor(e){this.dispatch=new wo,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Yr.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,gP.set(e,r),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<mP&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Yr.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const d=h[c],f=this.hitTestMoveRecursive(d,this._isInteractive(r)?r:d.eventMode,n,i,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(r),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&i(e,n)?u?[e]:[]:null}hitTestRecursive(e,r,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Yr.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const h=l[u],c=this.hitTestRecursive(h,this._isInteractive(r)?r:h.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const d=e.isInteractive();return(c.length>0||d)&&c.push(e),c}}}const o=this._isInteractive(r),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var n;if(e.hitArea&&(e.worldTransform.applyInverse(r,Eh),!e.hitArea.contains(Eh.x,Eh.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var s,o;r=r??e.type;const n=`on${r}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof Lt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var l,u;if(!(e instanceof Lt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==r.target){const h=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,h,s);if(this.dispatchEvent(c,"pointerout"),n&&this.dispatchEvent(c,"mouseout"),!r.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!r.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==r.target){const h=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(r,h);this.dispatchEvent(c,"pointerover"),n&&this.dispatchEvent(c,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==r.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=r.target)==null?void 0:u.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof Lt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Lt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Lt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const l=i.clicksByButton[e.button];if(l.target===a.target&&r-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=r,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Lt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Hi)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const i=this.allocateEvent(Lt);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(e){const r=this.allocateEvent(Hi);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(Lt);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof Lt&&r instanceof Lt&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof Sl&&r instanceof Sl&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const vP=1,_P={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},dd=class fd{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new yP(null),Yr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Lt(null),this.rootWheelEvent=new Hi(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...fd.defaultEventFeatures},{set:(r,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),r[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,fd._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=r.length;n<i;n++){const s=r[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Yr.pointerMoved();const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const n=r!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,Yr.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Yr.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Yr.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(r-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,r.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=vP),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=_P[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};dd.extension={name:"events",type:[U.RendererSystem,U.CanvasRendererSystem]},dd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let pd=dd;X.add(pd);function xg(t){return t==="dynamic"||t==="static"}const xP={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??xg(pd.defaultEventMode)},set interactive(t){se("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??pd.defaultEventMode},set eventMode(t){this._internalInteractive=xg(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof r=="object"?r.signal:void 0,s=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof bo))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};Ce.mixin(xP);const EP={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ce.mixin(EP);const wP=9,sa=100,TP=0,SP=0,Eg=2,wg=1,AP=-1e3,bP=-1e3,CP=2;class $_{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ar.tablet||Ar.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${sa}px`,r.style.height=`${sa}px`,r.style.position="absolute",r.style.top=`${TP}px`,r.style.left=`${SP}px`,r.style.zIndex=Eg.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${wg}px`,e.style.height=`${wg}px`,e.style.position="absolute",e.style.top=`${AP}px`,e.style.left=`${bP}px`,e.style.zIndex=CP.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(Ar.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,h=s/a*l;let c=this.div;c.style.left=`${r}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Ui(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const v=f.worldTransform;f.hitArea?(c.style.left=`${(v.tx+p.x*v.a)*u}px`,c.style.top=`${(v.ty+p.y*v.d)*h}px`,c.style.width=`${p.width*v.a*u}px`,c.style.height=`${p.height*v.d*h}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*u}px`,c.style.top=`${p.y*h}px`,c.style.width=`${p.width*u}px`,c.style.height=`${p.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${sa}px`,r.style.height=`${sa}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=Eg.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new bo(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===wP&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}$_.extension={name:"accessibility",type:[U.RendererPlugin,U.CanvasRendererPlugin]};X.add($_);const j_=class md{constructor(e){this.stage=new it,e=Object.assign({forceCanvas:!1},e),this.renderer=FC(e),md._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,r){const n=md._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};j_._plugins=[];let V_=j_;X.handleByList(U.Application,V_._plugins);class W_{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}W_.extension=U.Application;X.add(W_);const Tg={loader:U.LoadParser,resolver:U.ResolveParser,cache:U.CacheParser,detection:U.DetectionParser};X.handle(U.Asset,t=>{const e=t.ref;Object.entries(Tg).filter(([r])=>!!e[r]).forEach(([r,n])=>X.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(Tg).filter(r=>!!e[r]).forEach(r=>X.remove(e[r]))});class PP{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function as(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function vn(t,e){const r=t.split("?")[0],n=je.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const zt=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t),gd=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function X_(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?X_(t.replace(n[r],a),e,r+1,n,i):i.push(t.replace(n[r],a))}}function IP(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),X_(t,i,0,r,n)}else n.push(t);return n}const Al=t=>!Array.isArray(t);class RP{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=zt(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){i=l.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{const l=i?i[a]:r;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof W){const a=r;n.forEach(l=>{a.baseTexture!==W.EMPTY.baseTexture&&J.addToCache(a.baseTexture,l),W.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Mn=new RP;class MP{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,r,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,r,this),n.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,i,r,this))&&(i=await u.parse(i,r,this)||i,n.parser=u)}return i})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Al(e),o=zt(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const h=je.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),i[u.src]=await this.promiseCache[h].promise,r&&r(++n/a)}catch(c){throw delete this.promiseCache[h],delete i[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const r=zt(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const i=je.toAbsolute(n.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var Kt=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Kt||{});const DP=".json",NP="application/json",kP={extension:{type:U.LoadParser,priority:Kt.Low},name:"loadJson",test(t){return as(t,NP)||vn(t,DP)},async load(t){return await(await z.ADAPTER.fetch(t)).json()}};X.add(kP);const BP=".txt",OP="text/plain",FP={name:"loadTxt",extension:{type:U.LoadParser,priority:Kt.Low},test(t){return as(t,OP)||vn(t,BP)},async load(t){return await(await z.ADAPTER.fetch(t)).text()}};X.add(FP);const LP=["normal","bold","100","200","300","400","500","600","700","800","900"],UP=[".ttf",".otf",".woff",".woff2"],GP=["font/ttf","font/otf","font/woff","font/woff2"],HP=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function zP(t){const e=je.extname(t),r=je.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=r.length>0;for(const s of r)if(!s.match(HP)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const $P=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function jP(t){return $P.test(t)?t:encodeURI(t)}const VP={extension:{type:U.LoadParser,priority:Kt.Low},name:"loadWebFont",test(t){return as(t,GP)||vn(t,UP)},async load(t,e){var n,i,s;const r=z.ADAPTER.getFontFaceSet();if(r){const o=[],a=((n=e.data)==null?void 0:n.family)??zP(t),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(h=>LP.includes(h)))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${jP(t)})`,{...u,weight:c});await d.load(),r.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>z.ADAPTER.getFontFaceSet().delete(e))}};X.add(VP);const WP=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let zi=null,yd=class{constructor(){zi||(zi=URL.createObjectURL(new Blob([WP],{type:"application/javascript"}))),this.worker=new Worker(zi)}};yd.revokeObjectURL=function(){zi&&(URL.revokeObjectURL(zi),zi=null)};const XP=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let $i=null;class Y_{constructor(){$i||($i=URL.createObjectURL(new Blob([XP],{type:"application/javascript"}))),this.worker=new Worker($i)}}Y_.revokeObjectURL=function(){$i&&(URL.revokeObjectURL($i),$i=null)};let Sg=0,wh;class YP{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new yd;r.addEventListener("message",n=>{r.terminate(),yd.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){wh===void 0&&(wh=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<wh&&(this._createdWorkers++,e=new Y_().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[Sg]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:Sg++,id:n})}}const Ag=new YP;function Co(t,e,r){t.resource.internal=!0;const n=new W(t),i=()=>{delete e.promiseCache[r],Mn.has(r)&&Mn.remove(r)};return n.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const KP=[".jpeg",".jpg",".png",".webp",".avif"],qP=["image/jpeg","image/png","image/webp","image/avif"];async function QP(t){const e=await z.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const au={name:"loadTextures",extension:{type:U.LoadParser,priority:Kt.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return as(t,qP)||vn(t,KP)},async load(t,e,r){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await Ag.isImageBitmapSupported()?i=await Ag.loadImageBitmap(t):i=await QP(t):i=await new Promise((l,u)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=t,h.complete?l(h):(h.onload=()=>l(h),h.onerror=c=>u(c))});const s={...e.data};s.resolution??(s.resolution=Br(t)),n&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new J(i,s);return o.resource.src=t,Co(o,r,t)},unload(t){t.destroy(!0)}};X.add(au);const ZP=".svg",JP="image/svg+xml",eI={extension:{type:U.LoadParser,priority:Kt.High},name:"loadSVG",test(t){return as(t,JP)||vn(t,ZP)},async testParse(t){return od.test(t)},async parse(t,e,r){var s;const n=new od(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new J(n,{resolution:Br(t),...e==null?void 0:e.data});return i.resource.src=e.src,Co(i,r,e.src)},async load(t,e){return(await z.ADAPTER.fetch(t)).text()},unload:au.unload};X.add(eI);const tI=[".mp4",".m4v",".webm",".ogv"],rI=["video/mp4","video/webm","video/ogg"],nI={name:"loadVideo",extension:{type:U.LoadParser,priority:Kt.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return as(t,rI)||vn(t,tI)},async load(t,e,r){var o;let n;const i=await(await z.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new G_(s,a);await l.load();const u=new J(l,{alphaMode:await ub(),resolution:Br(t),...e==null?void 0:e.data});u.resource.src=t,n=Co(u,r,t),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return n},unload(t){t.destroy(!0)}};X.add(nI);class iI{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,name:n,src:i,srcs:s}=e;return zt(r||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(e,u));n.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(r).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof r[i]=="string")this.add({alias:s,src:r[i]});else if(Array.isArray(r[i]))this.add({alias:s,src:r[i]});else{const o=r[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,r,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(se("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},zt(o).forEach(l=>{const{src:u,srcs:h}=l;let{data:c,format:d,loadParser:f}=l;const p=zt(u||h).map(g=>typeof g=="string"?IP(g):Array.isArray(g)?g:[g]),v=this.getAlias(l);Array.isArray(v)?v.forEach(a):a(v);const _=[];p.forEach(g=>{g.forEach(y=>{let m={};if(typeof y!="object"){m.src=y;for(let x=0;x<this._parsers.length;x++){const E=this._parsers[x];if(E.test(y)){m=E.parse(y);break}}}else c=y.data??c,d=y.format??d,f=y.loadParser??f,m={...m,...y};if(!v)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this.buildResolvedAsset(m,{aliases:v,data:c,format:d,loadParser:f}),_.push(m)})}),v.forEach(g=>{this._assetMap[g]=_})})}resolveBundle(e){const r=Al(e);e=zt(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}n[i]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(e){const r=Al(e);e=zt(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:n,data:i,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=je.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??je.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class sI{constructor(){this._detections=[],this._initialized=!1,this.resolver=new iI,this.loader=new MP,this.cache=Mn,this._backgroundLoader=new PP(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof r=="number"?[r]:r,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n,i,s){this.resolver.add(e,r,n,i,s)}async load(e,r){this._initialized||await this.init();const n=Al(e),i=zt(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const u=()=>{r==null||r(++a/l)},h=o.map(c=>{const d=i[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Mn.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=Mn.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[i[l]]=u,Mn.set(h,u)}),o}async unload(e){this._initialized||await this.init();const r=zt(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=zt(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{Mn.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,i)=>r.indexOf(n)===i),r}get detections(){return this._detections}get preferWorkers(){return au.config.preferWorkers}set preferWorkers(e){se("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const oa=new sI;X.handleByList(U.LoadParser,oa.loader.parsers).handleByList(U.ResolveParser,oa.resolver.parsers).handleByList(U.CacheParser,oa.cache.parsers).handleByList(U.DetectionParser,oa.detections);const oI={extension:U.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof W),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};X.add(oI);async function K_(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const aI={extension:{type:U.DetectionParser,priority:1},test:async()=>K_("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};X.add(aI);const lI={extension:{type:U.DetectionParser,priority:0},test:async()=>K_("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};X.add(lI);const bg=["png","jpg","jpeg"],uI={extension:{type:U.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...bg],remove:async t=>t.filter(e=>!bg.includes(e))};X.add(uI);const hI="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Nf(t){return hI?!1:document.createElement("video").canPlayType(t)!==""}const cI={extension:{type:U.DetectionParser,priority:0},test:async()=>Nf("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};X.add(cI);const dI={extension:{type:U.DetectionParser,priority:0},test:async()=>Nf("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};X.add(dI);const fI={extension:{type:U.DetectionParser,priority:0},test:async()=>Nf("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};X.add(fI);const pI={extension:U.ResolveParser,test:au.test,parse:t=>{var e;return{resolution:parseFloat(((e=z.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:je.extname(t).slice(1),src:t}}};X.add(pI);var Ve=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(Ve||{});const bl={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let tr,di;function Cg(){di={bptc:tr.getExtension("EXT_texture_compression_bptc"),astc:tr.getExtension("WEBGL_compressed_texture_astc"),etc:tr.getExtension("WEBGL_compressed_texture_etc"),s3tc:tr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:tr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:tr.getExtension("WEBGL_compressed_texture_pvrtc")||tr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:tr.getExtension("WEBGL_compressed_texture_etc1"),atc:tr.getExtension("WEBGL_compressed_texture_atc")}}const mI={extension:{type:U.DetectionParser,priority:2},test:async()=>{const t=z.ADAPTER.createCanvas().getContext("webgl");return t?(tr=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{di||Cg();const e=[];for(const r in di)di[r]&&e.push(r);return[...e,...t]},remove:async t=>(di||Cg(),t.filter(e=>!(e in di)))};X.add(mI);class gI extends ru{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,r),this.origin=n,this.buffer=i?new Xc(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Xc(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Un extends gI{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=Un._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||Un._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:h}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=Un._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,r,n,i,s,o,a){const l=new Array(n);let u=e.byteOffset,h=o,c=a,d=h+i-1&~(i-1),f=c+s-1&~(s-1),p=d*f*bl[r];for(let v=0;v<n;v++)l[v]={levelID:v,levelWidth:n>1?h:d,levelHeight:n>1?c:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,h=h>>1||1,c=c>>1||1,d=h+i-1&~(i-1),f=c+s-1&~(s-1),p=d*f*bl[r];return l}}const Th=4,aa=124,yI=32,Pg=20,vI=542327876,la={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},_I={FOURCC:2},ua={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},xI=1,EI=2,wI=4,TI=64,SI=512,AI=131072,bI=827611204,CI=861165636,PI=894720068,II=808540228,RI=4,MI={[bI]:Ve.COMPRESSED_RGBA_S3TC_DXT1_EXT,[CI]:Ve.COMPRESSED_RGBA_S3TC_DXT3_EXT,[PI]:Ve.COMPRESSED_RGBA_S3TC_DXT5_EXT},DI={70:Ve.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Ve.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Ve.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Ve.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Ve.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Ve.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Ve.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Ve.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Ve.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Ve.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Ve.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Ve.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Ve.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function NI(t){const e=new Uint32Array(t);if(e[0]!==vI)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,aa/Uint32Array.BYTES_PER_ELEMENT),n=r[la.HEIGHT],i=r[la.WIDTH],s=r[la.MIPMAP_COUNT],o=new Uint32Array(t,la.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,yI/Uint32Array.BYTES_PER_ELEMENT),a=o[xI];if(a&wI){const l=o[_I.FOURCC];if(l!==II){const y=MI[l],m=Th+aa,x=new Uint8Array(t,m);return[new Un(x,{format:y,width:i,height:n,levels:s})]}const u=Th+aa,h=new Uint32Array(e.buffer,u,Pg/Uint32Array.BYTES_PER_ELEMENT),c=h[ua.DXGI_FORMAT],d=h[ua.RESOURCE_DIMENSION],f=h[ua.MISC_FLAG],p=h[ua.ARRAY_SIZE],v=DI[c];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(f===RI)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,g=Th+aa+Pg;if(p===1)_.push(new Uint8Array(t,g));else{const y=bl[v];let m=0,x=i,E=n;for(let w=0;w<s;w++){const T=Math.max(1,x+3&-4),R=Math.max(1,E+3&-4),I=T*R*y;m+=I,x=x>>>1,E=E>>>1}let A=g;for(let w=0;w<p;w++)_.push(new Uint8Array(t,A,m)),A+=m}return _.map(y=>new Un(y,{format:v,width:i,height:n,levels:s}))}throw a&TI?new Error("DDSParser does not support uncompressed texture data."):a&SI?new Error("DDSParser does not supported YUV uncompressed texture data."):a&AI?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&EI?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ig=[171,75,84,88,32,49,49,187,13,10,26,10],kI=67305985,Ot={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},vd=64,Rg={[K.UNSIGNED_BYTE]:1,[K.UNSIGNED_SHORT]:2,[K.INT]:4,[K.UNSIGNED_INT]:4,[K.FLOAT]:4,[K.HALF_FLOAT]:8},BI={[B.RGBA]:4,[B.RGB]:3,[B.RG]:2,[B.RED]:1,[B.LUMINANCE]:1,[B.LUMINANCE_ALPHA]:2,[B.ALPHA]:1},OI={[K.UNSIGNED_SHORT_4_4_4_4]:2,[K.UNSIGNED_SHORT_5_5_5_1]:2,[K.UNSIGNED_SHORT_5_6_5]:2};function FI(t,e,r=!1){const n=new DataView(e);if(!LI(t,n))return null;const i=n.getUint32(Ot.ENDIANNESS,!0)===kI,s=n.getUint32(Ot.GL_TYPE,i),o=n.getUint32(Ot.GL_FORMAT,i),a=n.getUint32(Ot.GL_INTERNAL_FORMAT,i),l=n.getUint32(Ot.PIXEL_WIDTH,i),u=n.getUint32(Ot.PIXEL_HEIGHT,i)||1,h=n.getUint32(Ot.PIXEL_DEPTH,i)||1,c=n.getUint32(Ot.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(Ot.NUMBER_OF_FACES,i),f=n.getUint32(Ot.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(Ot.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const v=4,_=4,g=l+3&-4,y=u+3&-4,m=new Array(c);let x=l*u;s===0&&(x=g*y);let E;if(s!==0?Rg[s]?E=Rg[s]*BI[o]:E=OI[s]:E=bl[a],E===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const A=r?GI(n,p,i):null;let w=x*E,T=l,R=u,I=g,q=y,F=vd+p;for(let S=0;S<f;S++){const M=n.getUint32(F,i);let O=F+4;for(let V=0;V<c;V++){let L=m[V];L||(L=m[V]=new Array(f)),L[S]={levelID:S,levelWidth:f>1||s!==0?T:I,levelHeight:f>1||s!==0?R:q,levelBuffer:new Uint8Array(e,O,w)},O+=w}F+=M+4,F=F%4!==0?F+4-F%4:F,T=T>>1||1,R=R>>1||1,I=T+v-1&-4,q=R+_-1&-4,w=I*q*E}return s!==0?{uncompressed:m.map(S=>{let M=S[0].levelBuffer,O=!1;return s===K.FLOAT?M=new Float32Array(S[0].levelBuffer.buffer,S[0].levelBuffer.byteOffset,S[0].levelBuffer.byteLength/4):s===K.UNSIGNED_INT?(O=!0,M=new Uint32Array(S[0].levelBuffer.buffer,S[0].levelBuffer.byteOffset,S[0].levelBuffer.byteLength/4)):s===K.INT&&(O=!0,M=new Int32Array(S[0].levelBuffer.buffer,S[0].levelBuffer.byteOffset,S[0].levelBuffer.byteLength/4)),{resource:new ru(M,{width:S[0].levelWidth,height:S[0].levelHeight}),type:s,format:O?UI(o):o}}),kvData:A}:{compressed:m.map(S=>new Un(null,{format:a,width:l,height:u,levels:f,levelBuffers:S})),kvData:A}}function LI(t,e){for(let r=0;r<Ig.length;r++)if(e.getUint8(r)!==Ig[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function UI(t){switch(t){case B.RGBA:return B.RGBA_INTEGER;case B.RGB:return B.RGB_INTEGER;case B.RG:return B.RG_INTEGER;case B.RED:return B.RED_INTEGER;default:return t}}function GI(t,e,r){const n=new Map;let i=0;for(;i<e;){const s=t.getUint32(vd+i,r),o=vd+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),h=new DataView(t.buffer,o+l+1,s-l-1);n.set(u,h),i+=4+s+a}return n}const HI={extension:{type:U.LoadParser,priority:Kt.High},name:"loadDDS",test(t){return vn(t,".dds")},async load(t,e,r){const n=await(await z.ADAPTER.fetch(t)).arrayBuffer(),i=NI(n).map(s=>{const o=new J(s,{mipmap:pr.OFF,alphaMode:ut.NO_PREMULTIPLIED_ALPHA,resolution:Br(t),...e.data});return Co(o,r,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};X.add(HI);const zI={extension:{type:U.LoadParser,priority:Kt.High},name:"loadKTX",test(t){return vn(t,".ktx")},async load(t,e,r){const n=await(await z.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=FI(t,n),a=i??s,l={mipmap:pr.OFF,alphaMode:ut.NO_PREMULTIPLIED_ALPHA,resolution:Br(t),...e.data},u=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const c=h.resource??h,d=new J(c,l);return d.ktxKeyValueData=o,Co(d,r,t)});return u.length===1?u[0]:u},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};X.add(zI);const $I=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],jI={extension:U.ResolveParser,test:t=>{const e=je.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,i;const e=t.split("."),r=e.pop();if(["ktx","dds"].includes(r)){const s=e.pop();if($I.includes(s))return{resolution:parseFloat(((n=z.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:s,src:t}}return{resolution:parseFloat(((i=z.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:r,src:t}}};X.add(jI);const ha=new ee,VI=4,q_=class Is{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,r,n,i){const s=new Image;return s.src=await this.base64(e,r,n,i),s}async base64(e,r,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},r,n)});if(s.toDataURL!==void 0)return s.toDataURL(r,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:r,quality:n});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);o&&Is._flipY(n,i,s),a&&Is._unpremultiplyAlpha(n);const l=new Ab(i,s,1),u=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(u,0,0),l.canvas}pixels(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);return o&&Is._flipY(n,i,s),a&&Is._unpremultiplyAlpha(n),n}_rawPixels(e,r){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof ti?a=e:(a=n.generateTexture(e,{region:r,resolution:n.resolution,multisample:n.multisample}),l=!0,r&&(ha.width=r.width,ha.height=r.height,r=ha)));const u=n.gl;if(a){if(i=a.baseTexture.resolution,r=r??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===B.RGBA,!l){n.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else i=n.resolution,r||(r=ha,r.width=n.width/i,r.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const h=Math.max(Math.round(r.width*i),1),c=Math.max(Math.round(r.height*i),1),d=new Uint8Array(VI*h*c);return u.readPixels(Math.round(r.x*i),Math.round(r.y*i),h,c,u.RGBA,u.UNSIGNED_BYTE,d),l&&(a==null||a.destroy(!0)),{pixels:d,width:h,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,r,n){const i=r<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,u=(n-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,u,u+i),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const r=e.length;for(let n=0;n<r;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};q_.extension={name:"extract",type:U.RendererSystem};let WI=q_;X.add(WI);const Cl={build(t){const e=t.points;let r,n,i,s,o,a;if(t.type===Xe.CIRC){const p=t.shape;r=p.x,n=p.y,o=a=p.radius,i=s=0}else if(t.type===Xe.ELIP){const p=t.shape;r=p.x,n=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,v=p.width/2,_=p.height/2;r=p.x+v,n=p.y+_,o=a=Math.max(0,Math.min(p.radius,Math.min(v,_))),i=v-o,s=_-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(i?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s;return}let h=0,c=l*4+(i?2:0)+2,d=c,f=u;{const p=i+o,v=s,_=r+p,g=r-p,y=n+v;if(e[h++]=_,e[h++]=y,e[--c]=y,e[--c]=g,s){const m=n-v;e[d++]=g,e[d++]=m,e[--f]=m,e[--f]=_}}for(let p=1;p<l;p++){const v=Math.PI/2*(p/l),_=i+Math.cos(v)*o,g=s+Math.sin(v)*a,y=r+_,m=r-_,x=n+g,E=n-g;e[h++]=y,e[h++]=x,e[--c]=x,e[--c]=m,e[d++]=m,e[d++]=E,e[--f]=E,e[--f]=y}{const p=i,v=s+a,_=r+p,g=r-p,y=n+v,m=n-v;e[h++]=_,e[h++]=y,e[--f]=m,e[--f]=_,i&&(e[h++]=g,e[h++]=y,e[--f]=m,e[--f]=g)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,l;if(t.type!==Xe.RREC){const h=t.shape;a=h.x,l=h.y}else{const h=t.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=t.matrix;n.push(t.matrix?u.a*a+u.c*l+u.tx:a,t.matrix?u.b*a+u.d*l+u.ty:l),s++,n.push(r[0],r[1]);for(let h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function Mg(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const a=t[i],l=t[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,l=s,u=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[u]]=[t[u],t[a]]}}}const Q_={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){Mg(r,!1);const o=[];for(let u=0;u<n.length;u++){const h=n[u];Mg(h.points,!0),o.push(r.length/2),r=r.concat(h.points)}const a=rT(r,o,2);if(!a)return;const l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<r.length;u++)i.push(r[u])}}},XI={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},YI={build(t){Cl.build(t)},triangulate(t,e){Cl.triangulate(t,e)}};var Tt=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Tt||{}),$t=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))($t||{});const es={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Dg{static curveTo(e,r,n,i,s,o){const a=o[o.length-2],l=o[o.length-1]-r,u=a-e,h=i-r,c=n-e,d=Math.abs(l*c-u*h);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const f=l*l+u*u,p=h*h+c*c,v=l*h+u*c,_=s*Math.sqrt(f)/d,g=s*Math.sqrt(p)/d,y=_*v/f,m=g*v/p,x=_*c+g*u,E=_*h+g*l,A=u*(g+y),w=l*(g+y),T=c*(_+m),R=h*(_+m),I=Math.atan2(w-E,A-x),q=Math.atan2(R-E,T-x);return{cx:x+e,cy:E+r,radius:s,startAngle:I,endAngle:q,anticlockwise:u*h>c*l}}static arc(e,r,n,i,s,o,a,l,u){const h=a-o,c=es._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/vl)*40),d=h/(c*2),f=d*2,p=Math.cos(d),v=Math.sin(d),_=c-1,g=_%1/_;for(let y=0;y<=_;++y){const m=y+g*y,x=d+o+f*m,E=Math.cos(x),A=-Math.sin(x);u.push((p*E+v*A)*s+n,(p*-A+v*E)*s+i)}}}class KI{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class kf{static curveLength(e,r,n,i,s,o,a,l){let u=0,h=0,c=0,d=0,f=0,p=0,v=0,_=0,g=0,y=0,m=0,x=e,E=r;for(let A=1;A<=10;++A)h=A/10,c=h*h,d=c*h,f=1-h,p=f*f,v=p*f,_=v*e+3*p*h*n+3*f*c*s+d*a,g=v*r+3*p*h*i+3*f*c*o+d*l,y=x-_,m=E-g,x=_,E=g,u+=Math.sqrt(y*y+m*m);return u}static curveTo(e,r,n,i,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=es._segmentsCount(kf.curveLength(l,u,e,r,n,i,s,o));let c=0,d=0,f=0,p=0,v=0;a.push(l,u);for(let _=1,g=0;_<=h;++_)g=_/h,c=1-g,d=c*c,f=d*c,p=g*g,v=p*g,a.push(f*l+3*d*g*e+3*c*p*n+v*s,f*u+3*d*g*r+3*c*p*i+v*o)}}function Ng(t,e,r,n,i,s,o,a){const l=t-r*i,u=e-n*i,h=t+r*s,c=e+n*s;let d,f;o?(d=n,f=-r):(d=-n,f=r);const p=l+d,v=u+f,_=h+d,g=c+f;return a.push(p,v,_,g),2}function En(t,e,r,n,i,s,o,a){const l=r-t,u=n-e;let h=Math.atan2(l,u),c=Math.atan2(i-t,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,p=Math.abs(f),v=Math.sqrt(l*l+u*u),_=(15*p*Math.sqrt(v)/Math.PI>>0)+1,g=f/_;if(d+=g,a){o.push(t,e,r,n);for(let y=1,m=d;y<_;y++,m+=g)o.push(t,e,t+Math.sin(m)*v,e+Math.cos(m)*v);o.push(t,e,i,s)}else{o.push(r,n,t,e);for(let y=1,m=d;y<_;y++,m+=g)o.push(t+Math.sin(m)*v,e+Math.cos(m)*v,t,e);o.push(i,s,t,e)}return _*2}function qI(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=t.lineStyle,o=new ae(n[0],n[1]),a=new ae(n[n.length-2],n[n.length-1]),l=r.type!==Xe.POLY||r.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const L=(o.x+a.x)*.5,C=(a.y+o.y)*.5;n.unshift(L,C),n.push(L,C)}const h=e.points,c=n.length/2;let d=n.length;const f=h.length/2,p=s.width/2,v=p*p,_=s.miterLimit*s.miterLimit;let g=n[0],y=n[1],m=n[2],x=n[3],E=0,A=0,w=-(y-x),T=g-m,R=0,I=0,q=Math.sqrt(w*w+T*T);w/=q,T/=q,w*=p,T*=p;const F=s.alignment,S=(1-F)*2,M=F*2;l||(s.cap===$t.ROUND?d+=En(g-w*(S-M)*.5,y-T*(S-M)*.5,g-w*S,y-T*S,g+w*M,y+T*M,h,!0)+2:s.cap===$t.SQUARE&&(d+=Ng(g,y,w,T,S,M,!0,h))),h.push(g-w*S,y-T*S,g+w*M,y+T*M);for(let L=1;L<c-1;++L){g=n[(L-1)*2],y=n[(L-1)*2+1],m=n[L*2],x=n[L*2+1],E=n[(L+1)*2],A=n[(L+1)*2+1],w=-(y-x),T=g-m,q=Math.sqrt(w*w+T*T),w/=q,T/=q,w*=p,T*=p,R=-(x-A),I=m-E,q=Math.sqrt(R*R+I*I),R/=q,I/=q,R*=p,I*=p;const C=m-g,k=y-x,b=m-E,P=A-x,j=C*b+k*P,te=k*b-P*C,re=te<0;if(Math.abs(te)<.001*Math.abs(j)){h.push(m-w*S,x-T*S,m+w*M,x+T*M),j>=0&&(s.join===Tt.ROUND?d+=En(m,x,m-w*S,x-T*S,m-R*S,x-I*S,h,!1)+4:d+=2,h.push(m-R*M,x-I*M,m+R*S,x+I*S));continue}const me=(-w+g)*(-T+x)-(-w+m)*(-T+y),he=(-R+E)*(-I+x)-(-R+m)*(-I+A),fe=(C*he-b*me)/te,Z=(P*me-k*he)/te,ce=(fe-m)*(fe-m)+(Z-x)*(Z-x),Ne=m+(fe-m)*S,ne=x+(Z-x)*S,le=m-(fe-m)*M,pe=x-(Z-x)*M,et=Math.min(C*C+k*k,b*b+P*P),Re=re?S:M,Nt=et+Re*Re*v,_n=ce<=Nt;let wt=s.join;if(wt===Tt.MITER&&ce/v>_&&(wt=Tt.BEVEL),_n)switch(wt){case Tt.MITER:{h.push(Ne,ne,le,pe);break}case Tt.BEVEL:{re?h.push(Ne,ne,m+w*M,x+T*M,Ne,ne,m+R*M,x+I*M):h.push(m-w*S,x-T*S,le,pe,m-R*S,x-I*S,le,pe),d+=2;break}case Tt.ROUND:{re?(h.push(Ne,ne,m+w*M,x+T*M),d+=En(m,x,m+w*M,x+T*M,m+R*M,x+I*M,h,!0)+4,h.push(Ne,ne,m+R*M,x+I*M)):(h.push(m-w*S,x-T*S,le,pe),d+=En(m,x,m-w*S,x-T*S,m-R*S,x-I*S,h,!1)+4,h.push(m-R*S,x-I*S,le,pe));break}}else{switch(h.push(m-w*S,x-T*S,m+w*M,x+T*M),wt){case Tt.MITER:{re?h.push(le,pe,le,pe):h.push(Ne,ne,Ne,ne),d+=2;break}case Tt.ROUND:{re?d+=En(m,x,m+w*M,x+T*M,m+R*M,x+I*M,h,!0)+2:d+=En(m,x,m-w*S,x-T*S,m-R*S,x-I*S,h,!1)+2;break}}h.push(m-R*S,x-I*S,m+R*M,x+I*M),d+=2}}g=n[(c-2)*2],y=n[(c-2)*2+1],m=n[(c-1)*2],x=n[(c-1)*2+1],w=-(y-x),T=g-m,q=Math.sqrt(w*w+T*T),w/=q,T/=q,w*=p,T*=p,h.push(m-w*S,x-T*S,m+w*M,x+T*M),l||(s.cap===$t.ROUND?d+=En(m-w*(S-M)*.5,x-T*(S-M)*.5,m-w*S,x-T*S,m+w*M,x+T*M,h,!1)+2:s.cap===$t.SQUARE&&(d+=Ng(m,x,w,T,S,M,!1,h)));const O=e.indices,V=es.epsilon*es.epsilon;for(let L=f;L<d+f-2;++L)g=h[L*2],y=h[L*2+1],m=h[(L+1)*2],x=h[(L+1)*2+1],E=h[(L+2)*2],A=h[(L+2)*2+1],!(Math.abs(g*(x-A)+m*(A-y)+E*(y-x))<V)&&O.push(L,L+1,L+2)}function QI(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==Xe.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,u=o.length/2;let h=u;for(o.push(i[0],i[1]),r=1;r<l;r++)o.push(i[r*2],i[r*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function kg(t,e){t.lineStyle.native?QI(t,e):qI(t,e)}class Bf{static curveLength(e,r,n,i,s,o){const a=e-2*n+s,l=r-2*i+o,u=2*n-2*e,h=2*i-2*r,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,p=2*Math.sqrt(c+d+f),v=Math.sqrt(c),_=2*c*v,g=2*Math.sqrt(f),y=d/v;return(_*p+v*d*(p-g)+(4*f*c-d*d)*Math.log((2*v+y+p)/(y+g)))/(4*_)}static curveTo(e,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=es._segmentsCount(Bf.curveLength(o,a,e,r,n,i));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(e-o)*d,h=a+(r-a)*d,s.push(u+(e+(n-e)*d-u)*d,h+(r+(i-r)*d-h)*d)}}}const Sh={[Xe.POLY]:Q_,[Xe.CIRC]:Cl,[Xe.ELIP]:Cl,[Xe.RECT]:XI,[Xe.RREC]:YI},Bg=[],ca=[];class Pl{constructor(e,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}clone(){return new Pl(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ai=new ae,Z_=class J_ extends n_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Tl,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ca.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),Bg.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,n=null,i=null){const s=new Pl(e,r,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const n=new Pl(e,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,ai):ai.copyFrom(e),i.shape.contains(ai.x,ai.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(ai.x,ai.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<r.length;l++){this.shapeIndex++;const u=r[l],h=u.fillStyle,c=u.lineStyle;Sh[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||c.visible)&&this.processHoles(u.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const p=f.texture.baseTexture,v=this.indices.length,_=this.points.length/2;p.wrapMode=un.REPEAT,d===0?this.processFill(u):this.processLine(u);const g=this.points.length/2-_;g!==0&&(n&&!this._compareStyles(i,f)&&(n.end(v,_),n=null),n||(n=Bg.pop()||new KI,n.begin(f,v,_),this.batches.push(n),i=f),this.addUvs(this.points,e,f.texture,_,g,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,n=e.length;r<n;r++){const i=e[r];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<J_.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++J._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),ca.push(this.drawCalls[c]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let i=ca.pop();i||(i=new qc,i.texArray=new ed),i.texArray.count=0,i.start=0,i.size=0,i.type=ur.TRIANGLES;let s=0,o=null,a=0,l=!1,u=ur.TRIANGLES,h=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],f=8,p=d.style,v=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?ur.LINES:ur.TRIANGLES,o=null,s=f,e++),o!==v&&(o=v,v._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=ca.pop(),i||(i=new qc,i.texArray=new ed),this.drawCalls.push(i)),i.start=h,i.size=0,i.texArray.count=0,i.type=u),v.touched=1,v._batchEnabled=e,v._batchLocation=s,v.wrapMode=un.REPEAT,i.texArray.elements[i.texArray.count++]=v,s++)),i.size+=d.size,h+=d.size,a=v._batchLocation,this.addColors(r,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}J._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=r[u*2],o[l++]=r[u*2+1],a[l++]=n[u],o[l++]=i[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Q_.triangulate(e,this):Sh[e.type].triangulate(e,this)}processLine(e){kg(e,this);for(let r=0;r<e.holes.length;r++)kg(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const n=e[r];Sh[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=r.a*i+r.c*s+r.tx,e[n*2+1]=r.b*i+r.d*s+r.ty}}addColors(e,r,n,i,s=0){const o=ve.shared.setValue(r).toLittleEndianNumber(),a=ve.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,r,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=r}addUvs(e,r,n,i,s,o=null){let a=0;const l=r.length,u=n.frame;for(;a<s;){let c=e[(i+a)*2],d=e[(i+a)*2+1];if(o){const f=o.a*c+o.c*d+o.tx;d=o.b*c+o.d*d+o.ty,c=f}a++,r.push(c/u.width,d/u.height)}const h=n.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(r,n,l,s)}adjustUvs(e,r,n,i){const s=r.baseTexture,o=1e-6,a=n+i*2,l=r.frame,u=l.width/s.width,h=l.height/s.height;let c=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+o),p=Math.floor(e[n+1]+o);for(let v=n+2;v<a;v+=2)f=Math.min(f,Math.floor(e[v]+o)),p=Math.min(p,Math.floor(e[v+1]+o));c-=f,d-=p;for(let v=n;v<a;v+=2)e[v]=(e[v]+c)*u,e[v+1]=(e[v+1]+d)*h}};Z_.BATCHABLE_SIZE=100;let ZI=Z_;class lu{constructor(){this.color=16777215,this.alpha=1,this.texture=W.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new lu;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=W.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Of extends lu{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=$t.BUTT,this.join=Tt.MITER,this.miterLimit=10}clone(){const e=new Of;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=$t.BUTT,this.join=Tt.MITER,this.miterLimit=10}}const Ah={},_d=class Ba extends it{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new lu,this._lineStyle=new Of,this._matrix=null,this._holeMode=!1,this.state=mr.for2d(),this._geometry=e||new ZI,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ve(16777215),this.blendMode=Q.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ba(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:W.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:$t.BUTT,join:Tt.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Ln,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new Ln,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==r)&&n.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Bf.curveTo(e,r,n,i,s),this}bezierCurveTo(e,r,n,i,s,o){return this._initCurve(),kf.curveTo(e,r,n,i,s,o,this.currentPath.points),this}arcTo(e,r,n,i,s){this._initCurve(e,r);const o=this.currentPath.points,a=Dg.curveTo(e,r,n,i,s,o);if(a){const{cx:l,cy:u,radius:h,startAngle:c,endAngle:d,anticlockwise:f}=a;this.arc(l,u,h,c,d,f)}return this}arc(e,r,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=vl:o&&i<=s&&(i+=vl),s-i===0)return this;const a=e+Math.cos(i)*n,l=r+Math.sin(i)*n,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return Dg.arc(a,l,e,r,n,i,s,o,h),this}beginFill(e=0,r){return this.beginTextureFill({texture:W.WHITE,color:e,alpha:r})}normalizeColor(e){const r=ve.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:W.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,n,i){return this.drawShape(new ee(e,r,n,i))}drawRoundedRect(e,r,n,i,s){return this.drawShape(new su(e,r,n,i,s))}drawCircle(e,r,n){return this.drawShape(new nu(e,r,n))}drawEllipse(e,r,n,i){return this.drawShape(new iu(e,r,n,i))}drawPolygon(...e){let r,n=!0;const i=e[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(e[0])?r=e[0]:r=e;const s=new Ln(r);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Xe.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:r,indices:u,uvs:l,_batchRGB:ve.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const r=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=r.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,ve.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,r){const{texArray:n,type:i,size:s,start:o}=r,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let r=this.shader;const n=this.pluginName;if(!r){if(!Ah[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new xe,default:Xt.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;Ah[n]=new fr(a,o)}r=Ah[n]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,r,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Ba._TEMP_POINT),this._geometry.containsPoint(Ba._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=ve.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this._geometry.points,h=this.vertexData;let c=0;for(let d=0;d<u.length;d+=2){const f=u[d],p=u[d+1];h[c++]=n*f+s*p+a,h[c++]=o*p+i*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};_d.curves=es,_d._TEMP_POINT=new ae;let ts=_d;class JI{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const bh=new ae,Og=new Ln,ex=class tx extends it{constructor(e,r,n,i=ur.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=n||mr.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=z.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ur.TRIANGLES&&r.length<tx.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=r[d*2],p=r[d*2+1];c[d*2]=s*f+a*p+u,c[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=z.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new JI(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,bh);const r=this.geometry.getBuffer("aVertexPosition").data,n=Og.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,u=i[a+1]*2,h=i[a+2]*2;if(n[0]=r[l],n[1]=r[l+1],n[2]=r[u],n[3]=r[u+1],n[4]=r[h],n[5]=r[h+1],Og.contains(bh.x,bh.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};ex.BATCHABLE_SIZE=100;let Fg=ex;class eR extends fn{constructor(e,r,n){super();const i=new Me(e),s=new Me(r,!0),o=new Me(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,K.FLOAT).addAttribute("aTextureCoord",s,2,!1,K.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var tR=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,rR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Lg extends fr{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:xe.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Cr.from(rR,tR),n),this._colorDirty=!1,this.uvMatrix=new y_(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new ve(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;ve.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Ug{constructor(e,r,n){this.geometry=new fn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||K.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new Me(Tb(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Me(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Me(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===K.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===K.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,r,n,s.type===K.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,r,n,s.type===K.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var nR=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,iR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class rx extends ou{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new xe,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:K.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=fr.from(iR,nR,{}),this.state=mr.for2d()}render(e){const r=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=r[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=e_(e.blendMode,u),s.state.set(this.state);const h=s.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=ve.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let v=o-f;v>i&&(v=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const _=a[p];_.uploadDynamic(r,f,v);const g=e._bufferUpdateIDs[p]||0;d=d||_._updateID<g,d&&(_._updateID=e._updateID,_.uploadStatic(r,f,v)),s.geometry.bind(_.geometry),h.drawElements(h.TRIANGLES,v*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)r.push(new Ug(this.properties,s,i));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new Ug(this.properties,n,r)}uploadVertices(e,r,n,i,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<n;++c){const d=e[r+c],f=d._texture,p=d.scale.x,v=d.scale.y,_=f.trim,g=f.orig;_?(l=_.x-d.anchor.x*g.width,a=l+_.width,h=_.y-d.anchor.y*g.height,u=h+_.height):(a=g.width*(1-d.anchor.x),l=g.width*-d.anchor.x,u=g.height*(1-d.anchor.y),h=g.height*-d.anchor.y),i[o]=l*p,i[o+1]=h*v,i[o+s]=a*p,i[o+s+1]=h*v,i[o+s*2]=a*p,i[o+s*2+1]=u*v,i[o+s*3]=l*p,i[o+s*3+1]=u*v,o+=s*4}}uploadPosition(e,r,n,i,s,o){for(let a=0;a<n;a++){const l=e[r+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,r,n,i,s,o){for(let a=0;a<n;a++){const l=e[r+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,r,n,i,s,o){for(let a=0;a<n;++a){const l=e[r+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,r,n,i,s,o){for(let a=0;a<n;++a){const l=e[r+a],u=ve.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}rx.extension={name:"particle",type:U.RendererPlugin};X.add(rx);var uu=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(uu||{});const da={willReadFrequently:!0},rr=class Y{static get experimentalLetterSpacingSupported(){let e=Y._experimentalLetterSpacingSupported;if(e!==void 0){const r=z.ADAPTER.getCanvasRenderingContext2D().prototype;e=Y._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,i,s,o,a,l,u){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,r,n,i=Y._canvas){n=n??r.wordWrap;const s=r.toFontString(),o=Y.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=i.getContext("2d",da);a.font=s;const l=(n?Y.wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let p=0;p<l.length;p++){const v=Y._measureText(l[p],r.letterSpacing,a);u[p]=v,h=Math.max(h,v)}let c=h+r.strokeThickness;r.dropShadow&&(c+=r.dropShadowDistance);const d=r.lineHeight||o.fontSize+r.strokeThickness;let f=Math.max(d,o.fontSize+r.strokeThickness*2)+r.leading+(l.length-1)*(d+r.leading);return r.dropShadow&&(f+=r.dropShadowDistance),new Y(e,r,c,f,l,u,d+r.leading,h,o)}static _measureText(e,r,n){let i=!1;Y.experimentalLetterSpacingSupported&&(Y.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=r:s+=(Y.graphemeSegmenter(e).length-1)*r),s}static wordWrap(e,r,n=Y._canvas){const i=n.getContext("2d",da);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:h}=r,c=Y.collapseSpaces(h),d=Y.collapseNewlines(h);let f=!c;const p=r.wordWrapWidth+u,v=Y.tokenize(e);for(let _=0;_<v.length;_++){let g=v[_];if(Y.isNewline(g)){if(!d){a+=Y.addLine(o),f=!c,o="",s=0;continue}g=" "}if(c){const m=Y.isBreakingSpace(g),x=Y.isBreakingSpace(o[o.length-1]);if(m&&x)continue}const y=Y.getFromCache(g,u,l,i);if(y>p)if(o!==""&&(a+=Y.addLine(o),o="",s=0),Y.canBreakWords(g,r.breakWords)){const m=Y.wordWrapSplit(g);for(let x=0;x<m.length;x++){let E=m[x],A=E,w=1;for(;m[x+w];){const R=m[x+w];if(!Y.canBreakChars(A,R,g,x,r.breakWords))E+=R;else break;A=R,w++}x+=w-1;const T=Y.getFromCache(E,u,l,i);T+s>p&&(a+=Y.addLine(o),f=!1,o="",s=0),o+=E,s+=T}}else{o.length>0&&(a+=Y.addLine(o),o="",s=0);const m=_===v.length-1;a+=Y.addLine(g,!m),f=!1,o="",s=0}else y+s>p&&(f=!1,a+=Y.addLine(o),o="",s=0),(o.length>0||!Y.isBreakingSpace(g)||f)&&(o+=g,s+=y)}return a+=Y.addLine(o,!1),a}static addLine(e,r=!0){return e=Y.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,n,i){let s=n[e];return typeof s!="number"&&(s=Y._measureText(e,r,i)+r,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!Y.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Y._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:Y._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(Y.isBreakingSpace(s,o)||Y.isNewline(s)){n!==""&&(r.push(n),n=""),r.push(s);continue}n+=s}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,i,s){return!0}static wordWrapSplit(e){return Y.graphemeSegmenter(e)}static measureFont(e){if(Y._fonts[e])return Y._fonts[e];const r={ascent:0,descent:0,fontSize:0},n=Y._canvas,i=Y._context;i.font=e;const s=Y.METRICS_STRING+Y.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(Y.BASELINE_SYMBOL).width);const l=Math.ceil(Y.HEIGHT_MULTIPLIER*a);if(a=a*Y.BASELINE_MULTIPLIER|0,o===0||l===0)return Y._fonts[e]=r,r;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const u=i.getImageData(0,0,o,l).data,h=u.length,c=o*4;let d=0,f=0,p=!1;for(d=0;d<a;++d){for(let v=0;v<c;v+=4)if(u[f+v]!==255){p=!0;break}if(!p)f+=c;else break}for(r.ascent=a-d,f=h-c,p=!1,d=l;d>a;--d){for(let v=0;v<c;v+=4)if(u[f+v]!==255){p=!0;break}if(!p)f-=c;else break}return r.descent=d-a,r.fontSize=r.ascent+r.descent,Y._fonts[e]=r,r}static clearMetrics(e=""){e?delete Y._fonts[e]:Y._fonts={}}static get _canvas(){var e;if(!Y.__canvas){let r;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",da))!=null&&e.measureText)return Y.__canvas=n,n;r=z.ADAPTER.createCanvas()}catch{r=z.ADAPTER.createCanvas()}r.width=r.height=10,Y.__canvas=r}return Y.__canvas}static get _context(){return Y.__context||(Y.__context=Y._canvas.getContext("2d",da)),Y.__context}};rr.METRICS_STRING="|q",rr.BASELINE_SYMBOL="M",rr.BASELINE_MULTIPLIER=1.4,rr.HEIGHT_MULTIPLIER=2,rr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})(),rr.experimentalLetterSpacing=!1,rr._fonts={},rr._newlines=[10,13],rr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Vr=rr;const sR=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],nx=class Rs{constructor(e){this.styleID=0,this.reset(),Ph(this,e,e)}clone(){const e={};return Ph(e,this,Rs.defaultStyle),new Rs(e)}reset(){Ph(this,Rs.defaultStyle,Rs.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=Ch(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=Ch(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){oR(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=Ch(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!sR.includes(i)&&(i=`"${i}"`),r[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}};nx.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:uu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Fr=nx;function Ch(t){const e=ve.shared,r=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(r):r(t)}function oR(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Ph(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const aR={texture:!0,children:!1,baseTexture:!0},ix=class xd extends os{constructor(e,r,n){let i=!1;n||(n=z.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=W.from(n);s.orig=new ee,s.trim=new ee,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=xd.defaultResolution??z.RESOLUTION,this._autoResolution=xd.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return Vr.experimentalLetterSpacing}static set experimentalLetterSpacing(e){se("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Vr.experimentalLetterSpacing=e}updateText(e){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=Vr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,u=i.lineWidths,h=i.maxLineWidth,c=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;let d,f;const p=r.dropShadow?2:1;for(let v=0;v<p;++v){const _=r.dropShadow&&v===0,g=_?Math.ceil(Math.max(1,o)+r.padding*2):0,y=g*this._resolution;if(_){n.fillStyle="black",n.strokeStyle="black";const x=r.dropShadowColor,E=r.dropShadowBlur*this._resolution,A=r.dropShadowDistance*this._resolution;n.shadowColor=ve.shared.setValue(x).setAlpha(r.dropShadowAlpha).toRgbaString(),n.shadowBlur=E,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*A,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*A+y}else n.fillStyle=this._generateFillStyle(r,a,i),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let m=(l-c.fontSize)/2;l-c.fontSize<0&&(m=0);for(let x=0;x<a.length;x++)d=r.strokeThickness/2,f=r.strokeThickness/2+x*l+c.ascent+m,r.align==="right"?d+=h-u[x]:r.align==="center"&&(d+=(h-u[x])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(a[x],d+r.padding,f+r.padding-g,!0),r.fill&&this.drawLetterSpacing(a[x],d+r.padding,f+r.padding-g)}this.updateTexture()}drawLetterSpacing(e,r,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Vr.experimentalLetterSpacingSupported&&(Vr.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,r,n):this.context.fillText(e,r,n);return}let a=r;const l=Vr.graphemeSegmenter(e);let u=this.context.measureText(e).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=Cb(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,n=this._style,i=n.trim?0:n.padding,s=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-i*2,r.orig.height=r._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,r)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,r,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,h=i.slice(),c=e.fillGradientStops.slice();if(!c.length){const d=h.length+1;for(let f=1;f<d;++f)c.push(f/d)}if(h.unshift(i[0]),c.unshift(0),h.push(i[i.length-1]),c.push(1),e.fillGradientType===uu.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const d=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<r.length;f++){const p=n.lineHeight*(f-1)+d,v=n.lineHeight*f;let _=v;f>0&&p>v&&(_=(v+p)/2);const g=v+d,y=n.lineHeight*(f+1);let m=g;f+1<r.length&&y<g&&(m=(g+y)/2);const x=(m-_)/u;for(let E=0;E<h.length;E++){let A=0;typeof c[E]=="number"?A=c[E]:A=E/h.length;let w=Math.min(1,Math.max(0,_/u+A*x));w=Number(w.toFixed(5)),s.addColorStop(w,h[E])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const d=h.length+1;let f=1;for(let p=0;p<h.length;p++){let v;typeof c[p]=="number"?v=c[p]:v=f/d,s.addColorStop(v,h[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},aR,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const r=Jr(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const r=Jr(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Fr?this._style=e:this._style=new Fr(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};ix.defaultAutoResolution=!0;let Ff=ix;class lR{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function uR(t,e){var n;let r=!1;if((n=t==null?void 0:t._textures)!=null&&n.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof W){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),r=!0)}}return r}function hR(t,e){if(t.baseTexture instanceof J){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function cR(t,e){if(t._texture&&t._texture instanceof W){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function dR(t,e){return e instanceof Ff?(e.updateText(!0),!0):!1}function fR(t,e){if(e instanceof Fr){const r=e.toFontString();return Vr.measureFont(r),!0}return!1}function pR(t,e){if(t instanceof Ff){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function mR(t,e){return t instanceof Fr?(e.includes(t)||e.push(t),!0):!1}const sx=class ox{constructor(e){this.limiter=new lR(ox.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(pR),this.registerFindHook(mR),this.registerFindHook(uR),this.registerFindHook(hR),this.registerFindHook(cR),this.registerUploadHook(dR),this.registerUploadHook(fR)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,yt.system.addOnce(this.tick,this,Kn.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)yt.system.addOnce(this.tick,this,Kn.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,n=e.length;r<n;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof it)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&yt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};sx.uploadsPerFrame=4;let Ed=sx;Object.defineProperties(z,{UPLOADS_PER_FRAME:{get(){return Ed.uploadsPerFrame},set(t){se("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ed.uploadsPerFrame=t}}});function ax(t,e){return e instanceof J?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function gR(t,e){if(!(e instanceof ts))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&ax(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function yR(t,e){return t instanceof ts?(e.push(t),!0):!1}class lx extends Ed{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(yR),this.registerUploadHook(ax),this.registerUploadHook(gR)}}lx.extension={name:"prepare",type:U.RendererSystem};X.add(lx);var vR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,_R=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,xR=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Gg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,ER=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const fa=new xe;class ux extends ou{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new f_,this.state=mr.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=fr.from(Gg,ER,r),this.shader=e.context.webGLVersion>1?fr.from(_R,vR,r):fr.from(Gg,xR,r)}render(e){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,h=e.tileTransform.localTransform,c=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[r.CONTEXT_UID]?d=l.wrapMode!==un.CLAMP:l.wrapMode===un.CLAMP&&(l.wrapMode=un.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,v=a.height,_=e._width,g=e._height;fa.set(h.a*p/_,h.b*p/g,h.c*v/_,h.d*v/g,h.tx/_,h.ty/g),fa.invert(),d?fa.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=fa.toArray(!0),f.uniforms.uColor=ve.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,r.shader.bind(f),r.geometry.bind(n),this.state.blendMode=e_(e.blendMode,u),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}ux.extension={name:"tilingSprite",type:U.RendererPlugin};X.add(ux);const hx=class Ms{constructor(e,r,n){this.linkedSheets=[],(e instanceof J||e instanceof W)&&(e={texture:e,data:r,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof W?i:null,this.baseTexture=i instanceof J?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:r}=this.data.meta;let n=Br(e,null);return n===null&&(n=typeof r=="number"?r:parseFloat(r??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ms.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=Ms.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const i=this._frameKeys[r],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new ee(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new ee(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new ee(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new ee(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new W(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),W.addToCache(this.textures[i],this.cachePrefix+i.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const i=e[r][n];this.animations[r].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ms.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ms.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};hx.BATCH_SIZE=1e3;let Hg=hx;const wR=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function cx(t,e,r){const n={};if(t.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!r){const i=je.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,cx([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const TR={extension:U.Asset,cache:{test:t=>t instanceof Hg,getCacheableAssets:(t,e)=>cx(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return r==="json"&&wR.includes(n)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=z.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:U.LoadParser,priority:Kt.Normal},async testParse(t,e){return je.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var h,c;const{texture:n,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=je.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n&&n.baseTexture)a=n;else{const d=gd(o+(i??t.meta.image),e.src);a=(await r.load([d]))[d]}const l=new Hg({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const u=(h=t==null?void 0:t.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const d=[];for(const p of u){if(typeof p!="string")continue;let v=o+p;(c=e.data)!=null&&c.ignoreMultiPack||(v=gd(v,e.src),d.push(r.load({src:v,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(d);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(v=>v!==p))})}return l},unload(t){t.destroy(!0)}}};X.add(TR);class Il{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Oa{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}n[o].push(l)}const i=new Il;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class wd{static test(e){const r=e;return typeof e!="string"&&"getElementsByTagName"in e&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new Il,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)r.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)r.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)r.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];r.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)r.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r}}class Td{static test(e){return typeof e=="string"&&e.includes("<font>")?wd.test(z.ADAPTER.parseXML(e)):!1}static parse(e){return wd.parse(z.ADAPTER.parseXML(e))}}const Ih=[Oa,wd,Td];function SR(t){for(let e=0;e<Ih.length;e++)if(Ih[e].test(t))return Ih[e];return null}function AR(t,e,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,h=t.width/n-l-u*2,c=t.height/n-l-u*2,d=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let v=1;v<p;++v)f.push(v/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),r.fillGradientType===uu.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,c+u);let p=0;const v=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let _=0;_<i.length;_++){const g=s.lineHeight*_;for(let y=0;y<d.length;y++){let m=0;typeof f[y]=="number"?m=f[y]:m=y/d.length;const x=g/c+m*v;let E=Math.max(p,x);E=Math.min(E,1),a.addColorStop(E,d[y]),p=E}}}else{a=e.createLinearGradient(u,c/2,h+u,c/2);const p=d.length+1;let v=1;for(let _=0;_<d.length;_++){let g;typeof f[_]=="number"?g=f[_]:g=v/p,a.addColorStop(g,d[_]),v++}}return a}function bR(t,e,r,n,i,s,o){const a=r.text,l=r.fontProperties;e.translate(n,i),e.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=AR(t,e,o,s,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=ve.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+r.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Fa(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function dx(t){return Array.from?Array.from(t):t.split("")}function CR(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...dx(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Hr=class nr{constructor(e,r,n){var h;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Br(o.file),u={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<e.page.length;c++){const{id:d,file:f}=e.page[c];u[d]=r instanceof Array?r[c]:r[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[d].baseTexture.alphaMode=ut.NO_PREMULTIPLIED_ALPHA,u[d].baseTexture.mipmap=pr.OFF)}for(let c=0;c<e.char.length;c++){const{id:d,page:f}=e.char[c];let{x:p,y:v,width:_,height:g,xoffset:y,yoffset:m,xadvance:x}=e.char[c];p/=l,v/=l,_/=l,g/=l,y/=l,m/=l,x/=l;const E=new ee(p+u[f].frame.x/l,v+u[f].frame.y/l,_,g);this.chars[d]={xOffset:y,yOffset:m,xAdvance:x,kerning:{},texture:new W(u[f].baseTexture,E),page:f}}for(let c=0;c<e.kerning.length;c++){let{first:d,second:f,amount:p}=e.kerning[c];d/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[d]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,r,n){let i;if(e instanceof Il)i=e;else{const o=SR(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}r instanceof W&&(r=[r]);const s=new nr(i,r,n);return nr.available[s.font]=s,s}static uninstall(e){const r=nr.available[e];if(!r)throw new Error(`No font found named '${e}'`);r.destroy(),delete nr.available[e]}static from(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},nr.defaultOptions,n),h=CR(i),c=r instanceof Fr?r:new Fr(r),d=a,f=new Il;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};let p=0,v=0,_,g,y,m=0;const x=[];for(let A=0;A<h.length;A++){_||(_=z.ADAPTER.createCanvas(),_.width=a,_.height=l,g=_.getContext("2d"),y=new J(_,{resolution:o,...u}),x.push(new W(y)),f.page.push({id:x.length-1,file:""}));const w=h[A],T=Vr.measureText(w,c,!1,_),R=T.width,I=Math.ceil(T.height),q=Math.ceil((c.fontStyle==="italic"?2:1)*R);if(v>=l-I*o){if(v===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${w}')`);--A,_=null,g=null,y=null,v=0,p=0,m=0;continue}if(m=Math.max(I+T.fontProperties.descent,m),q*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${w}')`);--A,v+=m*o,v=Math.ceil(v),p=0,m=0;continue}bR(_,g,T,p,v,o,c);const F=Fa(T.text);f.char.push({id:F,page:x.length-1,x:p/o,y:v/o,width:q,height:I,xoffset:0,yoffset:0,xadvance:R-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),p+=(q+2*s)*o,p=Math.ceil(p)}if(!(n!=null&&n.skipKerning))for(let A=0,w=h.length;A<w;A++){const T=h[A];for(let R=0;R<w;R++){const I=h[R],q=g.measureText(T).width,F=g.measureText(I).width,S=g.measureText(T+I).width-(q+F);S&&f.kerning.push({first:Fa(T),second:Fa(I),amount:S})}}const E=new nr(f,x,!0);return nr.available[e]!==void 0&&nr.uninstall(e),nr.available[e]=E,E}};Hr.ALPHA=[["a","z"],["A","Z"]," "],Hr.NUMERIC=[["0","9"]],Hr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Hr.ASCII=[[" ","~"]],Hr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Hr.ALPHANUMERIC},Hr.available={};let zr=Hr;var PR=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,IR=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const zg=[],$g=[],jg=[],RR=class fx extends it{constructor(e,r={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},fx.styleDefaults,r);if(!zr.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new ve(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new br(()=>{this.dirty=!0},this,0,0),this._roundPixels=z.ROUND_PIXELS,this.dirty=!0,this._resolution=z.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var q;const e=zr.available[this._fontName],r=this.fontSize,n=r/e.size,i=new ae,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=dx(l),h=this._maxWidth*e.size/r,c=e.distanceFieldType==="none"?zg:$g;let d=null,f=0,p=0,v=0,_=-1,g=0,y=0,m=0,x=0;for(let F=0;F<u.length;F++){const S=u[F],M=Fa(S);if(/(?:\s)/.test(S)&&(_=F,g=f,x++),S==="\r"||S===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++v,++y,i.x=0,i.y+=e.lineHeight,d=null,x=0;continue}const O=e.chars[M];if(!O)continue;d&&O.kerning[d]&&(i.x+=O.kerning[d]);const V=jg.pop()||{texture:W.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ae};V.texture=O.texture,V.line=v,V.charCode=M,V.position.x=Math.round(i.x+O.xOffset+this._letterSpacing/2),V.position.y=Math.round(i.y+O.yOffset),V.prevSpaces=x,s.push(V),f=V.position.x+Math.max(O.xAdvance-O.xOffset,O.texture.orig.width),i.x+=O.xAdvance+this._letterSpacing,m=Math.max(m,O.yOffset+O.texture.height),d=M,_!==-1&&h>0&&i.x>h&&(++y,Ui(s,1+_-y,1+F-_),F=_,_=-1,o.push(g),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,g),v++,i.x=0,i.y+=e.lineHeight,d=null,x=0)}const E=u[u.length-1];E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(f=g),o.push(f),p=Math.max(p,f),a.push(-1));const A=[];for(let F=0;F<=v;F++){let S=0;this._align==="right"?S=p-o[F]:this._align==="center"?S=(p-o[F])/2:this._align==="justify"&&(S=a[F]<0?0:(p-o[F])/a[F]),A.push(S)}const w=s.length,T={},R=[],I=this._activePagesMeshData;c.push(...I);for(let F=0;F<w;F++){const S=s[F].texture,M=S.baseTexture.uid;if(!T[M]){let O=c.pop();if(!O){const L=new eR;let C,k;e.distanceFieldType==="none"?(C=new Lg(W.EMPTY),k=Q.NORMAL):(C=new Lg(W.EMPTY,{program:Cr.from(IR,PR),uniforms:{uFWidth:0}}),k=Q.NORMAL_NPM);const b=new Fg(L,C);b.blendMode=k,O={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:b,vertices:null,uvs:null,indices:null}}O.index=0,O.indexCount=0,O.vertexCount=0,O.uvsCount=0,O.total=0;const{_textureCache:V}=this;V[M]=V[M]||new W(S.baseTexture),O.mesh.texture=V[M],O.mesh.tint=this._tintColor.value,R.push(O),T[M]=O}T[M].total++}for(let F=0;F<I.length;F++)R.includes(I[F])||this.removeChild(I[F].mesh);for(let F=0;F<R.length;F++)R[F].mesh.parent!==this&&this.addChild(R[F].mesh);this._activePagesMeshData=R;for(const F in T){const S=T[F],M=S.total;if(!(((q=S.indices)==null?void 0:q.length)>6*M)||S.vertices.length<Fg.BATCHABLE_SIZE*2)S.vertices=new Float32Array(4*2*M),S.uvs=new Float32Array(4*2*M),S.indices=new Uint16Array(6*M);else{const O=S.total,V=S.vertices;for(let L=O*4*2;L<V.length;L++)V[L]=0}S.mesh.size=6*M}for(let F=0;F<w;F++){const S=s[F];let M=S.position.x+A[S.line]*(this._align==="justify"?S.prevSpaces:1);this._roundPixels&&(M=Math.round(M));const O=M*n,V=S.position.y*n,L=S.texture,C=T[L.baseTexture.uid],k=L.frame,b=L._uvs,P=C.index++;C.indices[P*6+0]=0+P*4,C.indices[P*6+1]=1+P*4,C.indices[P*6+2]=2+P*4,C.indices[P*6+3]=0+P*4,C.indices[P*6+4]=2+P*4,C.indices[P*6+5]=3+P*4,C.vertices[P*8+0]=O,C.vertices[P*8+1]=V,C.vertices[P*8+2]=O+k.width*n,C.vertices[P*8+3]=V,C.vertices[P*8+4]=O+k.width*n,C.vertices[P*8+5]=V+k.height*n,C.vertices[P*8+6]=O,C.vertices[P*8+7]=V+k.height*n,C.uvs[P*8+0]=b.x0,C.uvs[P*8+1]=b.y0,C.uvs[P*8+2]=b.x1,C.uvs[P*8+3]=b.y1,C.uvs[P*8+4]=b.x2,C.uvs[P*8+5]=b.y2,C.uvs[P*8+6]=b.x3,C.uvs[P*8+7]=b.y3}this._textWidth=p*n,this._textHeight=(i.y+e.lineHeight)*n;for(const F in T){const S=T[F];if(this.anchor.x!==0||this.anchor.y!==0){let L=0;const C=this._textWidth*this.anchor.x,k=this._textHeight*this.anchor.y;for(let b=0;b<S.total;b++)S.vertices[L++]-=C,S.vertices[L++]-=k,S.vertices[L++]-=C,S.vertices[L++]-=k,S.vertices[L++]-=C,S.vertices[L++]-=k,S.vertices[L++]-=C,S.vertices[L++]-=k}this._maxLineHeight=m*n;const M=S.mesh.geometry.getBuffer("aVertexPosition"),O=S.mesh.geometry.getBuffer("aTextureCoord"),V=S.mesh.geometry.getIndex();M.data=S.vertices,O.data=S.uvs,V.data=S.indices,M.update(),O.update(),V.update()}for(let F=0;F<s.length;F++)jg.push(s[F]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:n,size:i}=zr.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),c=(Math.abs(u)+Math.abs(h))/2,d=this.fontSize/i,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=c*r*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=zr.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!zr.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??zr.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:r}=this,n=zr.available[this._fontName].distanceFieldType==="none"?zg:$g;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>r[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=W.EMPTY});for(const i in r)r[i].destroy(),delete r[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};RR.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const MR=[".xml",".fnt"],DR={extension:{type:U.LoadParser,priority:Kt.Normal},name:"loadBitmapFont",test(t){return MR.includes(je.extname(t).toLowerCase())},async testParse(t){return Oa.test(t)||Td.test(t)},async parse(t,e,r){const n=Oa.test(t)?Oa.parse(t):Td.parse(t),{src:i}=e,{page:s}=n,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=je.join(je.dirname(i),h);c=gd(c,i),o.push(c)}const a=await r.load(o),l=o.map(u=>a[u]);return zr.install(n,l,!0)},async load(t,e){return(await z.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};X.add(DR);const Sd=class fi extends Fr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new fi(Object.keys(fi.defaultOptions).reduce((r,n)=>({...r,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete fi.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,r={}){const{availableFonts:n}=fi;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return z.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:je.basename(e,je.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},r);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const r=e.filter(n=>!this._overrides.includes(n));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...e){const r=e.filter(n=>this._overrides.includes(n));r.length>0&&(this._overrides=this._overrides.filter(n=>!r.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,r)=>`${e}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Eb(e)),typeof e=="number"?xb(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&r<1&&(e+=(r*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,fi.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=z.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Sd.availableFonts={},Sd.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Rh=Sd;const pa=class pi extends os{constructor(e="",r={}){super(W.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=W.from(n,{scaleMode:z.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new ee,i.trim=new ee,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=pi.defaultMaxWidth,this.maxHeight=pi.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=pi.defaultAutoResolution,this._resolution=pi.defaultResolution??z.RESOLUTION,this.text=e,this.style=r}measureText(e){var h,c;const{text:r,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(i)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:l+n.padding*2,height:u+n.padding*2}}async updateText(e=!0){const{style:r,_image:n,_loadImage:i}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await r.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:r,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=r;r.trim.width=r._frame.width=n.width/i,r.trim.height=r._frame.height=n.height/i,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},pi.defaultDestroyOptions,e),super.destroy(e);const r=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=r,(i=this._svgRoot)==null||i.remove(),this._svgRoot=r,(s=this._domElement)==null||s.remove(),this._domElement=r,(o=this._foreignObject)==null||o.remove(),this._foreignObject=r,(a=this._styleElement)==null||a.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const r=Jr(this.scale.x)||1;this.scale.x=r*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const r=Jr(this.scale.y)||1;this.scale.y=r*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Rh?(this.ownsStyle=!1,this._style=e):e instanceof Fr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Rh.from(e)):(this.ownsStyle=!0,this._style=new Rh(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};pa.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},pa.defaultMaxWidth=2024,pa.defaultMaxHeight=2024,pa.defaultAutoResolution=!0;function NR({onRender:t,className:e=""}){const r=D.useRef(null),n=D.useRef(null),i=D.useRef(t);return D.useEffect(()=>{i.current=t},[t]),D.useEffect(()=>{if(!r.current)return;const s=new V_({width:r.current.clientWidth,height:r.current.clientHeight,backgroundColor:1710638,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0});r.current.appendChild(s.view),n.current=s;const o=()=>{s&&r.current&&s.renderer.resize(r.current.clientWidth,r.current.clientHeight)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),s&&s.destroy(!0,{children:!0})}},[]),D.useEffect(()=>{if(!n.current)return;let s,o=Date.now();const l=1e3/60,u=()=>{const h=Date.now(),c=h-o;c>=l&&(o=h-c%l,n.current&&i.current(n.current)),s=requestAnimationFrame(u)};return s=requestAnimationFrame(u),()=>{cancelAnimationFrame(s)}},[]),G.jsx("div",{ref:r,className:`arena-canvas ${e}`,style:{width:"100%",height:"100%"}})}function qn(t){return t*Math.PI/180}function Gn(t,e){return 360/e*t-90}function Lf(t,e,r){const[n,i]=kR(t,e,r);return{x:(n.x+i.x)/2,y:(n.y+i.y)/2}}function kR(t,e,r){const i=360/e/2,s=Gn(t,e),o=qn(s-i),a=qn(s+i);return[{x:r*Math.cos(o),y:r*Math.sin(o)},{x:r*Math.cos(a),y:r*Math.sin(a)}]}function px(t,e){return 2*e*Math.sin(Math.PI/t)}function Vg(t,e){const r=Gn(t,e),n=qn(r);return{x:Math.cos(n),y:Math.sin(n)}}function mx(t,e){const r=Gn(t,e),n=qn(r);return{x:-Math.sin(n),y:Math.cos(n)}}function Wg(t,e){return-Gn(t,e)-90}function Xg(t,e){const r=[];for(let n=0;n<t;n++){const i=360/t,s=qn(360/t*n-90-i/2);r.push({x:e*Math.cos(s),y:e*Math.sin(s)})}return r}const Yg=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#EC4899"];function La(t){return Yg[t%Yg.length]}const hn={PADDLE_LENGTH_RATIO:.2,PADDLE_MOVE_RANGE:.6,PADDLE_MAX_SPEED:2.5,PADDLE_ACCELERATION:6,PADDLE_DECELERATION:.85,BALL_SPEED_INCREMENT:1.02,BALL_RADIUS_RATIO:.03};function Uf(t){return t===2?{alpha:.5,beta:.9,renderN:4}:t===3?{alpha:.4,beta:.85,renderN:3}:t===4?{alpha:.3,beta:.75,renderN:4}:t===5?{alpha:.25,beta:.7,renderN:5}:{alpha:hn.PADDLE_LENGTH_RATIO,beta:hn.PADDLE_MOVE_RANGE,renderN:t}}class Kg{constructor(e){qt(this,"container");qt(this,"graphics");qt(this,"labels",[]);this.options=e,this.container=new it,this.graphics=new ts,this.container.addChild(this.graphics),this.render()}render(){this.graphics.clear(),this.clearLabels();const{n:e,radius:r,players:n,myPlayerIndex:i}=this.options,{renderN:s}=Uf(e);this.drawPolygon(s,r),this.drawSides(e,s,r,n,i),this.drawLabels(e,s,r,n,i)}drawPolygon(e,r){const n=Xg(e,r);this.graphics.lineStyle(2,13684944,1),this.graphics.moveTo(n[0].x,n[0].y);for(let i=1;i<n.length;i++)this.graphics.lineTo(n[i].x,n[i].y);this.graphics.lineTo(n[0].x,n[0].y)}drawSides(e,r,n,i,s){const o=Xg(r,n),a=e===2?[0,2]:Array.from({length:e},(l,u)=>u);for(let l=0;l<e;l++){const u=a[l],h=o[u],c=o[(u+1)%r],d={x:(h.x+c.x)/2,y:(h.y+c.y)/2},f={x:c.x-h.x,y:c.y-h.y},p=Math.sqrt(f.x**2+f.y**2),v={x:d.x-f.x/p*(p*.3),y:d.y-f.y/p*(p*.3)},_={x:d.x+f.x/p*(p*.3),y:d.y+f.y/p*(p*.3)},g=La(l),y=l===s?4:2;this.graphics.lineStyle(y,parseInt(g.replace("#",""),16),1),this.graphics.moveTo(v.x,v.y),this.graphics.lineTo(_.x,_.y)}}drawLabels(e,r,n,i,s){var a,l;const o=e===2?[0,2]:Array.from({length:e},(u,h)=>h);for(let u=0;u<e;u++){const h=o[u],c=Lf(h,r,n*1.15),d=u===s,f=d?`${((a=i[u])==null?void 0:a.nickname)||`P${u+1}`} (YOU)`:((l=i[u])==null?void 0:l.nickname)||`P${u+1}`,p=new Fr({fontFamily:"Arial",fontSize:d?14:12,fill:d?16569165:16777215,fontWeight:d?"bold":"normal"}),v=new Ff(f,p);v.anchor.set(.5),v.x=c.x,v.y=c.y,this.labels.push(v),this.container.addChild(v)}}clearLabels(){this.labels.forEach(e=>{this.container.removeChild(e),e.destroy()}),this.labels=[]}update(e){Object.assign(this.options,e),this.render()}getContainer(){return this.container}destroy(){this.clearLabels(),this.graphics.destroy(),this.container.destroy()}}function Rr(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Ds(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rt(t,e){return{x:t.x*e,y:t.y*e}}function Rl(t,e){return t.x*e.x+t.y*e.y}function ji(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function BR(t){const e=ji(t);return e===0?{x:0,y:0}:{x:t.x/e,y:t.y/e}}class qg{constructor(e){qt(this,"container");qt(this,"graphics");this.options=e,this.container=new it,this.graphics=new ts,this.container.addChild(this.graphics),this.render()}render(){this.graphics.clear();const{n:e,radius:r,paddles:n}=this.options,{alpha:i,beta:s,renderN:o}=Uf(e),a=e===2?[0,2]:Array.from({length:e},(c,d)=>d),l=px(o,r),u=l*i,h=l*s;n.forEach((c,d)=>{const f=a[d];this.drawPaddle({...c,sideIndex:f},o,r,u,h)})}drawPaddle(e,r,n,i,s){const{sideIndex:o,position:a,isMe:l}=e,u=Lf(o,r,n),h=mx(o,r),c=a*s/2,d=Rr(u,Rt(h,c)),f=i/2,p=Rr(d,Rt(h,-f)),v=Rr(d,Rt(h,f)),_=l?8:6,g=l?16569165:parseInt(e.color.replace("#",""),16);this.graphics.lineStyle({width:_,color:g,alpha:1,cap:$t.ROUND}),this.graphics.moveTo(p.x,p.y),this.graphics.lineTo(v.x,v.y),l&&(this.graphics.lineStyle({width:_+4,color:16569165,alpha:.3,cap:$t.ROUND}),this.graphics.moveTo(p.x,p.y),this.graphics.lineTo(v.x,v.y))}update(e){Object.assign(this.options,e),this.render()}getContainer(){return this.container}destroy(){this.graphics.destroy(),this.container.destroy()}}class Qg{constructor(e){qt(this,"container");qt(this,"ballGraphics");qt(this,"trailGraphics");qt(this,"ballRadius");this.options=e,this.container=new it,this.ballGraphics=new ts,this.trailGraphics=new ts,this.container.addChild(this.trailGraphics),this.container.addChild(this.ballGraphics),this.ballRadius=e.arenaRadius*hn.BALL_RADIUS_RATIO,this.render()}render(){this.renderTrail(),this.renderBall()}renderTrail(){this.trailGraphics.clear();const{trail:e,hitEffectActive:r}=this.options;if(!e||e.length<2)return;const n=r?e.length:Math.min(e.length,10);for(let i=0;i<n-1;i++){const s=e[i],o=e[i+1],a=(i+1)/n*(r?.8:.5),l=this.ballRadius*2*((i+1)/n)*(r?1.5:1);this.trailGraphics.lineStyle({width:l,color:16777215,alpha:a,cap:$t.ROUND}),this.trailGraphics.moveTo(s.x,s.y),this.trailGraphics.lineTo(o.x,o.y)}}renderBall(){this.ballGraphics.clear();const{position:e,hitEffectActive:r}=this.options;this.ballGraphics.beginFill(16777215,1),this.ballGraphics.drawCircle(e.x,e.y,this.ballRadius),this.ballGraphics.endFill(),r&&(this.ballGraphics.lineStyle({width:2,color:16569165,alpha:.8}),this.ballGraphics.drawCircle(e.x,e.y,this.ballRadius+4))}update(e){Object.assign(this.options,e),this.render()}getContainer(){return this.container}destroy(){this.ballGraphics.destroy(),this.trailGraphics.destroy(),this.container.destroy()}}function OR({onTouchStart:t,onTouchEnd:e,isTouching:r=!1,touchingDirection:n="NONE"}){const i=a=>{a.preventDefault(),t("LEFT")},s=a=>{a.preventDefault(),t("RIGHT")},o=()=>{e()};return G.jsxs("div",{className:"flex h-full select-none",children:[G.jsx("div",{className:`flex-1 flex items-center justify-center transition-all ${r&&n==="LEFT"?"bg-purple-500/30":"bg-transparent hover:bg-purple-500/10"}`,onTouchStart:i,onMouseDown:i,onTouchEnd:o,onMouseUp:o,onMouseLeave:o,children:G.jsx("div",{className:"text-6xl opacity-20",children:""})}),G.jsx("div",{className:`flex-1 flex items-center justify-center transition-all ${r&&n==="RIGHT"?"bg-blue-500/30":"bg-transparent hover:bg-blue-500/10"}`,onTouchStart:s,onMouseDown:s,onTouchEnd:o,onMouseUp:o,onMouseLeave:o,children:G.jsx("div",{className:"text-6xl opacity-20",children:""})}),G.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:G.jsx("div",{className:"px-4 py-2 bg-black/50 text-white text-sm rounded-lg opacity-40",children:"PC: A/D  /"})})]})}function FR(t={}){const{enableTouch:e=!0,enableKeyboard:r=!0}=t,[n,i]=D.useState("NONE"),[s,o]=D.useState(!1);D.useEffect(()=>{if(!r)return;const u=new Set,h=f=>{const p=f.key.toLowerCase();["arrowleft","a"].includes(p)?u.add("left"):["arrowright","d"].includes(p)&&u.add("right"),d()},c=f=>{const p=f.key.toLowerCase();["arrowleft","a"].includes(p)?u.delete("left"):["arrowright","d"].includes(p)&&u.delete("right"),d()},d=()=>{const f=u.has("left"),p=u.has("right");i(f&&p?"NONE":f?"LEFT":p?"RIGHT":"NONE")};return window.addEventListener("keydown",h),window.addEventListener("keyup",c),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",c)}},[r]);const a=D.useCallback(u=>{e&&(i(u),o(!0))},[e]),l=D.useCallback(()=>{e&&(i("NONE"),o(!1))},[e]);return{direction:n,isTouching:s,handleTouchStart:a,handleTouchEnd:l}}function LR(t){const{direction:e,initialPosition:r=0}=t,[n,i]=D.useState(r),s=D.useRef(0),o=D.useRef(r);return D.useEffect(()=>{let a;const l=()=>{const u=.016666666666666666;let h=0;e==="LEFT"?h=-6:e==="RIGHT"?h=hn.PADDLE_ACCELERATION:(h=0,s.current*=hn.PADDLE_DECELERATION),s.current+=h*u;const c=hn.PADDLE_MAX_SPEED;s.current=Math.max(-c,Math.min(c,s.current));const d=o.current+s.current*u,f=Math.max(-1,Math.min(1,d));f!==d&&(s.current=0),o.current=f,i(f),a=requestAnimationFrame(l)};return a=requestAnimationFrame(l),()=>{cancelAnimationFrame(a)}},[e]),{position:n,velocity:s.current}}function UR(t,e,r){const{start:n,end:i}=r,s=Ds(i,n),o=ji(s);if(o===0)return{collided:ji(Ds(t,n))<=e,point:n,t:0};const a=Rt(s,1/o),l=Ds(t,n),u=Math.max(0,Math.min(1,Rl(l,a)/o)),h=Rr(n,Rt(s,u));return{collided:ji(Ds(t,h))<=e,point:h,t:u}}function GR(t,e,r,n,i){const s=i/2,o={start:Rr(r,Rt(n,-s)),end:Rr(r,Rt(n,s))};return UR(t,e,o)}function Mh(t,e){return ji(t)>e}function Dh(t,e,r){const n=Math.atan2(t.y,t.x)*180/Math.PI,i=e-r/2,s=e+r/2,o=(n+180)%360-180,a=(i+180)%360-180,l=(s+180)%360-180;return a<=l?o>=a&&o<=l:o>=a||o<=l}function HR(t,e){const r=Rl(t,e),n=Rt(e,2*r);return Ds(t,n)}function zR(t,e,r=1.05){const n=HR(t,e),s=ji(n)*r,o=BR(n);return Rt(o,s)}function $R(t){const{playerCount:e,arenaRadius:r,paddles:n,initialPosition:i={x:0,y:0},initialVelocity:s={x:50,y:50},onPlayerOut:o,onPaddleHit:a,paused:l=!1}=t,[u,h]=D.useState(i),[c,d]=D.useState([]),[f,p]=D.useState(!1),v=D.useRef(s),_=D.useRef(0),g=D.useRef(s);D.useEffect(()=>{g.current=s},[s]);const y=r*hn.BALL_RADIUS_RATIO,{alpha:m,beta:x,renderN:E}=Uf(e),A=e===2?[0,2]:Array.from({length:e},(F,S)=>S),w=px(E,r),T=w*m,R=w*x,I=D.useCallback((F,S)=>{let M=S,O=F,V=!1;for(let L=0;L<n.length;L++){const C=n[L],{position:k}=C,b=A[L],P=Lf(b,E,r),j=Vg(b,E),te=mx(b,E),re=k*R/2,me=Rr(P,Rt(te,re));if(Rl(S,j)<=0)continue;if(GR(F,y+4,me,te,T).collided){M=zR(S,j,hn.BALL_SPEED_INCREMENT);const ce=y+2;O=Rr(F,Rt(j,-ce)),V=!0,a==null||a(L),p(!0),_.current=Date.now(),console.log(`[Ball] HIT on Side ${b} (Player ${L}), speed: ${Math.sqrt(M.x**2+M.y**2).toFixed(1)}`);break}}if(!V&&e===2){const L=r*Math.cos(Math.PI/E);if(Mh(O,L)){const C=360/E;for(let k=1;k<=3;k+=2){const b=Gn(k,E);if(Dh(O,b,C)){const P=Vg(k,E),j=Rl(S,P);if(j<=0)continue;const te=j;M={x:S.x-2*te*P.x,y:S.y-2*te*P.y};const re=y+2;O=Rr(O,Rt(P,-re)),console.log(`[Ball]   (Side ${k})`),V=!0;break}}if(!V)for(let k=0;k<e;k++){const b=A[k],P=Gn(b,E);if(Dh(O,P,C))return console.log(`[Ball] OUT! Side ${b} (Player ${k}) -  `),o==null||o(k),v.current={x:0,y:0},{velocity:{x:0,y:0},position:O}}}}if(!V&&e>=3){const L=r*Math.cos(Math.PI/E);if(Mh(O,L)){const C=360/E;for(let k=0;k<e;k++){const b=A[k],P=Gn(b,E);if(Dh(O,P,C))return console.log(`[Ball] OUT! Side ${b} (Player ${k}) passed`),o==null||o(k),v.current={x:0,y:0},{velocity:{x:0,y:0},position:O}}}}return Mh(O,r*1.5)?(console.log("[Ball] : Arena  ,  "),v.current={x:0,y:0},{velocity:{x:0,y:0},position:O}):{velocity:M,position:O}},[n,e,r,y,w,T,R,A,E,o,a]);D.useEffect(()=>{if(l)return;let F;const S={x:u.x,y:u.y},M=()=>{const O=.016666666666666666,V={x:S.x+v.current.x*O,y:S.y+v.current.y*O},L=I(V,v.current);L?(v.current=L.velocity,S.x=L.position.x,S.y=L.position.y,h(L.position)):(S.x=V.x,S.y=V.y,h(V)),d(C=>[...C,{x:S.x,y:S.y}].slice(-15)),Date.now()-_.current>300&&p(!1),F=requestAnimationFrame(M)};return F=requestAnimationFrame(M),()=>{cancelAnimationFrame(F)}},[I,l]);const q=D.useCallback(()=>{h(i),d([]),p(!1),v.current=g.current,_.current=0},[i]);return{position:u,velocity:v.current,trail:c,hitEffectActive:f,ballRadius:y,reset:q}}function jR(t){const{initialPlayers:e,myPlayerId:r}=t,[n,i]=D.useState("LOBBY"),[s,o]=D.useState(e.map(y=>({...y,status:"ALIVE"}))),[a,l]=D.useState(null);D.useEffect(()=>{o(e.map(y=>({...y,status:"ALIVE"})))},[e]);const u=s.filter(y=>y.status==="ALIVE"),h=s.find(y=>y.id===r),c=(h==null?void 0:h.status)==="ALIVE",d=u.length,f=u.findIndex(y=>y.id===r),p=D.useCallback(()=>{i("COUNTDOWN"),setTimeout(()=>{i("PLAYING")},3e3)},[]),v=D.useCallback(y=>{if(n!=="PLAYING")return;const m=u[y];if(!m)return;console.log(`[GameState] Player ${m.nickname} is OUT!`),o(E=>{const A=E.filter(w=>w.status==="OUT").length+1;return E.map(w=>w.id===m.id?{...w,status:"OUT",outOrder:A}:w)});const x=u.filter(E=>E.id!==m.id);if(x.length===1){const E=x[0];console.log(`[GameState] Winner: ${E.nickname}`),l(E),i("FINISHED")}},[u,n]),_=D.useCallback(()=>{o(y=>y.map(m=>({...m,status:"ALIVE",outOrder:void 0}))),l(null),i("LOBBY")},[]),g=D.useCallback(y=>u.findIndex(m=>m.id===y),[u]);return{gameStatus:n,players:s,alivePlayers:u,myPlayer:h,isMyPlayerAlive:c,playerCount:d,myPlayerIndex:f,winner:a,startGame:p,handlePlayerOut:v,restartGame:_,getPlayerSideIndex:g}}const Nh=8,VR=1500;function WR(){const[t,e]=D.useState(Nh),[r,n]=D.useState(null),[i,s]=D.useState(null),[o,a]=D.useState(!0),[l,u]=D.useState(!1),[h,c]=D.useState(150),[d,f]=D.useState(null),p=D.useMemo(()=>Array.from({length:t},(Z,ce)=>({id:`player-${ce}`,nickname:`P${ce+1}`})),[t]),{gameStatus:v,alivePlayers:_,playerCount:g,myPlayerIndex:y,winner:m,handlePlayerOut:x,startGame:E,restartGame:A}=jR({initialPlayers:p,myPlayerId:"player-0"}),w=D.useRef(null),T=D.useRef(null),R=D.useRef(null),I=D.useRef(null),{direction:q,isTouching:F,handleTouchStart:S,handleTouchEnd:M}=FR(),{position:O}=LR({direction:q,initialPosition:0}),V=D.useMemo(()=>Array.from({length:g},(Z,ce)=>({sideIndex:ce,position:ce===y?O:0})),[g,y,O]),{position:L,trail:C,hitEffectActive:k,reset:b}=$R({playerCount:g,arenaRadius:h,paddles:V,initialPosition:{x:0,y:0},initialVelocity:{x:60,y:50},paused:o,onPlayerOut:Z=>{const ce=_[Z];n(Z),s((ce==null?void 0:ce.nickname)||`P${Z+1}`),u(!0),a(!0),x(Z)},onPaddleHit:Z=>{console.log(`HIT on Side ${Z}`)}});D.useEffect(()=>{if(!l)return;const Z=setTimeout(()=>{u(!1),r===0?P(t):g<=2?P(Nh):P(g-1)},VR);return()=>clearTimeout(Z)},[l,r,g,t]);const P=D.useCallback(Z=>{j(),n(null),s(null),a(!0),b(),e(Z),A(),setTimeout(()=>{E(),f(3)},100)},[b,A,E]),j=D.useCallback(()=>{T.current&&(T.current.destroy(),T.current=null),R.current&&(R.current.destroy(),R.current=null),I.current&&(I.current.destroy(),I.current=null),w.current&&(w.current.removeChildren(),w.current.destroy(),w.current=null)},[]),te=D.useCallback(()=>{j(),n(null),s(null),u(!1),a(!0),b(),e(Nh),A(),setTimeout(()=>{E(),f(3)},100)},[j,b,A,E]),re=D.useCallback(()=>{a(!0),f(3)},[]);D.useEffect(()=>{if(d!==null)if(d>0){const Z=setTimeout(()=>{f(d-1)},1e3);return()=>clearTimeout(Z)}else{const Z=setTimeout(()=>{f(null),a(!1)},500);return()=>clearTimeout(Z)}},[d]),D.useEffect(()=>{v==="LOBBY"&&(E(),re())},[]);const me=D.useCallback(Z=>{var ce,Ne;if(w.current){const ne=w.current,le=Math.min(Z.screen.width,Z.screen.height)*.38;if(le!==h&&c(le),ne.x=Z.screen.width/2,ne.y=Z.screen.height/2,R.current){const pe=Array.from({length:g},(et,Re)=>({sideIndex:Re,position:Re===y?O:0,color:La(Re),isMe:Re===y}));R.current.update({paddles:pe,radius:le})}if(I.current&&I.current.update({position:L,arenaRadius:le,trail:C,hitEffectActive:k}),T.current&&T.current.options.n!==g){T.current.destroy(),(ce=R.current)==null||ce.destroy(),(Ne=I.current)==null||Ne.destroy(),ne.removeChildren();const pe=new Kg({n:g,radius:le,players:_.map(wt=>({userId:wt.id,nickname:wt.nickname})),myPlayerIndex:y});ne.addChild(pe.getContainer()),T.current=pe;const et=Array.from({length:g},(wt,gr)=>({sideIndex:gr,position:gr===y?O:0,color:La(gr),isMe:gr===y})),Re=new qg({n:g,radius:le,paddles:et});ne.addChild(Re.getContainer()),R.current=Re;const Nt=new Qg({position:L,arenaRadius:le,trail:C,hitEffectActive:k});ne.addChild(Nt.getContainer()),I.current=Nt;const _n=Wg(y,g);ne.rotation=qn(_n),console.log(`[Arena]  N=${g}, myIndex=${y}, rotation=${_n.toFixed(1)}`)}}else{const ne=new it;Z.stage.addChild(ne),w.current=ne,ne.x=Z.screen.width/2,ne.y=Z.screen.height/2;const le=Math.min(Z.screen.width,Z.screen.height)*.38;c(le);const pe=new Kg({n:g,radius:le,players:_.map(wt=>({userId:wt.id,nickname:wt.nickname})),myPlayerIndex:y});ne.addChild(pe.getContainer()),T.current=pe;const et=Array.from({length:g},(wt,gr)=>({sideIndex:gr,position:gr===y?O:0,color:La(gr),isMe:gr===y})),Re=new qg({n:g,radius:le,paddles:et});ne.addChild(Re.getContainer()),R.current=Re;const Nt=new Qg({position:L,arenaRadius:le,trail:C,hitEffectActive:k});ne.addChild(Nt.getContainer()),I.current=Nt;const _n=Wg(y,g);ne.rotation=qn(_n),console.log(`[Arena]  N=${g}, myIndex=${y}, rotation=${_n.toFixed(1)}`)}},[g,y,_,O,L,C,k,r,h]),he=r===0,fe=m&&m.id==="player-0";return G.jsxs("div",{className:"flex flex-col h-full bg-gray-900",children:[G.jsxs("div",{className:"bg-gray-800 text-white px-4 py-2 flex items-center justify-between",style:{height:"6%"},children:[G.jsx("div",{className:"text-lg font-bold",children:"PolyPang"}),G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsxs("span",{className:"text-sm",children:[G.jsx("span",{className:"text-green-400 font-bold",children:g}),""]}),G.jsx("button",{onClick:te,className:"px-3 py-1 bg-gray-700 text-sm rounded hover:bg-gray-600",children:""})]})]}),G.jsx("div",{className:"bg-gray-850 px-4 py-1 flex items-center justify-center gap-2",style:{height:"4%",backgroundColor:"#1a1a2e"},children:_.map(Z=>G.jsx("div",{className:`px-2 py-0.5 rounded text-xs font-medium ${Z.id==="player-0"?"bg-yellow-500 text-black":"bg-gray-700 text-gray-300"}`,children:Z.nickname},Z.id))}),G.jsxs("div",{className:"relative",style:{height:"52%"},children:[G.jsx(NR,{onRender:me}),d!==null&&G.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 z-20",children:G.jsx("div",{className:"text-center",children:d>0?G.jsx("div",{className:"text-8xl font-bold text-white animate-pulse",style:{textShadow:"0 0 40px rgba(255,255,255,0.8), 0 0 80px rgba(59,130,246,0.6)",animation:"pulse 0.5s ease-in-out"},children:d}):G.jsx("div",{className:"text-6xl font-bold text-green-400",style:{textShadow:"0 0 40px rgba(74,222,128,0.8), 0 0 80px rgba(34,197,94,0.6)"},children:"GO!"})})}),l&&G.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-10",children:G.jsx("div",{className:`text-center p-6 rounded-xl ${he?"bg-red-600":fe?"bg-yellow-500":"bg-blue-600"}`,children:he?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"text-4xl mb-2",children:""}),G.jsx("div",{className:"text-2xl font-bold text-white",children:"OUT!"}),G.jsx("div",{className:"text-sm text-white/80 mt-1",children:" ..."})]}):fe?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"text-4xl mb-2",children:""}),G.jsx("div",{className:"text-2xl font-bold text-black",children:"!"}),G.jsx("div",{className:"text-sm text-black/80 mt-1",children:"  "})]}):G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"text-4xl mb-2",children:""}),G.jsxs("div",{className:"text-2xl font-bold text-white",children:[i," OUT!"]}),G.jsxs("div",{className:"text-sm text-white/80 mt-1",children:[g-1," "]})]})})})]}),G.jsx("div",{style:{height:"38%"},children:G.jsx(OR,{onTouchStart:S,onTouchEnd:M,isTouching:F,touchingDirection:q})})]})}function XR(){return G.jsx("div",{className:"app-container",children:G.jsx("div",{className:"game-viewport",children:G.jsxs(Mw,{children:[G.jsx(Pc,{path:"/",element:G.jsx(Bw,{})}),G.jsx(Pc,{path:"/arena-test",element:G.jsx(WR,{})})]})})})}kh.createRoot(document.getElementById("root")).render(G.jsx(ly.StrictMode,{children:G.jsx(kw,{children:G.jsx(XR,{})})}));
//# sourceMappingURL=index-BRWwQlfL.js.map
